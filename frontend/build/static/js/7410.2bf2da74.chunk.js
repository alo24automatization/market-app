"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[7410,1181],{23052:(e,t,a)=>{a.r(t),a.d(t,{default:()=>b});var l=a(65043),s=a(47630),n=a(84012),i=(a(54964),a(18446)),r=a(3297),c=a(79456),o=a(4235),u=a(78054),m=a(37424),h=a(12602),d=a(71605),p=a(53536),g=a(73734),f=a(11108),x=a(30200),w=a(49092),v=a(91154),y=a(85369),j=(a(38069),a(70579));const b=()=>{const{t:e}=(0,w.B)(["common"]),t=(0,c.wA)(),{packmans:a,clients:b,loading:S,searchedClients:N,total:k,totalSearched:P}=(0,c.d4)((e=>e.clients)),{user:D}=(0,c.d4)((e=>e.login)),C="Director"===D.type?[{title:"\u2116",styles:"w-[8%] text-left"},{title:e("Agent"),styles:"w-[41%] text-left"},{title:e("Mijoz"),styles:"w-[41%] text-left"},{title:e("Telefon"),styles:"w-[41%] text-left"},{title:e("Savdo"),styles:"w-[41%] text-left"},{title:e("Sof foyda"),styles:"w-[41%] text-left"},{title:"",styles:"w-[8%] text-left"}]:[{title:"\u2116",styles:"w-[8%] text-left"},{title:e("Agent"),styles:"w-[41%] text-left"},{title:e("Mijoz"),styles:"w-[41%] text-left"},{title:e("Telefon"),styles:"w-[41%] text-left"},{title:e("Savdo"),styles:"w-[41%] text-left"},{title:"",styles:"w-[8%] text-left"}],[E,B]=(0,l.useState)(new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate())),[z,A]=(0,l.useState)(new Date((new Date).setHours(23,59,59,0)).toISOString()),[W,M]=(0,l.useState)([]),[L,T]=(0,l.useState)([]),[_,Y]=(0,l.useState)([]),[q,F]=(0,l.useState)(""),[O,G]=(0,l.useState)(""),[J,Q]=(0,l.useState)(null),[H,I]=(0,l.useState)(null),[U,V]=(0,l.useState)(""),[K,R]=(0,l.useState)(null),[X,Z]=(0,l.useState)(!1),[$,ee]=(0,l.useState)(!1),[te,ae]=(0,l.useState)("10"),[le,se]=(0,l.useState)(0),[ne,ie]=(0,l.useState)(k),[re,ce]=(0,l.useState)(""),[oe,ue]=(0,l.useState)(""),[me,he]=(0,l.useState)(null),[de,pe]=(0,l.useState)(null),[ge,fe]=(0,l.useState)(!1),xe=()=>{Z(!X),setTimeout((()=>{R(null)}),500)},[we,ve]=(0,l.useState)(window.innerWidth<=768);(0,l.useEffect)((()=>{const e=()=>{ve(window.innerWidth<=768)};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[]);const ye=e=>{Q(e.packman?{label:e.packman.name,value:e.packman._id}:""),F(e.name||""),G(e.phoneNumber),V(e),ee(!0)},je=e=>{R(e),pe("approve"),Z(!0)},be=e=>{pe("allChecks"),he(e),Z(!0)},Se=e=>{e&&e.preventDefault(),F(""),Q(null),ee(!1),G("")},Ne=e=>{let{value:t}=e;I(t)},ke=e=>{let a=e.target.value,l=a.toLowerCase().replace(/\s+/g," ").trim();if(ce(a),(_.length>0||P>0)&&t((0,f.t2)()),""===l)T(b),ie(k);else{const e=(0,p.filter)(b,(e=>e.name.toLowerCase().includes(l)));T(e),ie(e.length)}},Pe=e=>{if("Enter"===e.key){const e={currentPage:le,countPage:te,search:{client:re.replace(/\s+/g," ").trim()}};t((0,f.CN)(e))}};return(0,l.useEffect)((()=>{t((0,f.YU)())}),[t]),(0,l.useEffect)((()=>{const e={search:{client:re.replace(/\s+/g," ").trim(),packman:H}};t((0,f.Lf)(e))}),[t,te,le,E,z,H]),(0,l.useEffect)((()=>{T(b)}),[b]),(0,l.useEffect)((()=>{ie(k)}),[k]),(0,l.useEffect)((()=>{Y(N)}),[N]),(0,l.useEffect)((()=>{const e=(0,p.map)(a,(e=>({label:e.name,value:e._id})));M(e)}),[a]),(0,j.jsxs)(d.P.section,{initial:"collapsed",animate:"open",exit:"collapsed",variants:{open:{opacity:1,height:"auto"},collapsed:{opacity:0,height:0}},transition:{duration:.8,ease:[.04,.62,.23,.98]},children:[(0,j.jsx)(h.A,{headerText:"".concat(K&&K.name," ").concat(e("ismli mijozni o`chirishni tasdiqlaysizmi?")),title:e("O`chirilgan mijozni tiklashning imkoni mavjud emas!"),toggleModal:xe,body:de,approveFunction:()=>{const e={name:K.name,_id:K._id,packman:K.packman,currentPage:le,countPage:te,search:{client:re.replace(/\s+/g," ").trim()}};t((0,f.Qy)(e)).then((e=>{let{error:t}=e;t||(Se(),(0,g.VB)())})),xe()},isOpen:X,printedSelling:me}),(0,j.jsxs)("form",{className:"flex ps-[20px] mt-[40px] gap-[1.25rem] bg-background flex-col mainPadding transition ease-linear duration-200 ".concat($&&"stickyForm"),children:[(0,j.jsxs)("div",{className:"supplier-style",children:[(0,j.jsx)(s.A,{value:J,onChange:e=>{Q(e)},label:e("Agentni tanlang"),placeholder:e("Dilso`z"),select:!0,options:W,maxWidth:"lg:w-[21rem] w-[90vw]",border:!0}),(0,j.jsx)(s.A,{value:q,label:e("Mijoz ismi"),placeholder:e("misol: Navro`z"),maxWidth:"lg:w-[21rem] w-[90vw]",type:"string",onChange:e=>{F(e.target.value)}}),(0,j.jsxs)("div",{className:"flex gap-[1.25rem] grow w-[18.3125rem]",children:[(0,j.jsx)(n.A,{add:!$,edit:$,text:e($?"Saqlash":"Yangi agent qo`shish"),onClick:$?a=>{a.preventDefault();const{failed:l,message:s}=(0,x.py)([{value:q,message:e("Mijoz ismi")},{value:O,message:e("Telefon raqam")}]);if(l)(0,g.EB)(s);else{const e={name:q,_id:U._id,packman:J&&J.value||null,currentPage:le,phoneNumber:O,countPage:te,search:{client:re.replace(/\s+/g," ").trim()}};t((0,f.GG)(e)).then((e=>{let{error:t}=e;t||(Se(),(0,g.h6)())}))}}:a=>{a.preventDefault();const{failed:l,message:s}=(0,x.py)([{value:q,message:e("Mijoz ismi")}]);if(l)(0,g.EB)(s);else{const e={name:q,phoneNumber:O,packman:J&&J.value||null,currentPage:le,countPage:te,search:{client:re.replace(/\s+/g," ").trim()}};t((0,f.MN)(e)).then((e=>{let{error:t}=e;t||(Se(),(0,g.PW)())}))}}}),(0,j.jsx)(n.A,{onClick:Se,text:e("Tozalash")})]})]}),(0,j.jsx)(s.A,{value:O,label:e("\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0440\u0430\u043a\u0430\u043c"),placeholder:e("misol: 911234333"),maxWidth:"lg:w-[21rem] w-[90vw]",type:"string",onChange:e=>{G(e.target.value)}})]}),we&&(0,j.jsx)("div",{className:"flex ps-[10px] pe-[20px] lg:justify-start gap-2 items-center justify-between mb-4",children:(0,j.jsxs)("button",{onClick:()=>{fe(!0)},className:"d-block  hover:bg-blue-200  bg-blue-400   focus-visible:outline-none w-[150px] h-[40px] createElement ",children:[(0,j.jsx)(y.YsJ,{})," ",e("izlash")]})}),we?ge&&(0,j.jsxs)("div",{className:"absolute lg:p-[50px] w-[100vw]  h-[100vh]  flex justify-evenly flex-wrap    top-0\tleft-0 z-50 bg-[white]\t",children:[(0,j.jsx)(v.hvQ,{onClick:()=>fe(!1),className:" absolute right-[20px]  top-[20px]  text-4xl cursor-pointer"}),(0,j.jsxs)("div",{className:"mt-[10px] flex flex-wrap justify-center items-center",children:[(0,j.jsx)(m.A,{filterBy:["clientName","select"],filterByPackman:Ne,filterByClientNameWhenPressEnter:Pe,filterByDelivererNameWhenPressEnter:Pe,searchByClientName:re,filterByClientName:ke,startDate:E,endDate:new Date(z),setStartDate:B,setEndDate:A,searchByPackmans:[{label:"Barchasi",value:null},...W]}),(0,j.jsxs)("button",{onClick:()=>{fe(!1)},className:"d-block  hover:bg-blue-200  bg-blue-400   focus-visible:outline-none w-[150px] h-[40px] createElement ",children:[(0,j.jsx)(y.YsJ,{})," ",e("izlash")]})]})]}):(0,j.jsx)("div",{className:"mt-[10px] px-4 flex justify-center items-center",children:(0,j.jsx)(m.A,{filterBy:["clientName","clientPhoneNumber","select"],filterByPackman:Ne,filterByClientNameWhenPressEnter:Pe,filterByDelivererNameWhenPressEnter:Pe,searchByClientName:re,filterByClientName:ke,startDate:E,endDate:new Date(z),phoneNumber:oe,filterByClientPhoneNumber:e=>{let a=e.target.value,l=a.toLowerCase().replace(/\s+/g," ").trim();if(ue(a),(_.length>0||P>0)&&t((0,f.t2)()),""===l)T(b),ie(k);else{const e=(0,p.filter)(b,(e=>e.phoneNumber.toLowerCase().includes(l)));T(e),ie(e.length)}},setStartDate:B,setEndDate:A,searchByPackmans:[{label:"Barchasi",value:null},...W]})}),(0,j.jsx)("div",{className:"lg:tableContainerPadding",children:S?(0,j.jsx)(o.A,{}):0===L.length&&0===_.length?(0,j.jsx)(u.A,{text:e("Mijozlar mavjud emas")}):we?(0,j.jsx)(r.A,{data:_.length>0?_:L,page:"client",currentPage:le,countPage:te,headers:C,Edit:ye,Delete:je,Print:be,type:D.type}):(0,j.jsx)(i.A,{data:_.length>0?_:L,page:"client",currentPage:le,countPage:te,headers:C,Edit:ye,Delete:je,Print:be,type:D.type})})]},"content")}}}]);
//# sourceMappingURL=7410.2bf2da74.chunk.js.map