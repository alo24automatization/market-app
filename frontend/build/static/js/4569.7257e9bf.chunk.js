"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[4569,1181],{77275:(e,t,r)=>{r.d(t,{A:()=>i});r(65043);const i=r.p+"static/media/Excel.3a5a1731280185e0e4ae99ee0a4eebfc.svg"},46521:(e,t,r)=>{r.d(t,{P:()=>o});r(65043);var i=r(33979),a=r(79456),n=(r(72096),r(70579));const s=e=>{var t;let{product:r,currency:s,marketName:c,isShowPrice:l}=e;const{inputRef:o}=(0,i.E)({value:null===r||void 0===r||null===(t=r.productdata)||void 0===t?void 0:t.barcode,options:{background:"#fff",width:"2cm",height:"40cm"}}),{currency:u}=(0,a.d4)((e=>e.currency));return(0,n.jsx)("div",{className:"w-[58mm] break-after-page font-sans h-[40mm] times ",children:(0,n.jsxs)("div",{className:"w-[58mm] rotate-90 mt-20 -ml-0 text-xl",children:[(0,n.jsx)("div",{className:"text-center w-[auto] font-bold text-2xl p-[3px] pb-3 border border-t-0 border-l-0 border-s-0 border-e-0 border-b-1",children:(0,n.jsxs)("span",{children:['"',c,'"']})}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"text-center text-lg p-1",children:[(0,n.jsx)("br",{})," ",(0,n.jsx)("span",{className:"font-bold text-[20px]",children:r.productdata&&r.productdata.name})]}),l&&(0,n.jsx)("div",{className:"text-[27px] font-bold text-center p-1",children:(0,n.jsx)("span",{children:r.price&&("UZS"===s?r.price.sellingpriceuzs.toLocaleString("ru-RU"):r.price.sellingprice.toLocaleString("ru-RU"))+" "+s||""})}),(0,n.jsx)("div",{children:(0,n.jsx)("canvas",{ref:o})}),(0,n.jsx)("div",{className:"flex justify-center p-1"})]})]})})};var c=r(53536);const l=(e,t)=>{let r=[];for(let i=0;i<e;i++)r.push(t);return r},o=e=>{let{countOfCheques:t,productForCheques:r,printedData:i,componentRef:a,currency:o,marketName:u,isShowPrice:d}=e;return(0,n.jsxs)("div",{ref:a,children:[r&&t&&(0,c.map)(r,(e=>(0,c.range)(0,t).map((()=>(0,n.jsx)(s,{currency:o,product:e,marketName:u,isShowPrice:d},(0,c.uniqueId)("barCode")))))),(0,c.map)(i,(e=>(0,n.jsx)("div",{children:(0,c.map)(l(e.numberOfChecks,e.product),(e=>(0,n.jsx)(s,{currency:o,product:e,marketName:u,isShowPrice:d},(0,c.uniqueId)("barCode"))))},(0,c.uniqueId)("barCodeContainer"))))]})}},23237:(e,t,r)=>{r.d(t,{A:()=>s});r(65043);var i=r(77275),a=r(49092),n=r(70579);const s=function(e){let{onClick:t}=e;const{t:r}=(0,a.B)(["common"]);return(0,n.jsxs)("button",{className:"exportButton ",onClick:t,children:[r("Eksport"),(0,n.jsx)("span",{className:"btn-icon bg-white-900 p-[8px]",children:(0,n.jsx)("img",{src:i.A,alt:"excel icon"})})]})}},74837:(e,t,r)=>{r.r(t),r.d(t,{default:()=>y});var i=r(65043),a=r(79456),n=r(30200),s=r(23237),c=r(9762),l=r(12602),o=r(54964),u=r(37424),d=r(18446),p=r(53536),m=r(37919),h=r(49092),f=r(4235),g=r(73734),x=r(93141),v=r(46521),b=r(70579);const y=()=>{const e=(0,a.wA)(),{t:t}=(0,h.B)(["common"]),{market:{_id:r,name:y}}=(0,a.d4)((e=>e.login)),{incomings:w,incomingscount:S,successUpdate:j,successDelete:D,loadingExcel:k}=(0,a.d4)((e=>e.incoming)),{currencyType:C,currency:N}=(0,a.d4)((e=>e.currency)),P=(0,i.useRef)(),A=(0,i.useRef)(),z=(0,x.useReactToPrint)({content:()=>P.current,onBeforeGetContent:()=>(ae(!0),new Promise((e=>{A.current=e,setTimeout((()=>{ae(!1),e()}),2e3)})))}),[E,U]=(0,i.useState)(new Date((new Date).getFullYear(),(new Date).getMonth(),1).toISOString()),[I,B]=(0,i.useState)(new Date((new Date).setHours(23,59,59,0)).toISOString()),[O,R]=(0,i.useState)({name:"",code:"",supplier:""}),[q,L]=(0,i.useState)({name:"",code:"",supplier:""}),[Y,K]=(0,i.useState)(0),[T,F]=(0,i.useState)(10),[M,Z]=(0,i.useState)(!1),[H,J]=(0,i.useState)({filter:"",sort:"",count:0}),[W,_]=(0,i.useState)({}),[Q,G]=(0,i.useState)({}),[V,X]=(0,i.useState)([]),[$,ee]=(0,i.useState)([]),[te,re]=(0,i.useState)([]),[ie,ae]=(0,i.useState)(!1),ne=()=>{V.some((e=>e.pieces===W.pieces&&e.unitprice===W.unitprice&&e.sellingprice===W.sellingprice))?_({}):e((0,m.AH)({market:r,startDate:E,endDate:I,product:{...W}}))},se=(e,t)=>{"beginDay"===t&&U(new Date(e).toISOString()),"endDay"===t&&B(new Date(e).toISOString())},ce=()=>{G({}),Z(!1)},le=(0,i.useCallback)((()=>{e((0,m.qQ)({market:r,beginDay:E,endDay:I,currentPage:Y,countPage:T,search:O}))}),[e,r,E,I,Y,T,O]);(0,i.useEffect)((()=>{(e=>{let t=(0,p.map)(e,(e=>({...e,sellingprice:e.product.price.sellingprice,sellingpriceuzs:e.product.price.sellingpriceuzs})));X(t),ee(t)})(w)}),[w]),(0,i.useEffect)((()=>{le()}),[le,E,I,Y,T,O]),(0,i.useEffect)((()=>{j&&(le(),_({}),e((0,m.KC)()))}),[e,le,j]),(0,i.useEffect)((()=>{D&&(le(),_({}),e((0,m.FT)()))}),[e,le,D]);const oe=[{title:"\u2116"},{title:t("Yetkazuvchi"),filter:"supplier.name",styles:"w-[10%]"},{title:t("Kodi"),filter:"product.productdata.code",styles:"w-[7%]"},{title:t("Nomi"),filter:"product.productdata.name"},{title:t("Soni"),styles:"w-[10%]"},{title:t("Kelish"),styles:"w-[10%]"},{title:t("Jami"),styles:"w-[15%]"},{title:t("Sotish"),styles:"w-[10%]"},{title:t("Cheklar soni"),styles:"w-[10%]"},{title:"",styles:"w-[5%]"}];return(0,i.useEffect)((()=>{ie&&"function"===typeof A.current&&A.current()}),[A.current,ie]),(0,b.jsxs)("div",{className:"grow overflow-auto",children:[k&&(0,b.jsx)("div",{className:"fixed backdrop-blur-[2px] z-[100] left-0 top-0 right-0 bottom-0 bg-white-700 flex flex-col items-center justify-center w-full h-full",children:(0,b.jsx)(f.A,{})}),(0,b.jsx)("div",{className:"mainPadding text-center",children:(0,b.jsx)("p",{children:t("Ro'yxat")})}),(0,b.jsxs)("div",{className:"mainPadding flex items-center justify-between",children:[(0,b.jsx)(s.A,{onClick:()=>{let r="Maxsulotlar-qabul"-(new Date).toLocaleDateString();const i=["\u2116",t("Yetkazuvchi"),t("Kodi"),t("Nomi"),t("Soni"),t("Kelish UZS"),t("Kelish USD"),t("Jami UZS"),t("Jami USD"),t("Sotish UZS"),t("Sotish USD")],a={beginDay:E,endDay:I};e((0,m.FW)(a)).then((e=>{let{error:t,payload:a}=e;if(!t)if((null===a||void 0===a?void 0:a.length)>0){const e=(0,p.map)(a,((e,t)=>{var r,i,a,n,s,c;return{nth:t+1,supplier:(null===(r=e.supplier)||void 0===r?void 0:r.name)||"",code:(null===(i=e.product)||void 0===i||null===(a=i.productdata)||void 0===a?void 0:a.code)||"",name:(null===(n=e.product)||void 0===n||null===(s=n.productdata)||void 0===s?void 0:s.name)||"",count:e.pieces+" "+(null===(c=e.unit)||void 0===c?void 0:c.name)||"",unit:(null===e||void 0===e?void 0:e.unitpriceuzs)||"",unitusd:(null===e||void 0===e?void 0:e.unitprice)||"",all:(null===e||void 0===e?void 0:e.totalpriceuzs)||"",allusd:(null===e||void 0===e?void 0:e.totalprice)||""}}));(0,n.m1)(e,r,i)}else(0,g.lY)("Jadvalda ma'lumot mavjud emas !","warning")}))}}),(0,b.jsxs)("div",{className:"flex gap-[10px]",children:[(0,b.jsx)(c.A,{label:t("dan"),value:new Date(E),onChange:e=>se(e,"beginDay"),maxWidth:"max-w-[9.6875rem]"}),(0,b.jsx)(c.A,{label:t("gacha"),value:new Date(I),onChange:e=>se(e,"endDay"),maxWidth:"max-w-[9.6875rem]"})]}),(0,b.jsx)(o.A,{currentPage:Y,setCurrentPage:K,countPage:T,totalDatas:S})]}),(0,b.jsx)("div",{children:(0,b.jsx)(u.A,{filterBy:["total","code","delivererName","name"],filterByName:e=>{let t=e.target.value.toLowerCase();X([...(0,p.filter)([...$],(e=>{let{product:r}=e;return r.productdata.name.toLowerCase().includes(t)}))]),L({...q,name:t})},filterByTotal:e=>F(e.value),filterByCode:e=>{let t=e.target.value.toLowerCase();X([...(0,p.filter)([...$],(e=>{let{product:r}=e;return r.productdata.code.includes(t)}))]),L({...q,code:t})},filterByCodeAndNameAndCategoryWhenPressEnter:e=>{"Enter"===e.key&&R(q)},filterByDelivererName:e=>{let t=e.target.value.toLowerCase();X([...(0,p.filter)([...$],(e=>e.supplier.name.toLowerCase().includes(t)))]),L({...q,supplier:t})}})}),(0,b.jsx)("div",{className:"tableContainerPadding",children:(0,b.jsx)(d.A,{page:"incomings",headers:oe,data:V,changeNumberHandler:(e,t)=>{const r=te.findIndex((e=>e.product._id===t._id));-1!==r?(""!==e.target.value.trim()?te[r].numberOfChecks=Number(e.target.value):te.splice(r,1),re([...te])):re([...te,{product:{...t,productdata:t.product.productdata,price:t.product.price},numberOfChecks:Number(e.target.value)}])},currentPage:Y,printedData:te,countPage:T,currency:C,editedIncoming:W,Edit:e=>{_(e)},changeHandler:(e,t)=>{let r=Number(e.target.value),i={...W};const a=e=>t===e,s="USD"===C?r:(0,n.Ch)(r,N),c="UZS"===C?r:(0,n.IQ)(r,N);a("pieces")&&(i.pieces=r,i.totalprice=r*i.unitprice,i.totalpriceuzs=r*i.unitpriceuzs),a("unitprice")&&(i.unitprice=s,i.unitpriceuzs=c,i.totalprice=s*i.pieces,i.totalpriceuzs=c*i.pieces),a("sellingprice")&&(i.sellingprice=s,i.sellingpriceuzs=c),_(i)},saveEditIncoming:ne,Delete:e=>(e=>{G(e),Z(!0)})(e),Sort:e=>{if(e===H.filter)switch(H.count){case 1:J({filter:e,sort:"1",count:2}),(0,n.Yc)(V,X,e,1,$);break;case 2:J({filter:e,sort:"",count:0}),(0,n.Yc)(V,X,e,"",$);break;default:J({filter:e,sort:"-1",count:1}),(0,n.Yc)(V,X,e,-1,$)}else J({filter:e,sort:"-1",count:1}),(0,n.Yc)(V,X,e,-1,$)},onKeyUp:e=>{"Enter"===e.key&&ne()},sortItem:H,Print:z})}),(0,b.jsx)(l.A,{body:"approve",isOpen:M,headerText:t("Mahsulotni o`chirishni tasdiqlaysizmi?"),title:t("O`chirilgan mahsulotni tiklashning imkoni mavjud emas!"),approveFunction:()=>{e((0,m.om)({market:r,beginDay:E,endDay:I,product:{...Q}})),Z(!1)},closeModal:ce,toggleModal:ce}),(0,b.jsx)("div",{className:"hidden",children:(0,b.jsx)(v.P,{currency:C,componentRef:P,printedData:te,marketName:y,isShowPrice:!0})})]})}}}]);
//# sourceMappingURL=4569.7257e9bf.chunk.js.map