"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[8294,1181],{66166:(e,s,n)=>{n.d(s,{A:()=>r});n(65043);var t=n(90221),a=n(70579);const r=function(e){let{type:s,onClick:n,active:r}=e;const l={product:{icon:(0,a.jsx)(t.Ua$,{className:"shopIcons"}),bgColor:"bg-[#12B76A]"},selling:{icon:(0,a.jsx)(t.zIN,{className:"shopIcons"}),bgColor:"bg-[#F79009]"},payments:{icon:(0,a.jsx)(t.IY5,{className:"shopIcons"}),bgColor:"bg-[#00B4CC]"},income:{icon:(0,a.jsx)(t.HdM,{className:"shopIcons"}),bgColor:"bg-[#00B4CC]"}};return(0,a.jsx)("button",{onClick:n,className:"".concat(r?"filial-active":l[s].bgColor," shopButton"),children:l[s].icon})}},12344:(e,s,n)=>{n.r(s),n.d(s,{default:()=>g});var t=n(65043),a=n(66166),r=n(79456),l=n(70579);const o=function(e){let{border:s=!1,navbarExpended:n,director:t=null}=e;const a=(0,r.d4)((e=>e.login.user)),o=e=>0===e.indexOf("http://")||0===e.indexOf("https://");return(0,l.jsx)(l.Fragment,{children:s&&t?(0,l.jsx)("div",{className:"flex items-center gap-[1.25rem] p-[1.25rem]",children:(0,l.jsx)("div",{className:"avatar-border rounded-[50%] p-[0.625rem] overflow-hidden",children:(0,l.jsx)("div",{className:"avatar-image flex items-center justify-center w-[50px] h-[50px] rounded-full overflow-hidden",children:t.image&&o(t.image)?(0,l.jsx)("img",{src:t.image,alt:t.firstname,className:"pointer-events-none"}):"".concat(t.firstname[0].toUpperCase()+t.lastname[0].toUpperCase())})})}):(0,l.jsx)("div",{className:"w-full flex items-center gap-[10px]",children:(0,l.jsx)("div",{className:"avatar-image flex items-center justify-center transition-all ease-linear duration-300 w-[50px] h-[50px] rounded-full overflow-hidden shadow-[0_10px_10px_rgba(0,0,0,0.15)]",children:null!==a&&void 0!==a&&a.image&&o(null===a||void 0===a?void 0:a.image)?(0,l.jsx)("img",{src:null===a||void 0===a?void 0:a.image,alt:null===a||void 0===a?void 0:a.firstname,className:"pointer-events-none"}):"".concat((null===a||void 0===a?void 0:a.firstname[0].toUpperCase())+(null===a||void 0===a?void 0:a.lastname[0].toUpperCase()))})})})};var i=n(35475),c=n(72096);const d=e=>{var s,n;let{active:t,market:r}=e;return(0,l.jsx)("section",{children:(0,l.jsxs)("div",{className:"shops_card flex gap-[1.25rem] ".concat(t?"active_shop":""),children:[(0,l.jsx)(o,{border:!0,director:null===r||void 0===r?void 0:r.director}),(0,l.jsxs)("div",{className:"product-cost",children:[(0,l.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,l.jsxs)("p",{className:"product",children:[(0,c.t)("Do'kon")," INN"]}),(0,l.jsx)("p",{className:"product-number",children:null===r||void 0===r?void 0:r.name})]}),(0,l.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,l.jsx)("p",{className:"product",children:(0,c.t)("Direktor")}),(0,l.jsxs)("div",{className:"flex gap-[5px]",children:[(0,l.jsx)("p",{className:"product-number",children:null===r||void 0===r||null===(s=r.director)||void 0===s?void 0:s.firstname}),(0,l.jsx)("p",{className:"product-number",children:null===r||void 0===r||null===(n=r.director)||void 0===n?void 0:n.lastname})]})]}),(0,l.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,l.jsx)("p",{className:"product",children:(0,c.t)("Telefon")}),(0,l.jsx)("p",{className:"product-number",children:null===r||void 0===r?void 0:r.phone})]})]}),(0,l.jsxs)("div",{className:"shop-name flex flex-col w-[13.4375rem]",children:[(0,l.jsx)("div",{className:"shop-title",children:(0,l.jsxs)("p",{children:["INN: ",null===r||void 0===r?void 0:r.inn.toLocaleString("ru-RU")]})}),(0,l.jsxs)("div",{className:"filial-btn",children:[(0,l.jsx)(i.N_,{to:"/dukonlar/hamkorlar/maxsulotlar/".concat(r._id),children:(0,l.jsx)(a.A,{type:"product"})}),(0,l.jsx)(i.N_,{to:"/dukonlar/hamkorlar/hamkormaxsulotlari/".concat(r._id),children:(0,l.jsx)(a.A,{type:"selling"})}),(0,l.jsx)(i.N_,{to:"/dukonlar/hamkorlar/buyurtma",children:(0,l.jsx)(a.A,{type:"payments"})})]})]})]})})};var m=n(47630),u=n(84012),x=n(49092),p=n(12602),h=n(76694),v=n(91466),f=n(37424),j=n(53536);const g=function(){const{t:e}=(0,x.B)(["common"]),s=(0,r.wA)(),{marketByInn:n,connections:a,sendingRequests:o,incomingRequests:i,countOfNewRequests:c}=(0,r.d4)((e=>e.connections)),{market:g}=(0,r.d4)((e=>e.login)),[N,k]=(0,t.useState)(!1),[b,C]=(0,t.useState)(""),[y,w]=(0,t.useState)("requestconnection"),[q,A]=(0,t.useState)([]),[I,_]=(0,t.useState)([]),[B,R]=(0,t.useState)([]),L=e=>{s((0,v.xL)({connection:e})).then((e=>{let{error:n}=e;n||(s((0,v.y3)()),s((0,v.cX)()),s((0,v.WC)()))}))};return(0,t.useEffect)((()=>{s((0,v.cX)()),s((0,v.y3)()),s((0,v.Eo)()),s((0,v.WC)())}),[s]),(0,t.useEffect)((()=>{A(a)}),[a]),(0,t.useEffect)((()=>{_(o)}),[o]),(0,t.useEffect)((()=>{R(i)}),[i]),(0,l.jsxs)("div",{children:[(0,l.jsx)(p.A,{body:y,marketByInn:n,toggleModal:()=>k(!N),approveFunction:()=>{const e={firstMarket:g._id,secondMarket:n._id};s((0,v.hn)(e)).then((e=>{let{error:n}=e;n||((0,v.OP)(),k(!1),C(""),s((0,v.Eo)()))}))},closeModal:()=>{k(!1),(0,v.OP)()},isOpen:N,sendingRequests:I,handleDeleteRequest:e=>{s((0,v.iF)({connectionId:e})).then((e=>{let{error:n}=e;n||(s((0,v.Eo)()),s((0,v.y3)()))}))},incomingRequests:B,handleAcceptRequest:e=>{L({...e,accept:!0,rejected:!1,request:!1})},handleRejectRequest:e=>{L({...e,accept:!1,rejected:!0,request:!1})}}),(0,l.jsx)("form",{className:"flex gap-[1.25rem] bg-background flex-col mainPadding transition ease-linear duration-200",children:(0,l.jsxs)("div",{className:"supplier-style",children:[(0,l.jsx)(m.A,{value:b,onChange:e=>{let s=e.target.value;h.C.test(s)&&C(s)},label:e("Do'kon INN raqami"),placeholder:"".concat(e("misol"),": 123 456 789"),border:!0}),(0,l.jsxs)("div",{className:"flex gap-[1.25rem] grow",children:[(0,l.jsx)(u.A,{onClick:e=>{e.preventDefault(),s((0,v.V8)({inn:b})).then((e=>{let{error:s}=e;s||(k(!0),w("requestconnection"))}))},add:!0,text:e("Yangi do'kon qo'shish")}),(0,l.jsx)(u.A,{edit:!0,text:e("Yuborilganlar"),onClick:e=>{e.preventDefault(),k(!0),w("sendingApplication")}}),(0,l.jsx)(u.A,{count:c.count,bell:!0,text:e("So'rovlar"),onClick:e=>{e.preventDefault(),k(!0),w("requestApplication")}})]})]})}),(0,l.jsx)("div",{className:"mainPadding",children:(0,l.jsx)("p",{className:"supplier-title text-center",children:e("Hamkor do'konlar")})}),(0,l.jsx)(f.A,{filterBy:["marketName","inn","directorName","lastname"],filterByMarketName:e=>{const s=e.target.value.toLowerCase(),n=(0,j.filter)(a,(e=>e.name.toLowerCase().includes(s)));A(n)},filterByMarketInn:e=>{const s=e.target.value.toLowerCase(),n=(0,j.filter)(a,(e=>e.inn.toString().toLowerCase().includes(s)));A(n)},filterByDirectorName:e=>{const s=e.target.value.toLowerCase(),n=(0,j.filter)(a,(e=>e.director.firstname.toLowerCase().includes(s)||e.director.lastname.toLowerCase().includes(s)));A(n)}}),(0,l.jsx)("div",{className:"mainPadding",children:q&&(0,j.map)(q,(e=>(0,l.jsx)("div",{className:"pb-4",children:(0,l.jsx)(d,{market:e})},(0,j.uniqueId)("markets"))))})]})}}}]);
//# sourceMappingURL=8294.51300d92.chunk.js.map