"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[9990,1181],{70126:(e,t,a)=>{a.d(t,{A:()=>v});var s=a(90221),n=a(26441),l=(a(65043),a(79456)),i=a(2364),o=a(57290),r=a(70579);const c=e=>(0,r.jsx)(o.c.DropdownIndicator,{...e,children:(0,r.jsx)(s.QDT,{size:"0.625rem"})}),d={control:e=>({...e,borderTopRightRadius:".125rem",borderBottomRightRadius:".125rem",borderTopLeftRadius:"0",borderBottomLeftRadius:"0",fontSize:"0.75rem",fontWeight:"400",padding:"0.375rem 0.3125rem",color:"#071F45",outline:"none",border:"none",boxShadow:"none",cursor:"pointer",height:"100%",backgroundColor:"#F79009",minHeight:"100%","&:hover":{backgroundColor:"#DC6803"}}),container:e=>({...e,height:"100%",position:"absolute",right:0,width:"3rem",top:0,bottom:0}),option:(e,t)=>{let{isFocused:a,isSelected:s}=t;return{...e,fontSize:".75rem",fontWeight:"400",color:s||a?"#ffffff":"#071F45",backgroundColor:s?"#0090A3":a?"#00B4CC":"#ffffff",transition:"all 0.2s ease",overflow:"hidden",cursor:"pointer",textAlign:"center"}},menu:e=>({...e,overflow:"hidden"}),singleValue:e=>({...e,fontSize:".75rem",fontWeight:"400",color:"#ffffff",margin:0,textAlign:"center"}),valueContainer:e=>({...e,padding:0}),indicatorsContainer:e=>({...e}),dropdownIndicator:e=>({...e,padding:0,color:"#ffffff"})};var u=a(72096);const m=function(e){let{value:t,onChange:a,option:s,onSelect:n}=e;const{currencyType:o}=(0,l.d4)((e=>e.currency)),m=[{value:o,label:o},{value:"%",label:"%"}];return(0,r.jsxs)("div",{className:"flex w-[11.75rem] border border-warning-500 rounded-[0.25rem] outline outline-transparent outline-0 focus-within:outline-2 focus-within:outline-warning-500 transition-all ease-in-out duration-100 relative",children:[(0,r.jsx)("input",{className:"w-[8.6875rem] placeholder-blue-200 py-[0.3125rem] px-[.3125rem] rounded-l-[0.25rem] outline-0 text-sm text-right transition-all ease-in-out duration-100",placeholder:"".concat((0,u.t)("misol"),": 100 000 000"),type:"number",value:t,onChange:e=>{a(e.target.value)},onWheel:e=>e.target.blur(),min:0}),(0,r.jsx)(i.Ay,{onChange:n,styles:d,isSearchable:!1,value:s,options:m,components:{IndicatorSeparator:()=>null,DropdownIndicator:c}})]})},h=e=>{let{value:t,onChange:a,option:s,onSelect:n}=e;return(0,r.jsxs)("div",{className:"flex justify-between w-full items-center mb-[1rem]",children:[(0,r.jsxs)("div",{className:"text-black-700 text-[0.875rem]",children:[(0,u.t)("Chegirma")," :"]}),(0,r.jsx)(m,{onChange:a,onSelect:n,value:t,option:s})]})};var p=a(66899);const x=e=>{let{onClick:t}=e;return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("button",{onClick:t,className:"exitbtn",children:(0,r.jsx)(s.FyX,{size:"0.75rem"})})})};const g=function(e){let{mix:t,value:a,onChange:s,label:n,onClose:l,keyInput:i,placeholder:o,type:c,disabled:d}=e;return(0,r.jsxs)("li",{className:"custom-payment-ul-li",children:[(0,r.jsxs)("span",{className:"custom-payment-text-style",children:[n," :"]}),(0,r.jsxs)("div",{className:"flex items-center w-[11.75rem] gap-[0.625rem]",children:[(0,r.jsx)(p.A,{placeholder:o||"".concat((0,u.t)("misol"),": 100 000 000"),type:c||"number",value:a,disabled:d,onChange:e=>{s(e.target.value,i)}}),t&&(0,r.jsx)(x,{onClick:()=>l(i)})]})]})};var f=a(73216),y=a(9762);const v=function(e){let{returned:t,active:a,togglePaymentModal:i,hasCalendar:o,hiddenDebt:c,type:d="cash",showPayEndDate:m,cash:p="",card:x="",transfer:v="",hiddenMixed:b,discount:j,hasDiscount:k,hasDiscountBtn:C,debt:N,allPayment:S,paid:P=0,client:w="",onChange:A,onClose:z,changePaymentType:D,discountSelectOption:T,handleClickDiscountBtn:B,handleChangeDiscountSelectOption:E,handleChangeDiscount:I,handleClickPay:q,clickdelay:_,disableInputsCashCard:R,payEndDate:W,handlePayEndDateChange:F,disablePayButton:M}=e;const L=(0,f.zy)(),O=()=>{switch(d){case"card":return(0,r.jsx)(g,{value:x,keyInput:d,onChange:A,onClose:z,disabled:R,label:(0,u.t)("Plastik")},"sale-card1");case"transfer":return(0,r.jsx)(g,{value:v,keyInput:d,onChange:A,onClose:z,disabled:R,label:(0,u.t)("O`tkazma")},"sale-transfer");case"mixed":return[{label:(0,u.t)("Naqd"),key:"cash",value:p},{label:(0,u.t)("Plastik"),key:"card",value:x},{label:(0,u.t)("O`tkazma"),key:"transfer",value:v}].map((e=>(0,r.jsx)(g,{value:e.value,keyInput:e.key,onChange:A,onClose:z,label:(0,u.t)(e.label)},"sale-".concat(e.key))));default:return(0,r.jsx)(g,{disabled:R,value:p,onChange:A,keyInput:d,onClose:z,label:(0,u.t)("Naqd")},"sale-cash")}},{currencyType:U}=(0,l.d4)((e=>e.currency));return(0,r.jsxs)("section",{className:"fixed transition-all left-0 top-0 right-0 bottom-0 overflow-hidden duration-200 ease-out bg-black-300 backdrop-blur-[3px] z-20 ".concat(a?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"),onClick:i,children:[(0,r.jsx)("h3",{className:"text-white-900 text-lg leading-[1.875rem absolute top-[50%] left-[35%] -translate-x-[50%]",children:(0,u.t)("")}),(0,r.jsxs)("div",{className:"customerPay-head-style transition-all duration-200 ease-linear h-full overflow-auto absolute top-0 bottom-0 right-0 ".concat(a?"translate-x-0":"translate-x-full"),onClick:e=>e.stopPropagation(),autoFocus:!0,children:[(0,r.jsxs)("div",{className:"top-payment w-full",children:[w&&(0,r.jsxs)("div",{className:"customer-head-icon",children:[(0,r.jsxs)("div",{className:"flex items-center custom-payment-text-style",children:[(0,r.jsx)(s.uSr,{className:"mr-[0.75rem]"}),(0,r.jsxs)("span",{children:[(0,u.t)("Mijoz")," : "]})]}),(0,r.jsx)("h3",{className:"text-[0.875rem]",children:w})]}),(0,r.jsxs)("div",{className:"mb-[1.25rem] font-medium text-[1.25rem] text-center leading-[23.44px]",children:[null===S||void 0===S?void 0:S.toLocaleString("ru-Ru")," ",U]}),(0,r.jsxs)("ul",{className:"w-full pb-[1.25rem]",children:[!t&&O(),(L.pathname.includes("/kassa/debts")||L.pathname.includes("/qarzdorlar")||L.pathname.includes("/maxsulotlar/qabul/qabulqilish")||L.pathname.includes("/maxsulotlar/qabul/qabullar"))&&O(),k&&(0,r.jsx)(h,{value:j,onChange:I,option:T,onSelect:E}),m&&(0,r.jsxs)("li",{className:"custom-payment-ul-li justify-between flex gap-x-5",children:[(0,r.jsxs)("span",{className:"custom-payment-text-style",children:[(0,u.t)("To'lov sanasi"),":"]}),(0,r.jsx)(y.A,{onChange:F,value:W,placeholder:"To'lov sanasi",disableIcon:!0})]}),c?null:(0,r.jsxs)("li",{className:"custom-payment-ul-li",children:[(0,r.jsxs)("span",{className:"custom-payment-text-style",children:[(0,u.t)("Qarzlar")," :"," "]}),(0,r.jsxs)("h3",{className:"text-error-500 text-[1rem]",children:[N.toLocaleString("ru-Ru")," ",U]})]}),(0,r.jsxs)("li",{className:"custom-payment-ul-li",children:[(0,r.jsxs)("span",{className:"custom-payment-text-style",children:[S<0?(0,u.t)("Qaytarilayotgan"):(0,u.t)("To`lanayotgan")," ",":"," "]}),(0,r.jsxs)("h3",{className:"text-[1rem] text-loginButton",children:[null===P||void 0===P?void 0:P.toLocaleString("ru-Ru")," ",U]})]})]})]}),(0,r.jsxs)("div",{className:"bottom-payment w-full flex flex-col gap-[1.25rem] border-t-[1px] border-black-200 pt-[1.25rem]",children:[(0,r.jsxs)("div",{className:"custom-paymet-btn",children:[(0,r.jsx)(n.Gv,{text:(0,u.t)("Naqd"),type:"cash",active:"cash"===d,onClick:D}),(0,r.jsx)(n.Gv,{text:(0,u.t)("Plastik"),type:"card",active:"card"===d,onClick:D}),(0,r.jsx)(n.Gv,{text:(0,u.t)("O'tkazma"),type:"transfer",active:"transfer"===d,onClick:D}),!t||b&&(0,r.jsx)(n.Gv,{text:(0,u.t)("Aralash"),type:"mixed",active:"mixed"===d,onClick:D}),L.pathname.includes("/kassa/debts")&&(0,r.jsx)(n.Gv,{text:(0,u.t)("Aralash"),type:"mixed",active:"mixed"===d,onClick:D})]}),!t&&C&&(0,r.jsx)(n.eV,{text:(0,u.t)("Chegirma"),onClick:B}),(0,r.jsx)(n.p2,{text:(0,u.t)("To'lash"),disablePayButton:_,loading:_,onClick:_?()=>console.log("wait"):q})]})]})]})}},87384:(e,t,a)=>{a.r(t),a.d(t,{default:()=>C});var s=a(65043),n=a(84012),l=a(18446),i=a(47630),o=a(54964),r=a(37424),c=a(79456),d=a(12602),u=a(4235),m=a(78054),h=a(71605),p=a(73734),x=a(49976),g=a(30200),f=a(49092),y=a(53536),v=a(3297),b=a(38069),j=a(70126),k=a(70579);const C=function(){const{t:e}=(0,f.B)(["common"]),t=(0,c.wA)(),{market:a,user:C}=(0,c.d4)((e=>e.login)),{errorPackmans:N,packmans:S,successAddPackman:P,successUpdatePackman:w,successDeletePackman:A,loading:z,searchedPackmans:D,total:T,totalSearched:B}=(0,c.d4)((e=>e.packmans)),E=[{styles:"w-[10%] text-start",filter:"",title:"\u2116"},{styles:"w-[80%] text-start",filter:"",title:e("Agentlar")},{styles:"w-[100%] text-start",filter:"",title:e("Umumiy savdo")},{styles:"w-[100%] text-start",filter:"",title:e("Agent ulushi")},{styles:"w-[10%]",filter:"",title:" "}],I=[{title:"\u2116"},{title:e("Sana")},{title:e("Mijoz")},{title:e("Telefon")},{title:e("Jami")},{title:e("Komissiya")},{title:e("To'langan")},{title:"Komissiya to'langan sana"}],[q,_]=(0,s.useState)([]),[R,W]=(0,s.useState)(""),[F,M]=(0,s.useState)(""),[L,O]=(0,s.useState)(""),[U,Z]=(0,s.useState)(""),[G,K]=(0,s.useState)(null),[Q,Y]=(0,s.useState)(!1),[J,V]=(0,s.useState)(!1),[X,H]=(0,s.useState)("10"),[$,ee]=(0,s.useState)(0),[te,ae]=(0,s.useState)(T),[se,ne]=(0,s.useState)(""),[le,ie]=(0,s.useState)(window.innerWidth<=768),[oe,re]=(0,s.useState)([]),[ce,de]=(0,s.useState)(!1),[ue,me]=(0,s.useState)(!1),[he,pe]=(0,s.useState)("cash"),[xe,ge]=(0,s.useState)(""),[fe,ye]=(0,s.useState)(""),[ve,be]=(0,s.useState)(""),[je,ke]=(0,s.useState)(""),[Ce,Ne]=(0,s.useState)(0),[Se,Pe]=(0,s.useState)(!1),[we,Ae]=(0,s.useState)(0);(0,s.useEffect)((()=>{const e=()=>{ie(window.innerWidth<=768)};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[]);const ze=()=>Y(!Q),De=e=>{Z(e),M(e.name),O(e.commission),V(!0)},Te=e=>{K(e),ze()},Be=e=>{de(!0),re(e)},Ee=e=>{me(!0),de(!1)},Ie=()=>{Y(!1),K(null)},qe=e=>{e&&e.preventDefault(),M(""),V(!1),O(""),K(null),Z(null),ke(0),Ne(0),Ae(0),ye(0),ye(0),ge(0),ke(0),Pe(!1)},_e=e=>{let{value:t}=e;H(t),ee(0)},Re=(e,t,a)=>(null===e||void 0===e?void 0:e.length)>0&&(null===e||void 0===e?void 0:e.reduce(((e,s)=>((e,t,a)=>e+a)(e,s[t],s[a])),0))||0,[We,Fe]=(0,s.useState)([]),[Me,Le]=(0,s.useState)(null);(0,s.useEffect)((()=>{let e=0;for(let t of We)e+=Re(t.saleconnector.products,"totalprice","totalpriceuzs")*t.commission/100;Ae(e),Ne(e),ge(e),Ne(e)}),[We]);const[Oe,Ue]=(0,s.useState)(!1),Ze=e=>{me(e?!ue:e),pe("cash"),qe()};return(0,s.useEffect)((()=>{N&&((0,p.lY)(N,"error"),t((0,x.Ev)())),P&&((0,p.JS)(),t((0,x.WY)()),qe()),w&&((0,p.Nb)(),t((0,x.Uf)()),Z(""),V(!1),qe()),A&&((0,p.RC)(),t((0,x.Ag)()),qe())}),[t,N,P,w,A]),(0,s.useEffect)((()=>{const e={currentPage:$,countPage:X,search:{name:se.replace(/\s+/g," ").trim()}};t((0,x.Zd)(e))}),[t,X,$]),(0,s.useEffect)((()=>{_(S)}),[S]),(0,s.useEffect)((()=>{ae(T)}),[T]),(0,s.useEffect)((()=>{W(D)}),[D]),(0,k.jsxs)(h.P.section,{initial:"collapsed",animate:"open",exit:"collapsed",variants:{open:{opacity:1,height:"auto"},collapsed:{opacity:0,height:0}},transition:{duration:.8,ease:[.04,.62,.23,.98]},children:[(0,k.jsx)(d.A,{headerText:"".concat(G&&G.name," ").concat(e("ismli agentni o'chirishni tasdiqlaysizmi?")),title:e("O'chirilgan agentni tiklashning imkoni mavjud emas!"),toggleModal:ze,body:"approve",approveFunction:()=>{const e={_id:G._id,currentPage:$,countPage:X,search:{name:se.replace(/\s+/g," ").trim()}};t((0,x.ft)(e)),Ie()},closeModal:Ie,isOpen:Q}),(0,k.jsxs)("form",{className:"sale-deliver-form ps-[20px] mt-[40px] flex lg:flex-nowrap flex-wrap ".concat(J&&"stickyForm"),children:[(0,k.jsx)(i.A,{onChange:e=>{M(e.target.value)},value:F,label:e("Agentning ismi"),placeholder:e("misol: Anvar"),maxWidth:"w-[30.75rem]",type:"string"}),(0,k.jsx)(i.A,{onChange:e=>O(e.target.value),value:L,label:e("Agentning komissiyasi"),placeholder:e("misol: 5%"),maxWidth:"w-[10.75rem]",type:"number"}),(0,k.jsxs)("div",{className:"flex gap-[1.25rem] grow items-end",children:[(0,k.jsx)(n.A,{add:!J,edit:J,text:e(J?"Saqlash":"Yangi agent qo`shish"),onClick:J?a=>{a.preventDefault();const{failed:s,message:n}=(0,g.py)([{value:F,message:e("Agent ismi")}]);if(s)(0,p.EB)(n);else{const e={name:F,_id:U._id,currentPage:$,countPage:X,commission:L,search:{name:se.replace(/\s+/g," ").trim()},market:U.market};t((0,x.bQ)(e))}}:a=>{a.preventDefault();const{failed:s,message:n}=(0,g.py)([{value:F,message:e("Agent ismi")}]);if(s)(0,p.EB)(n);else{const e={name:F,currentPage:$,countPage:X,commission:L,search:{name:se.replace(/\s+/g," ").trim()}};t((0,x.hX)(e)),M(""),O("")}}}),(0,k.jsx)(n.A,{text:e("Tozalash"),onClick:qe})]})]}),(0,k.jsxs)("div",{className:"flex ps-[10px] items-center ",children:[(0,k.jsx)(b.A,{onSelect:_e},"total_1"),(0,k.jsx)(r.A,{filterBy:["total","name"],filterByTotal:_e,filterByName:e=>{let a=e.target.value;ne(a);let s=a.toLowerCase().replace(/\s+/g," ").trim();if((R.length>0||B>0)&&t((0,x.pR)()),""===s)_(S),ae(T);else{const e=(0,y.filter)(S,(e=>e.name.toLowerCase().includes(s)));_(e),ae(e.length)}},searchByName:se,filterByCodeAndNameAndCategoryWhenPressEnter:e=>{if("Enter"===e.key){const e={currentPage:$,countPage:X,search:{name:se.replace(/\s+/g," ").trim()}};t((0,x.Wg)(e))}}})]}),(0,k.jsx)("div",{className:"lg:tableContainerPadding",children:z?(0,k.jsx)(u.A,{}):0===q.length?(0,k.jsx)(m.A,{text:"Agentlar mavjud emas"}):le?(0,k.jsx)(v.A,{page:"packman",currentPage:$,countPage:X,showClients:Be,data:R.length>0?R:q,headers:E,Delete:Te,Edit:De}):(0,k.jsx)(l.A,{page:"packman",currentPage:$,countPage:X,data:R.length>0?R:q,headers:E,Delete:Te,showClients:Be,Edit:De})}),(0,k.jsx)("div",{className:"flex justify-center mt-[30px] mb-[30px]",children:(0!==te||0!==B)&&(0,k.jsx)(o.A,{countPage:Number(X),totalDatas:B||te,setCurrentPage:ee,currentPage:$})}),(0,k.jsx)(j.A,{returned:!1,hiddenDebt:!0,type:he,active:ue,togglePaymentModal:Ze,changePaymentType:e=>{if(he!==e)switch(pe(e),e){case"cash":ge(Ce),ye(""),be(""),ke(""),Ae(Ce);break;case"card":ye(Ce),ge(""),be(""),ke(""),Ae(Ce);break;case"transfer":ke(Ce),ge(""),ye(""),Ae(Ce);break;default:ge(""),ye(""),ke(""),Ae(0)}},onChange:()=>{},disableInputsCashCard:!0,client:null,allPayment:Ce,card:fe,cash:xe,debt:"",hasDiscountBtn:!1,clickdelay:Oe,discount:"",transfer:je,paid:we,handleClickPay:()=>{Pe(!0)}}),(0,k.jsx)(d.A,{headerText:"To'lovni amalga oshirishni tasdiqlaysizmi?",title:"To'lovni amalga oshirgach bu ma`lumotlarni o'zgaritirib bo'lmaydi!",isOpen:Se,body:"complete",toggleModal:qe,approveFunction:()=>{Pe(!1),Ue(!0);const e={payment:{totalprice:0,totalpriceuzs:Number(Ce),type:he,cash:0,cashuzs:Number(xe),card:0,carduzs:Number(fe),transfer:Number(ve),transferuzs:Number(je),discount:0,discountuzs:0,packman:Me,packman_saleconnectors:We},market:a,user:C};t((0,x.KM)(e)).then((e=>{let{payload:a}=e;setTimeout((()=>{Ze(),Ue(!1),Fe([]);const e={currentPage:$,countPage:X,search:{name:se.replace(/\s+/g," ").trim()}};t((0,x.Zd)(e))}),500)}))}}),(0,k.jsxs)(d.A,{body:"packmanProfitClients",isOpen:ce,closeModal:()=>{de(!1),qe(),Fe([])},disablePayButton:0===We.length,payDebt:Ee,children:[" ",(0,k.jsx)(l.A,{page:"packmanProfitClients",hiddenPayButton:!0,changeCheckbox:(e,t)=>{Le(e),We.some((e=>e.saleconnector._id===t._id))?Fe((e=>e.filter((e=>e.saleconnector._id!==t._id)))):Fe((a=>[...a,{...e.clients.find((e=>e.saleconnector._id===t._id)),commission:e.commission}]))},selectedSale:We,hiddenInfoButton:!0,headers:I,data:oe,currentPage:$,countPage:10,currency:"UZS",type:"",Pay:Ee,reports:!0,Print:()=>{},Sort:null,sortItem:null,Edit:()=>{},totalDebt:0}),(0,k.jsxs)("ul",{className:"p-2 space-y-1 ",children:[(0,k.jsxs)("li",{className:"flex items-center gap-x-2",children:[(0,k.jsx)("span",{className:"font-semibold ",children:"Umumiy savdo:"}),(0,k.jsxs)("span",{className:"font-semibold ",children:[(()=>{var e;return null===oe||void 0===oe||null===(e=oe.clients)||void 0===e?void 0:e.map((e=>Re(e.saleconnector.products,"totalprice","totalpriceuzs"))).reduce(((e,t)=>e+t),0)})()," UZS"]})]}),(0,k.jsxs)("li",{className:"flex items-center gap-x-2",children:[(0,k.jsx)("span",{className:"font-semibold ",children:"Komissiya:"}),(0,k.jsxs)("span",{className:"font-semibold ",children:[(()=>{var e;return(null===oe||void 0===oe||null===(e=oe.clients)||void 0===e?void 0:e.map((e=>Re(e.saleconnector.products,"totalprice","totalpriceuzs"))).reduce(((e,t)=>e+t),0))*(null===oe||void 0===oe?void 0:oe.commission)/100})()," UZS"]})]}),(0,k.jsxs)("li",{className:"flex items-center gap-x-2",children:[(0,k.jsx)("span",{className:"font-semibold ",children:"To'langan:"}),(0,k.jsxs)("span",{className:"font-semibold ",children:[(()=>{var e;return null===oe||void 0===oe||null===(e=oe.payments)||void 0===e?void 0:e.reduce(((e,t)=>e+t.paymentuzs),0)})()," UZS"]})]}),(0,k.jsxs)("li",{className:"flex items-center gap-x-2",children:[(0,k.jsx)("span",{className:"font-semibold ",children:"To'lanmagan:"}),(0,k.jsxs)("span",{className:"font-semibold ",children:[(()=>{var e;return(null===oe||void 0===oe?void 0:oe.commissionProfit)-(null===oe||void 0===oe||null===(e=oe.payments)||void 0===e?void 0:e.reduce(((e,t)=>e+t.paymentuzs),0))})()," UZS"]})]})]})]})]},"content")}}}]);
//# sourceMappingURL=9990.ed969091.chunk.js.map