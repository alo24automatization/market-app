"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[9990,1181],{70126:(e,t,a)=>{a.d(t,{A:()=>y});var s=a(90221),n=a(26441),l=(a(65043),a(79456)),i=a(2364),o=a(57290),r=a(70579);const c=e=>(0,r.jsx)(o.c.DropdownIndicator,{...e,children:(0,r.jsx)(s.QDT,{size:"0.625rem"})}),d={control:e=>({...e,borderTopRightRadius:".125rem",borderBottomRightRadius:".125rem",borderTopLeftRadius:"0",borderBottomLeftRadius:"0",fontSize:"0.75rem",fontWeight:"400",padding:"0.375rem 0.3125rem",color:"#071F45",outline:"none",border:"none",boxShadow:"none",cursor:"pointer",height:"100%",backgroundColor:"#F79009",minHeight:"100%","&:hover":{backgroundColor:"#DC6803"}}),container:e=>({...e,height:"100%",position:"absolute",right:0,width:"3rem",top:0,bottom:0}),option:(e,t)=>{let{isFocused:a,isSelected:s}=t;return{...e,fontSize:".75rem",fontWeight:"400",color:s||a?"#ffffff":"#071F45",backgroundColor:s?"#0090A3":a?"#00B4CC":"#ffffff",transition:"all 0.2s ease",overflow:"hidden",cursor:"pointer",textAlign:"center"}},menu:e=>({...e,overflow:"hidden"}),singleValue:e=>({...e,fontSize:".75rem",fontWeight:"400",color:"#ffffff",margin:0,textAlign:"center"}),valueContainer:e=>({...e,padding:0}),indicatorsContainer:e=>({...e}),dropdownIndicator:e=>({...e,padding:0,color:"#ffffff"})};var u=a(72096);const m=function(e){let{value:t,onChange:a,option:s,onSelect:n}=e;const{currencyType:o}=(0,l.d4)((e=>e.currency)),m=[{value:o,label:o},{value:"%",label:"%"}];return(0,r.jsxs)("div",{className:"flex w-[11.75rem] border border-warning-500 rounded-[0.25rem] outline outline-transparent outline-0 focus-within:outline-2 focus-within:outline-warning-500 transition-all ease-in-out duration-100 relative",children:[(0,r.jsx)("input",{className:"w-[8.6875rem] placeholder-blue-200 py-[0.3125rem] px-[.3125rem] rounded-l-[0.25rem] outline-0 text-sm text-right transition-all ease-in-out duration-100",placeholder:"".concat((0,u.t)("misol"),": 100 000 000"),type:"number",value:t,onChange:e=>{a(e.target.value)},onWheel:e=>e.target.blur(),min:0}),(0,r.jsx)(i.Ay,{onChange:n,styles:d,isSearchable:!1,value:s,options:m,components:{IndicatorSeparator:()=>null,DropdownIndicator:c}})]})},h=e=>{let{value:t,onChange:a,option:s,onSelect:n}=e;return(0,r.jsxs)("div",{className:"flex justify-between w-full items-center mb-[1rem]",children:[(0,r.jsxs)("div",{className:"text-black-700 text-[0.875rem]",children:[(0,u.t)("Chegirma")," :"]}),(0,r.jsx)(m,{onChange:a,onSelect:n,value:t,option:s})]})};var p=a(66899);const x=e=>{let{onClick:t}=e;return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("button",{onClick:t,className:"exitbtn",children:(0,r.jsx)(s.FyX,{size:"0.75rem"})})})};const g=function(e){let{mix:t,value:a,onChange:s,label:n,onClose:l,keyInput:i,placeholder:o,type:c,disabled:d}=e;return(0,r.jsxs)("li",{className:"custom-payment-ul-li",children:[(0,r.jsxs)("span",{className:"custom-payment-text-style",children:[n," :"]}),(0,r.jsxs)("div",{className:"flex items-center w-[11.75rem] gap-[0.625rem]",children:[(0,r.jsx)(p.A,{placeholder:o||"".concat((0,u.t)("misol"),": 100 000 000"),type:c||"number",value:a,disabled:d,onChange:e=>{s(e.target.value,i)}}),t&&(0,r.jsx)(x,{onClick:()=>l(i)})]})]})};var f=a(73216),v=a(9762);const y=function(e){let{returned:t,active:a,togglePaymentModal:i,hasCalendar:o,hiddenDebt:c,type:d="cash",showPayEndDate:m,cash:p="",card:x="",transfer:y="",hiddenMixed:b,discount:j,hasDiscount:C,hasDiscountBtn:k,debt:N,allPayment:S,paid:P=0,client:w="",onChange:A,onClose:z,changePaymentType:D,discountSelectOption:T,handleClickDiscountBtn:B,handleChangeDiscountSelectOption:E,handleChangeDiscount:R,handleClickPay:I,clickdelay:q,disableInputsCashCard:L,payEndDate:O,handlePayEndDateChange:_,disablePayButton:M}=e;const W=(0,f.zy)(),F=()=>{switch(d){case"card":return(0,r.jsx)(g,{value:x,keyInput:d,onChange:A,onClose:z,disabled:L,label:(0,u.t)("Plastik")},"sale-card1");case"transfer":return(0,r.jsx)(g,{value:y,keyInput:d,onChange:A,onClose:z,disabled:L,label:(0,u.t)("O`tkazma")},"sale-transfer");case"mixed":return[{label:(0,u.t)("Naqd"),key:"cash",value:p},{label:(0,u.t)("Plastik"),key:"card",value:x},{label:(0,u.t)("O`tkazma"),key:"transfer",value:y}].map((e=>(0,r.jsx)(g,{value:e.value,keyInput:e.key,onChange:A,onClose:z,label:(0,u.t)(e.label)},"sale-".concat(e.key))));default:return(0,r.jsx)(g,{disabled:L,value:p,onChange:A,keyInput:d,onClose:z,label:(0,u.t)("Naqd")},"sale-cash")}},{currencyType:U}=(0,l.d4)((e=>e.currency));return(0,r.jsxs)("section",{className:"fixed transition-all left-0 top-0 right-0 bottom-0 overflow-hidden duration-200 ease-out bg-black-300 backdrop-blur-[3px] z-20 ".concat(a?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"),onClick:i,children:[(0,r.jsx)("h3",{className:"text-white-900 text-lg leading-[1.875rem absolute top-[50%] left-[35%] -translate-x-[50%]",children:(0,u.t)("")}),(0,r.jsxs)("div",{className:"customerPay-head-style transition-all duration-200 ease-linear h-full overflow-auto absolute top-0 bottom-0 right-0 ".concat(a?"translate-x-0":"translate-x-full"),onClick:e=>e.stopPropagation(),autoFocus:!0,children:[(0,r.jsxs)("div",{className:"top-payment w-full",children:[w&&(0,r.jsxs)("div",{className:"customer-head-icon",children:[(0,r.jsxs)("div",{className:"flex items-center custom-payment-text-style",children:[(0,r.jsx)(s.uSr,{className:"mr-[0.75rem]"}),(0,r.jsxs)("span",{children:[(0,u.t)("Mijoz")," : "]})]}),(0,r.jsx)("h3",{className:"text-[0.875rem]",children:w})]}),(0,r.jsxs)("div",{className:"mb-[1.25rem] font-medium text-[1.25rem] text-center leading-[23.44px]",children:[null===S||void 0===S?void 0:S.toLocaleString("ru-Ru")," ",U]}),(0,r.jsxs)("ul",{className:"w-full pb-[1.25rem]",children:[!t&&F(),(W.pathname.includes("/kassa/debts")||W.pathname.includes("/qarzdorlar")||W.pathname.includes("/maxsulotlar/qabul/qabulqilish")||W.pathname.includes("/maxsulotlar/qabul/qabullar"))&&F(),C&&(0,r.jsx)(h,{value:j,onChange:R,option:T,onSelect:E}),m&&(0,r.jsxs)("li",{className:"custom-payment-ul-li justify-between flex gap-x-5",children:[(0,r.jsxs)("span",{className:"custom-payment-text-style",children:[(0,u.t)("To'lov sanasi"),":"]}),(0,r.jsx)(v.A,{onChange:_,value:O,placeholder:"To'lov sanasi",disableIcon:!0})]}),c?null:(0,r.jsxs)("li",{className:"custom-payment-ul-li",children:[(0,r.jsxs)("span",{className:"custom-payment-text-style",children:[(0,u.t)("Qarzlar")," :"," "]}),(0,r.jsxs)("h3",{className:"text-error-500 text-[1rem]",children:[N.toLocaleString("ru-Ru")," ",U]})]}),(0,r.jsxs)("li",{className:"custom-payment-ul-li",children:[(0,r.jsxs)("span",{className:"custom-payment-text-style",children:[S<0?(0,u.t)("Qaytarilayotgan"):(0,u.t)("To`lanayotgan")," ",":"," "]}),(0,r.jsxs)("h3",{className:"text-[1rem] text-loginButton",children:[null===P||void 0===P?void 0:P.toLocaleString("ru-Ru")," ",U]})]})]})]}),(0,r.jsxs)("div",{className:"bottom-payment w-full flex flex-col gap-[1.25rem] border-t-[1px] border-black-200 pt-[1.25rem]",children:[(0,r.jsxs)("div",{className:"custom-paymet-btn",children:[(0,r.jsx)(n.Gv,{text:(0,u.t)("Naqd"),type:"cash",active:"cash"===d,onClick:D}),(0,r.jsx)(n.Gv,{text:(0,u.t)("Plastik"),type:"card",active:"card"===d,onClick:D}),(0,r.jsx)(n.Gv,{text:(0,u.t)("O'tkazma"),type:"transfer",active:"transfer"===d,onClick:D}),!t&&(0,r.jsx)(n.Gv,{text:(0,u.t)("Aralash"),type:"mixed",active:"mixed"===d,onClick:D}),W.pathname.includes("/kassa/debts")&&(0,r.jsx)(n.Gv,{text:(0,u.t)("Aralash"),type:"mixed",active:"mixed"===d,onClick:D})]}),!t&&k&&(0,r.jsx)(n.eV,{text:(0,u.t)("Chegirma"),onClick:B}),(0,r.jsx)(n.p2,{text:(0,u.t)("To'lash"),disablePayButton:q,loading:q,onClick:q?()=>console.log("wait"):I})]})]})]})}},87384:(e,t,a)=>{a.r(t),a.d(t,{default:()=>k});var s=a(65043),n=a(84012),l=a(18446),i=a(47630),o=a(54964),r=a(37424),c=a(79456),d=a(12602),u=a(4235),m=a(78054),h=a(71605),p=a(73734),x=a(49976),g=a(30200),f=a(49092),v=a(53536),y=a(3297),b=a(38069),j=a(70126),C=a(70579);const k=function(){var e;const{t:t}=(0,f.B)(["common"]),a=(0,c.wA)(),{market:k,user:N}=(0,c.d4)((e=>e.login)),{errorPackmans:S,packmans:P,successAddPackman:w,successUpdatePackman:A,successDeletePackman:z,loading:D,searchedPackmans:T,total:B,totalSearched:E}=(0,c.d4)((e=>e.packmans)),R=[{styles:"w-[10%] text-start",filter:"",title:"\u2116"},{styles:"w-[80%] text-start",filter:"",title:t("Agentlar")},{styles:"w-[100%] text-start",filter:"",title:t("Umumiy savdo")},{styles:"w-[100%] text-start",filter:"",title:t("Agent ulushi")},{styles:"w-[10%]",filter:"",title:" "}],I=[{title:"\u2116"},{title:t("Sana")},{title:t("Mijoz")},{title:t("Telefon")},{title:t("Jami")},{title:t("Komissiya")},{title:t("To'langan")},{title:"Komissiya to'langan sana"}],[q,L]=(0,s.useState)([]),[O,_]=(0,s.useState)(""),[M,W]=(0,s.useState)(""),[F,U]=(0,s.useState)(""),[Z,G]=(0,s.useState)(""),[K,Q]=(0,s.useState)(null),[Y,J]=(0,s.useState)(!1),[V,X]=(0,s.useState)(!1),[H,$]=(0,s.useState)("10"),[ee,te]=(0,s.useState)(0),[ae,se]=(0,s.useState)(B),[ne,le]=(0,s.useState)(""),[ie,oe]=(0,s.useState)(window.innerWidth<=768),[re,ce]=(0,s.useState)([]),[de,ue]=(0,s.useState)(!1),[me,he]=(0,s.useState)(!1),[pe,xe]=(0,s.useState)("cash"),[ge,fe]=(0,s.useState)(""),[ve,ye]=(0,s.useState)(""),[be,je]=(0,s.useState)(""),[Ce,ke]=(0,s.useState)(""),[Ne,Se]=(0,s.useState)(0),[Pe,we]=(0,s.useState)(!1),[Ae,ze]=(0,s.useState)(0);(0,s.useEffect)((()=>{const e=()=>{oe(window.innerWidth<=768)};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[]);const De=()=>J(!Y),Te=e=>{G(e),W(e.name),U(e.commission),X(!0)},Be=e=>{Q(e),De()},Ee=e=>{ue(!0),ce(e)},Re=e=>{he(!0),ue(!1)},Ie=()=>{J(!1),Q(null)},qe=e=>{e&&e.preventDefault(),W(""),X(!1),U(""),Q(null),G(null),ke(0),Se(0),ze(0),ye(0),ye(0),fe(0),ke(0),we(!1)},Le=e=>{let{value:t}=e;$(t),te(0)},Oe=(e,t,a)=>(null===e||void 0===e?void 0:e.length)>0&&(null===e||void 0===e?void 0:e.reduce(((e,s)=>((e,t,a)=>e+a)(e,s[t],s[a])),0))||0,[_e,Me]=(0,s.useState)([]),[We,Fe]=(0,s.useState)(null);(0,s.useEffect)((()=>{let e=0;for(let t of _e)e+=Oe(t.saleconnector.products,"totalprice","totalpriceuzs")*t.commission/100;ze(e),Se(e),fe(e),Se(e)}),[_e]);const[Ue,Ze]=(0,s.useState)(!1),Ge=e=>{he(e?!me:e),xe("cash"),qe(),Me([]),Fe(null)},{currency:Ke}=(0,c.d4)((e=>e.currency)),Qe=(e,t)=>{const a=Math.abs(Ne);if("cash"===t){const t=Number(e)+Number(ve)+Number(Ce);t<=a?(fe(e),ze(t)):(0,p.OC)()}else if("card"===t){const t=Number(e)+Number(ge)+Number(Ce);t<=a?(ye(e),ze(t)):(0,p.OC)()}else{const t=Number(e)+Number(ge)+Number(ve);t<=a?(je((0,g.Ch)(e,Ke)),ke(e),ze(t)):(0,p.OC)()}};return(0,s.useEffect)((()=>{S&&((0,p.lY)(S,"error"),a((0,x.Ev)())),w&&((0,p.JS)(),a((0,x.WY)()),qe()),A&&((0,p.Nb)(),a((0,x.Uf)()),G(""),X(!1),qe()),z&&((0,p.RC)(),a((0,x.Ag)()),qe())}),[a,S,w,A,z]),(0,s.useEffect)((()=>{const e={currentPage:ee,countPage:H,search:{name:ne.replace(/\s+/g," ").trim()}};a((0,x.Zd)(e))}),[a,H,ee]),(0,s.useEffect)((()=>{L(P)}),[P]),(0,s.useEffect)((()=>{se(B)}),[B]),(0,s.useEffect)((()=>{_(T)}),[T]),(0,C.jsxs)(h.P.section,{initial:"collapsed",animate:"open",exit:"collapsed",variants:{open:{opacity:1,height:"auto"},collapsed:{opacity:0,height:0}},transition:{duration:.8,ease:[.04,.62,.23,.98]},children:[(0,C.jsx)(d.A,{headerText:"".concat(K&&K.name," ").concat(t("ismli agentni o'chirishni tasdiqlaysizmi?")),title:t("O'chirilgan agentni tiklashning imkoni mavjud emas!"),toggleModal:De,body:"approve",approveFunction:()=>{const e={_id:K._id,currentPage:ee,countPage:H,search:{name:ne.replace(/\s+/g," ").trim()}};a((0,x.ft)(e)),Ie()},closeModal:Ie,isOpen:Y}),(0,C.jsxs)("form",{className:"sale-deliver-form ps-[20px] mt-[40px] flex lg:flex-nowrap flex-wrap ".concat(V&&"stickyForm"),children:[(0,C.jsx)(i.A,{onChange:e=>{W(e.target.value)},value:M,label:t("Agentning ismi"),placeholder:t("misol: Anvar"),maxWidth:"w-[30.75rem]",type:"string"}),(0,C.jsx)(i.A,{onChange:e=>U(e.target.value),value:F,label:t("Agentning komissiyasi"),placeholder:t("misol: 5%"),maxWidth:"w-[10.75rem]",type:"number"}),(0,C.jsxs)("div",{className:"flex gap-[1.25rem] grow items-end",children:[(0,C.jsx)(n.A,{add:!V,edit:V,text:t(V?"Saqlash":"Yangi agent qo`shish"),onClick:V?e=>{e.preventDefault();const{failed:s,message:n}=(0,g.py)([{value:M,message:t("Agent ismi")}]);if(s)(0,p.EB)(n);else{const e={name:M,_id:Z._id,currentPage:ee,countPage:H,commission:F,search:{name:ne.replace(/\s+/g," ").trim()},market:Z.market};a((0,x.bQ)(e))}}:e=>{e.preventDefault();const{failed:s,message:n}=(0,g.py)([{value:M,message:t("Agent ismi")}]);if(s)(0,p.EB)(n);else{const e={name:M,currentPage:ee,countPage:H,commission:F,search:{name:ne.replace(/\s+/g," ").trim()}};a((0,x.hX)(e)),W(""),U("")}}}),(0,C.jsx)(n.A,{text:t("Tozalash"),onClick:qe})]})]}),(0,C.jsxs)("div",{className:"flex ps-[10px] items-center ",children:[(0,C.jsx)(b.A,{onSelect:Le},"total_1"),(0,C.jsx)(r.A,{filterBy:["total","name"],filterByTotal:Le,filterByName:e=>{let t=e.target.value;le(t);let s=t.toLowerCase().replace(/\s+/g," ").trim();if((O.length>0||E>0)&&a((0,x.pR)()),""===s)L(P),se(B);else{const e=(0,v.filter)(P,(e=>e.name.toLowerCase().includes(s)));L(e),se(e.length)}},searchByName:ne,filterByCodeAndNameAndCategoryWhenPressEnter:e=>{if("Enter"===e.key){const e={currentPage:ee,countPage:H,search:{name:ne.replace(/\s+/g," ").trim()}};a((0,x.Wg)(e))}}})]}),(0,C.jsx)("div",{className:"lg:tableContainerPadding",children:D?(0,C.jsx)(u.A,{}):0===q.length?(0,C.jsx)(m.A,{text:"Agentlar mavjud emas"}):ie?(0,C.jsx)(y.A,{page:"packman",currentPage:ee,countPage:H,showClients:Ee,data:O.length>0?O:q,headers:R,Delete:Be,Edit:Te}):(0,C.jsx)(l.A,{page:"packman",currentPage:ee,countPage:H,data:O.length>0?O:q,headers:R,Delete:Be,showClients:Ee,Edit:Te})}),(0,C.jsx)("div",{className:"flex justify-center mt-[30px] mb-[30px]",children:(0!==ae||0!==E)&&(0,C.jsx)(o.A,{countPage:Number(H),totalDatas:E||ae,setCurrentPage:te,currentPage:ee})}),(0,C.jsx)(j.A,{returned:!1,hiddenDebt:!0,type:pe,active:me,togglePaymentModal:Ge,changePaymentType:e=>{if(pe!==e)switch(xe(e),e){case"cash":fe(Ne),ye(""),je(""),ke(""),ze(Ne);break;case"card":ye(Ne),fe(""),je(""),ke(""),ze(Ne);break;case"transfer":ke(Ne),fe(""),ye(""),ze(Ne);break;default:fe(""),ye(""),ke(""),ze(0)}},onChange:(e,t)=>{Qe(e,t)},disableInputsCashCard:!0,client:null,allPayment:Ne,card:ve,cash:ge,debt:"",hasDiscountBtn:!1,clickdelay:Ue,discount:"",transfer:Ce,paid:Ae,handleClickPay:()=>{we(!0)}}),(0,C.jsx)(d.A,{headerText:"To'lovni amalga oshirishni tasdiqlaysizmi?",title:"To'lovni amalga oshirgach bu ma`lumotlarni o'zgaritirib bo'lmaydi!",isOpen:Pe,body:"complete",toggleModal:qe,approveFunction:()=>{we(!1),Ze(!0);const e={payment:{totalprice:0,totalpriceuzs:Number(Ne),type:pe,cash:0,cashuzs:Number(ge),card:0,carduzs:Number(ve),transfer:Number(be),transferuzs:Number(Ce),discount:0,discountuzs:0,packman:We,packman_saleconnectors:_e},market:k,user:N};a((0,x.KM)(e)).then((e=>{let{payload:t}=e;setTimeout((()=>{Ge(),Ze(!1),Me([]);const e={currentPage:ee,countPage:H,search:{name:ne.replace(/\s+/g," ").trim()}};a((0,x.Zd)(e))}),500)}))}}),(0,C.jsxs)(d.A,{body:"packmanProfitClients",isOpen:de,closeModal:()=>{ue(!1),qe(),Me([])},disablePayButton:0===_e.length,payDebt:Re,children:[" ",(0,C.jsx)(l.A,{page:"packmanProfitClients",hiddenPayButton:!0,changeCheckbox:(e,t)=>{Fe(e),_e.some((e=>e.saleconnector._id===t._id))?Me((e=>e.filter((e=>e.saleconnector._id!==t._id)))):Me((a=>[...a,{...e.clients.find((e=>e.saleconnector._id===t._id)),commission:e.commission}]))},selectedSale:_e,hiddenInfoButton:!0,headers:I,data:re,currentPage:ee,countPage:10,currency:"UZS",type:"",Pay:Re,reports:!0,Print:()=>{},Sort:null,sortItem:null,Edit:()=>{},totalDebt:0}),(0,C.jsxs)("ul",{className:"p-2 space-y-1 ",children:[(0,C.jsxs)("li",{className:"flex items-center gap-x-2",children:[(0,C.jsx)("span",{className:"font-semibold ",children:"Umumiy savdo:"}),(0,C.jsxs)("span",{className:"font-semibold ",children:[(()=>{var e;return(null===re||void 0===re||null===(e=re.clients)||void 0===e?void 0:e.map((e=>Oe(e.saleconnector.products,"totalprice","totalpriceuzs"))).reduce(((e,t)=>e+t),0))||0})().toLocaleString("ru-Ru")," UZS"]})]}),(0,C.jsxs)("li",{className:"flex items-center gap-x-2",children:[(0,C.jsx)("span",{className:"font-semibold ",children:"Komissiya:"}),(0,C.jsxs)("span",{className:"font-semibold ",children:[(()=>{var e;return(null===re||void 0===re||null===(e=re.clients)||void 0===e?void 0:e.map((e=>Oe(e.saleconnector.products,"totalprice","totalpriceuzs"))).reduce(((e,t)=>e+t),0))*(null===re||void 0===re?void 0:re.commission)/100||0})().toLocaleString("ru-Ru")," UZS"]})]}),(0,C.jsxs)("li",{className:"flex items-center gap-x-2",children:[(0,C.jsx)("span",{className:"font-semibold ",children:"To'langan:"}),(0,C.jsxs)("span",{className:"font-semibold ",children:[(()=>{var e;return(null===re||void 0===re||null===(e=re.payments)||void 0===e?void 0:e.reduce(((e,t)=>e+t.paymentuzs),0))||0})().toLocaleString("ru-Ru")," UZS"]})]}),(0,C.jsxs)("li",{className:"flex items-center gap-x-2",children:[(0,C.jsx)("span",{className:"font-semibold ",children:"To'lanmagan:"}),(0,C.jsxs)("span",{className:"font-semibold ",children:[null===(e=(()=>{var e;return(null===re||void 0===re?void 0:re.commissionProfit)-(null===re||void 0===re||null===(e=re.payments)||void 0===e?void 0:e.reduce(((e,t)=>e+t.paymentuzs),0))||0})())||void 0===e?void 0:e.toLocaleString("ru-Ru")," UZS"]})]})]})]})]},"content")}}}]);
//# sourceMappingURL=9990.24e9680a.chunk.js.map