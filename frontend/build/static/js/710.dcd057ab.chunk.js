"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[710,1181],{53512:(e,t,a)=>{a.r(t),a.d(t,{default:()=>w});var n=a(65043),i=a(47630),s=a(84012),r=a(18446),l=a(3297),o=a(79456),c=a(71605),u=a(27624),d=a(12602),x=a(4235),h=a(78054),g=a(30200),p=a(73734),m=a(49092),f=a(47990),v=a(70579);const w=()=>{const{t:e}=(0,m.B)(["common"]),t=(0,o.wA)(),{currencies:a,getCurrenciesLoading:w}=(0,o.d4)((e=>e.currency)),y=[{title:"\u2116",styles:"w-[8%] text-left"},{title:e("Sana"),styles:"w-[17%] text-center"},{title:e("Kurs"),styles:"w-[67%] text-center"},{title:"",styles:"w-[8%] text-center"}],[k,j]=(0,n.useState)(a),[S,b]=(0,n.useState)(""),[A,P]=(0,n.useState)(""),[C,z]=(0,n.useState)(null),[E,D]=(0,n.useState)(!1),[K,q]=(0,n.useState)(!1),[F,N]=(0,n.useState)(!1),[_,Y]=(0,n.useState)(null),[L,V]=(0,n.useState)(!1),[W,B]=(0,n.useState)(!1),I=()=>D(!E),M=e=>{P(e),b(e.exchangerate),q(!0)},O=e=>{z(e),Y("approve"),I()},T=()=>{D(!1),z(null),Y(null)},U=t=>{t.preventDefault();const{failed:a}=(0,g.py)([{value:S,message:"Kurs narxi"}]);return a?(0,p.lY)(e("Valyuta kursini kiriting!"),"error"):L||W?(N(!0),D(!0),void Y("complete")):(0,p.lY)(e("Sotish yoki kelish tanlang!"),"warning")},[Z,G]=(0,n.useState)(window.innerWidth<=768);(0,n.useEffect)((()=>{const e=()=>{G(window.innerWidth<=768)};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[]);const H=e=>{e&&e.preventDefault(),b(""),V(!1),B(!1),P(null),q(!1)};return(0,n.useEffect)((()=>{t((0,u._w)())}),[t]),(0,n.useEffect)((()=>{j(a)}),[a]),(0,v.jsxs)(c.P.section,{initial:"collapsed",animate:"open",exit:"collapsed",variants:{open:{opacity:1,height:"auto"},collapsed:{opacity:0,height:0}},transition:{duration:.8,ease:[.04,.62,.23,.98]},children:[w&&(0,v.jsx)("div",{className:"fixed backdrop-blur-[2px] z-[100] left-0 top-0 right-0 bottom-0 bg-white-700 flex flex-col items-center justify-center w-full h-full",children:(0,v.jsx)(x.A,{})}),(0,v.jsx)(d.A,{headerText:F?"".concat(e("Diqqat! Barcha mahsulotlar narxi valyuta kursiga nisbatan o'zgarishini xohlaysizmi?")):"".concat(C&&C.exchangerate," ").concat(e("kurs narxini o'chirishni tasdiqlaysizmi?")),title:F?"":e("O'chirilgan kurs narxini tiklashning imkoni mavjud emas!"),toggleModal:I,body:_,approveFunction:F?()=>{const e={exchangerate:S,isIncomingPrice:L,isSellingPrice:W};t((0,u.z)(e)).then((e=>{let{error:t}=e;t||(H(),N(!1),D(!1),Y(null))}))}:()=>{const e={_id:C._id};t((0,u.Fw)(e)),T()},closeModal:T,isOpen:E}),(0,v.jsx)("form",{className:"unitFormStyle mt-[50px] ".concat(K&&"stickyForm"," flex gap-[1.25rem] bg-background flex-col mainPadding transition ps-[20px] ease-linear duration-200"),children:(0,v.jsxs)("div",{className:"exchangerate-style flex lg:flex-nowrap flex-wrap",children:[(0,v.jsx)(i.A,{value:S,onChange:e=>{b(e.target.value)},label:e("Kurs narxi"),placeholder:"11 000 UZS",maxWidth:"w-[30.75rem]",type:"number",border:!0,onKeyPress:e=>{e.preventDefault(),"Enter"===e.key&&U()}}),(0,v.jsx)(f.A,{id:"isIncomingPrice",onChange:()=>V(!L),value:L,label:e("Kelish narxi")}),(0,v.jsx)(f.A,{id:"isSellingPrice",onChange:()=>B(!W),value:W,label:e("Sotish narxi")}),(0,v.jsxs)("div",{className:"w-full flex gap-[1.25rem] grow w-[33.2rem]",children:[(0,v.jsx)(s.A,{onClick:K?a=>{a.preventDefault();const{failed:n}=(0,g.py)([{value:S,message:"Kurs narxi"}]);if(n)return(0,p.lY)(e("Valyuta kursini kiriting!"),"error");const i={exchangerate:S,_id:A._id};t((0,u.Fh)(i)).then((e=>{let{error:t}=e;t||(H(),N(!0),D(!0),Y("complete"))}))}:U,add:!K,edit:K,text:e(K?"Saqlash":"Yangi o'lchov qo'shish")}),(0,v.jsx)(s.A,{onClick:H,text:e("Tozalash")})]})]})}),(0,v.jsx)("div",{className:"lg:tableContainerPadding",children:w?(0,v.jsx)(x.A,{}):0===a.length?(0,v.jsx)(h.A,{text:e("Valyuta kursi mavjud emas")}):Z?(0,v.jsx)(l.A,{page:"exchange",data:k,currentPage:0,countPage:10,headers:y,Edit:M,Delete:O}):(0,v.jsx)(r.A,{page:"exchange",data:k,currentPage:0,countPage:10,headers:y,Edit:M,Delete:O})})]},"content")}}}]);
//# sourceMappingURL=710.dcd057ab.chunk.js.map