{"version":3,"file":"static/js/2314.b7b9825f.chunk.js","mappings":"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","sources":["Pages/Sale/Routes/SavedSellings.js"],"sourcesContent":["import React, {useEffect, useState} from 'react'\r\nimport Table from '../../../Components/Table/Table'\r\nimport TableMobile from '../../../Components/Table/TableMobile'\r\nimport {useDispatch, useSelector} from 'react-redux'\r\nimport {\r\n    deleteSavedPayment,\r\n    getSavedPayments,\r\n} from '../Slices/savedSellingsSlice.js'\r\nimport NotFind from '../../../Components/NotFind/NotFind.js'\r\nimport SmallLoader from '../../../Components/Spinner/SmallLoader.js'\r\nimport {universalToast} from '../../../Components/ToastMessages/ToastMessages.js'\r\nimport UniversalModal from '../../../Components/Modal/UniversalModal.js'\r\nimport {useTranslation} from 'react-i18next'\r\nimport {universalSort} from './../../../App/globalFunctions'\r\n\r\nconst SavedSellings = () => {\r\n    const [isMobile, setIsMobile] = useState(window.innerWidth <= 768)\r\n    useEffect(() => {\r\n        const handleResize = () => {\r\n            setIsMobile(window.innerWidth <= 768)\r\n        }\r\n\r\n        window.addEventListener('resize', handleResize)\r\n\r\n        return () => {\r\n            window.removeEventListener('resize', handleResize)\r\n        }\r\n    }, [])\r\n    const {t} = useTranslation(['common'])\r\n    const dispatch = useDispatch()\r\n    const {savedPayments, getLoading} = useSelector(\r\n        (state) => state.savedSellings\r\n    )\r\n    const [data, setData] = useState(savedPayments)\r\n    const [storeData, setStoreData] = useState(savedPayments)\r\n    const [sorItem, setSorItem] = useState({\r\n        filter: '',\r\n        sort: '',\r\n        count: 0,\r\n    })\r\n    const {currencyType} = useSelector((state) => state.currency)\r\n    const [modalVisible, setModalVisible] = useState(false)\r\n    const [modalBody, setModalBody] = useState('approve')\r\n    const [printBody, setPrintBody] = useState({})\r\n    const [selectedPayment, setSelectedPayment] = useState(null)\r\n    const headers = [\r\n        {styles: 'w-[10%] text-start', filter: '', title: 'â„–'},\r\n        {styles: 'w-[40%]', title: t('Sotuvchi')},\r\n        {styles: 'w-[40%]', filter: 'temporary.clientValue', title: t('Mijoz')},\r\n        {styles: 'w-[10%]', filter: '', title: t('Maxsulotlar')},\r\n        {\r\n            styles: 'w-[10%] text-center',\r\n            filter: 'temporary.totalPrice',\r\n            title: t('Jami'),\r\n        },\r\n        {styles: 'w-[10%] text-center', filter: 'createdAt', title: t('Sana')},\r\n        {styles: 'w-[10%] text-center', filter: 'createdAt', title: t('Vaqti')},\r\n        {styles: 'w-[10%]', filter: '', title: ' '},\r\n    ]\r\n    const toggleModal = () => {\r\n        setModalVisible(!modalVisible)\r\n        setPrintBody({})\r\n        setModalBody('')\r\n    }\r\n    const deletePayment = () => {\r\n        dispatch(deleteSavedPayment({_id: selectedPayment})).then(({error}) => {\r\n            if (!error) {\r\n                toggleModal()\r\n                setSelectedPayment(null)\r\n            }\r\n        })\r\n    }\r\n    const handleGetId = (id) => {\r\n        setSelectedPayment(id)\r\n        toggleModal()\r\n        setModalBody('approve')\r\n    }\r\n    const editSavedPayment = () => {\r\n        universalToast(t('Xizmatdan foydalanish hozircha mavjud emas'), 'info')\r\n    }\r\n    const handlePrintModal = (el) => {\r\n        toggleModal()\r\n        setModalBody('savedsalescheck')\r\n        setPrintBody({\r\n            createdAt: el.createdAt,\r\n            products: el.temporary.tableProducts,\r\n            client: {name: el.temporary.clientValue?.label},\r\n            packman: {name: el.temporary.packmanValue?.label},\r\n            user: el.user,\r\n        })\r\n    }\r\n\r\n    useEffect(() => {\r\n        dispatch(getSavedPayments())\r\n    }, [dispatch])\r\n\r\n    useEffect(() => {\r\n        setData(savedPayments)\r\n        setStoreData(savedPayments)\r\n    }, [savedPayments])\r\n\r\n    const filterData = (filterKey) => {\r\n        if (filterKey === sorItem.filter) {\r\n            switch (sorItem.count) {\r\n                case 1:\r\n                    setSorItem({\r\n                        filter: filterKey,\r\n                        sort: '1',\r\n                        count: 2,\r\n                    })\r\n                    universalSort(\r\n                        savedPayments,\r\n                        setData,\r\n                        filterKey,\r\n                        1,\r\n                        storeData\r\n                    )\r\n                    break\r\n                case 2:\r\n                    setSorItem({\r\n                        filter: filterKey,\r\n                        sort: '',\r\n                        count: 0,\r\n                    })\r\n                    universalSort(data, setData, filterKey, '', storeData)\r\n                    break\r\n                default:\r\n                    setSorItem({\r\n                        filter: filterKey,\r\n                        sort: '-1',\r\n                        count: 1,\r\n                    })\r\n                    universalSort(data, setData, filterKey, -1, storeData)\r\n            }\r\n        } else {\r\n            setSorItem({\r\n                filter: filterKey,\r\n                sort: '-1',\r\n                count: 1,\r\n            })\r\n            universalSort(data, setData, filterKey, -1, storeData)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className='pb-[1.25rem] max-h-[35rem] mb-[1rem] pt-[1.25rem] ps-[1rem] pe-[2rem]'>\r\n            <UniversalModal\r\n                isOpen={modalVisible}\r\n                body={modalBody}\r\n                approveFunction={deletePayment}\r\n                printedSelling={printBody}\r\n                toggleModal={toggleModal}\r\n                headerText={t(\r\n                    'Saqlangan to`lovni o`chirishni tasdiqlaysizmi ?'\r\n                )}\r\n                title={t('Agar to`lov o`chsa uni tiklab bo`lmaydi !')}\r\n            />\r\n            {!getLoading ? (\r\n                savedPayments.length > 0 ? (\r\n                    !isMobile ? (\r\n                        <Table\r\n                            Edit={editSavedPayment}\r\n                            Delete={handleGetId}\r\n                            page='temporarysale'\r\n                            currentPage={3}\r\n                            countPage={3}\r\n                            data={data}\r\n                            headers={headers}\r\n                            currency={currencyType}\r\n                            Print={handlePrintModal}\r\n                            Sort={filterData}\r\n                            sortItem={sorItem}\r\n                        />\r\n                    ) : (\r\n                        <TableMobile\r\n                            Edit={editSavedPayment}\r\n                            Delete={handleGetId}\r\n                            page='temporarysale'\r\n                            currentPage={3}\r\n                            countPage={3}\r\n                            data={data}\r\n                            headers={headers}\r\n                            currency={currencyType}\r\n                            Print={handlePrintModal}\r\n                            Sort={filterData}\r\n                            sortItem={sorItem}\r\n                        />\r\n                    )\r\n                ) : (\r\n                    <NotFind\r\n                        text={t('Saqlanganlar to`lovlar hozircha mavjud emas')}\r\n                    />\r\n                )\r\n            ) : (\r\n                <SmallLoader />\r\n            )}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default SavedSellings\r\n"],"names":["SavedSellings","isMobile","setIsMobile","useState","window","innerWidth","useEffect","handleResize","addEventListener","removeEventListener","t","useTranslation","dispatch","useDispatch","savedPayments","getLoading","useSelector","state","savedSellings","data","setData","storeData","setStoreData","sorItem","setSorItem","filter","sort","count","currencyType","currency","modalVisible","setModalVisible","modalBody","setModalBody","printBody","setPrintBody","selectedPayment","setSelectedPayment","headers","styles","title","toggleModal","handleGetId","id","editSavedPayment","universalToast","handlePrintModal","el","_el$temporary$clientV","_el$temporary$packman","createdAt","products","temporary","tableProducts","client","name","clientValue","label","packman","packmanValue","user","getSavedPayments","filterData","filterKey","universalSort","_jsxs","className","children","_jsx","UniversalModal","isOpen","body","approveFunction","deletePayment","deleteSavedPayment","_id","then","_ref","error","printedSelling","headerText","SmallLoader","length","TableMobile","Edit","Delete","page","currentPage","countPage","Print","Sort","sortItem","Table","NotFind","text"],"sourceRoot":""}