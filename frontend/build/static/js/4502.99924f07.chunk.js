"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[4502],{77275:(e,t,i)=>{i.d(t,{A:()=>r});i(65043);const r=i.p+"static/media/Excel.3a5a1731280185e0e4ae99ee0a4eebfc.svg"},46521:(e,t,i)=>{i.d(t,{P:()=>s});i(65043);var r=i(33979),l=i(79456),n=(i(72096),i(70579));const a=e=>{var t;let{product:i,currency:a,marketName:c,isShowPrice:o}=e;const{inputRef:s}=(0,r.E)({value:null===i||void 0===i||null===(t=i.productdata)||void 0===t?void 0:t.barcode,options:{background:"#fff",width:"2cm",height:"40cm"}}),{currency:d}=(0,l.d4)((e=>e.currency));return(0,n.jsx)("div",{className:"w-[58mm] break-after-page font-sans h-[40mm] times ",children:(0,n.jsxs)("div",{className:"w-[58mm] rotate-90 mt-20 -ml-0 text-xl",children:[(0,n.jsx)("div",{className:"text-center w-[auto] font-bold text-2xl p-[3px] pb-3 border border-t-0 border-l-0 border-s-0 border-e-0 border-b-1",children:(0,n.jsxs)("span",{children:['"',c,'"']})}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"text-center text-lg p-1",children:[(0,n.jsx)("br",{})," ",(0,n.jsx)("span",{className:"font-bold text-[20px]",children:i.productdata&&i.productdata.name})]}),o&&(0,n.jsx)("div",{className:"text-[27px] font-bold text-center p-1",children:(0,n.jsx)("span",{children:i.price&&("UZS"===a?i.price.sellingpriceuzs.toLocaleString("ru-RU"):i.price.sellingprice.toLocaleString("ru-RU"))+" "+a||""})}),(0,n.jsx)("div",{children:(0,n.jsx)("canvas",{ref:s})}),(0,n.jsx)("div",{className:"flex justify-center p-1"})]})]})})};var c=i(53536);const o=(e,t)=>{let i=[];for(let r=0;r<e;r++)i.push(t);return i},s=e=>{let{countOfCheques:t,productForCheques:i,printedData:r,componentRef:l,currency:s,marketName:d,isShowPrice:u}=e;return(0,n.jsxs)("div",{ref:l,children:[i&&t&&(0,c.map)(i,(e=>(0,c.range)(0,t).map((()=>(0,n.jsx)(a,{currency:s,product:e,marketName:d,isShowPrice:u},(0,c.uniqueId)("barCode")))))),(0,c.map)(r,(e=>(0,n.jsx)("div",{children:(0,c.map)(o(e.numberOfChecks,e.product),(e=>(0,n.jsx)(a,{currency:s,product:e,marketName:d,isShowPrice:u},(0,c.uniqueId)("barCode"))))},(0,c.uniqueId)("barCodeContainer"))))]})}},23237:(e,t,i)=>{i.d(t,{A:()=>a});i(65043);var r=i(77275),l=i(49092),n=i(70579);const a=function(e){let{onClick:t}=e;const{t:i}=(0,l.B)(["common"]);return(0,n.jsxs)("button",{className:"exportButton ",onClick:t,children:[i("Eksport"),(0,n.jsx)("span",{className:"btn-icon bg-white-900 p-[8px]",children:(0,n.jsx)("img",{src:r.A,alt:"excel icon"})})]})}},65784:(e,t,i)=>{i.r(t),i.d(t,{default:()=>b});var r=i(65043),l=i(23237),n=i(54964),a=i(18446),c=i(71605),o=i(37424),s=i(79456),d=i(4235),u=i(78054),p=i(93978),m=i(93141),h=i(46521),g=i(30200),f=i(49092),x=i(53536),v=i(73734),j=(i(47990),i(70579));const b=e=>{let{id:t}=e;const{t:i}=(0,f.B)(["common"]),b=[{title:i("\u2116")},{title:i("Kategoriyasi"),filter:"category.code"},{title:i("Maxsulot kodi"),filter:"productdata.code"},{title:i("Maxsulot nomi"),filter:"productdata.name"},{title:i("Soni(dona)"),filter:"product.total"},{title:i("Olish"),filter:"price.incomingprice"},{title:i("Olish jami")},{title:i("Sotish"),filter:"price.sellingprice"},{title:i("Sotish jami")},{title:i("Cheklar soni")},{title:""}],S=(0,s.wA)(),{products:y,total:k,loading:C,searchedProducts:N,totalSearched:P,loadingExcel:w}=(0,s.d4)((e=>e.products)),{currencyType:B}=(0,s.d4)((e=>e.currency)),{market:{name:A}}=(0,s.d4)((e=>e.login)),[E,O]=(0,r.useState)(y),[U,z]=(0,r.useState)(N),[D,R]=(0,r.useState)(k),[q,I]=(0,r.useState)("10"),[Y,L]=(0,r.useState)(0),[M,Z]=(0,r.useState)(""),[T,$]=(0,r.useState)(""),[_,F]=(0,r.useState)(""),[G,H]=(0,r.useState)(null),[J,K]=(0,r.useState)(""),[W,Q]=(0,r.useState)({filter:"",sort:"",count:0}),[V,X]=(0,r.useState)(!1),[ee,te]=(0,r.useState)([]),[ie,re]=(0,r.useState)(!0),le=(0,r.useRef)(),ne=(0,r.useRef)(),ae=(0,m.useReactToPrint)({content:()=>le.current,onBeforeGetContent:()=>(X(!0),new Promise((e=>{ne.current=e,setTimeout((()=>{X(!1),e()}),2e3)})))}),ce=async(e,t)=>{t&&te([...(0,x.filter)(ee,(t=>t.product._id===e._id))]),await ae()};return(0,r.useEffect)((()=>{const e={filialId:t,currentPage:Y,countPage:q,search:{name:T.replace(/\s+/g," ").trim(),code:M.replace(/\s+/g," ").trim(),category:_.replace(/\s+/g,"")}};S((0,p.d$)(e))}),[Y,q,S]),(0,r.useEffect)((()=>{O(y)}),[y]),(0,r.useEffect)((()=>{R(k)}),[k]),(0,r.useEffect)((()=>{z(N)}),[N]),(0,r.useEffect)((()=>{V&&"function"===typeof ne.current&&ne.current()}),[ne.current,V]),(0,r.useEffect)((()=>{V||(te([]),K(""),H(null))}),[V]),(0,j.jsxs)(c.P.section,{initial:"collapsed",animate:"open",exit:"collapsed",variants:{open:{opacity:1,height:"auto"},collapsed:{opacity:0,height:0}},transition:{duration:.8,ease:[.04,.62,.23,.98]},children:[w||V&&(0,j.jsx)("div",{className:"fixed backdrop-blur-[2px] z-[100] left-0 top-0 right-0 bottom-0 bg-white-700 flex flex-col items-center justify-center w-full h-full",children:(0,j.jsx)(d.A,{})}),(0,j.jsx)("div",{className:"mt-10 lg:mt-0 pagination mainPadding",children:(0,j.jsx)(l.A,{onClick:()=>{const e=["\u2116","Mahsulot kodi","Mahsulot nomi","Soni","Olish narxi USD","Olish narxi UZS","Olish narxi jami USD","Olish narxi jami UZS","Sotish narxi USD","Sotish narxi UZS","Sotish narxi jami UZS","Sotish narxi jami USD"];S((0,p.cA)()).then((t=>{let{error:i,payload:r}=t;if(!i)if((null===r||void 0===r?void 0:r.length)>0){const t=(0,x.map)(r,((e,t)=>{var i,r,l,n,a,c,o,s,d,u,p;return{nth:t+1,salom:"hello",code:(null===e||void 0===e||null===(i=e.productdata)||void 0===i?void 0:i.code)||"",name:(null===e||void 0===e||null===(r=e.productdata)||void 0===r?void 0:r.name)||"",total:e.total+(null===e||void 0===e||null===(l=e.unit)||void 0===l?void 0:l.name)||"",incomingprice:(null===e||void 0===e||null===(n=e.price)||void 0===n?void 0:n.incomingprice)||"",incomingpriceuzs:(null===e||void 0===e||null===(a=e.price)||void 0===a?void 0:a.incomingpriceuzs)||"",incomingpricealluzs:(null===e||void 0===e||null===(c=e.price)||void 0===c?void 0:c.incomingpriceuzs)*e.total,incomingpriceallusd:(null===e||void 0===e||null===(o=e.price)||void 0===o?void 0:o.incomingprice)*e.total,sellingprice:(null===e||void 0===e||null===(s=e.price)||void 0===s?void 0:s.sellingprice)||"",sellingpriceuzs:(null===e||void 0===e||null===(d=e.price)||void 0===d?void 0:d.sellingpriceuzs)||"",sellingalluzs:(null===e||void 0===e||null===(u=e.price)||void 0===u?void 0:u.sellingpriceuzs)*e.total,sellingallusd:(null===e||void 0===e||null===(p=e.price)||void 0===p?void 0:p.sellingprice)*e.total}}));(0,g.m1)(t,"Etiketka",e)}else(0,v.lY)("Jadvalda ma'lumot mavjud emas !","warning")}))}})}),(0,j.jsx)(o.A,{filterBy:["total","category","code","name","checks","checkbox","printBtn"],filterByCode:e=>{let t=e.target.value,i=t.replace(/\s+/g," ").trim();if(Z(t),(U.length>0||P>0)&&S((0,p.$g)()),""===i)O(y),R(k);else{const e=(0,x.filter)(y,(e=>e.productdata.code.includes(i)));O(e),R(e.length)}},filterByName:e=>{let t=e.target.value,i=t.toLowerCase().replace(/\s+/g," ").trim();if($(t),(U.length>0||P>0)&&S((0,p.$g)()),""===i)O(y),R(k);else{const e=(0,x.filter)(y,(e=>e.productdata.name.toLowerCase().includes(i)));O(e),R(e.length)}},searchByCode:M,searchByName:T,searchByCategory:_,filterByCategory:e=>{let t=e.target.value,i=t.replace(/\s+/g," ").trim();if(F(t),(U.length>0||P>0)&&S((0,p.$g)()),""===i)O(y),R(k);else{const e=(0,x.filter)(y,(e=>e.category.code.includes(i)));O(e),R(e.length)}},numberOfChecks:J,filterByTotal:e=>{let{value:t}=e;I(t),L(0)},filterByCodeAndNameAndCategoryWhenPressEnter:e=>{if("Enter"===e.key){L(0);const e={filialId:t,currentPage:0,countPage:q,search:{name:T.replace(/\s+/g," ").trim(),code:M.replace(/\s+/g," ").trim(),category:_.replace(/\s+/g,"")}};S((0,p.Yp)(e))}},clickPrintBtn:ce,setNumberOfChecks:e=>{K(e.target.value),H(U.length>0?U:E)},check:!ie,handleChangeCheck:()=>re(!ie),checkboxLabel:"Narxi"}),(0,j.jsx)("div",{className:"tableContainerPadding",children:C?(0,j.jsx)(d.A,{}):0===E.length&&0===U.length?(0,j.jsx)(u.A,{text:i("Maxsulotlar mavjud emas")}):(0,j.jsx)(a.A,{page:"productreport",data:U.length>0?U:E,currentPage:Y,countPage:q,currency:B,headers:b,Sort:e=>{if(e===W.filter)switch(W.count){case 1:Q({filter:e,sort:"1",count:2}),(0,g.Yc)(U.length>0?U:E,U.length>0?z:O,e,1,U.length>0?N:y);break;case 2:Q({filter:e,sort:"",count:0}),(0,g.Yc)(U.length>0?U:E,U.length>0?z:O,e,"",U.length>0?N:y);break;default:Q({filter:e,sort:"-1",count:1}),(0,g.Yc)(U.length>0?U:E,U.length>0?z:O,e,-1,U.length>0?N:y)}else Q({filter:e,sort:"-1",count:1}),(0,g.Yc)(U.length>0?U:E,U.length>0?z:O,e,-1,U?N:y,U.length>0)},sortItem:W,placeholder:"".concat(i("misol")," : 10"),changeHandler:(e,t)=>{const i=ee.findIndex((e=>e.product._id===t._id));-1!==i?(""!==e.target.value.trim()?ee[i].numberOfChecks=Number(e.target.value):ee.splice(i,1),te([...ee])):te([...ee,{product:t,numberOfChecks:Number(e.target.value)}])},Print:ce,printedData:ee})}),(0,j.jsx)("div",{className:"hidden",children:(0,j.jsx)(h.P,{currency:B,componentRef:le,countOfCheques:J,productForCheques:G,printedData:ee,marketName:A,isShowPrice:ie})}),(0,j.jsx)("div",{className:"m-3 flex justify-center",children:(0!==D||0!==P)&&(0,j.jsx)(n.A,{countPage:Number(q),totalDatas:P||D,currentPage:Y,setCurrentPage:L})})]},"content")}}}]);
//# sourceMappingURL=4502.99924f07.chunk.js.map