"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[1233,1181],{31204:(e,t,a)=>{a.d(t,{A:()=>r});a(65043);var n=a(35475),s=a(90221),l=a(70579);const r=e=>{let{link:t}=e;return(0,l.jsx)(n.N_,{to:t,className:"lg:mt-[10px] lg:ms-[20px] mt-[50px] ms-[30px] linktoback",children:(0,l.jsx)(s.feN,{className:"mt-[]"})})}},70126:(e,t,a)=>{a.d(t,{A:()=>y});var n=a(90221),s=a(26441),l=(a(65043),a(79456)),r=a(2364),o=a(57290),i=a(70579);const c=e=>(0,i.jsx)(o.c.DropdownIndicator,{...e,children:(0,i.jsx)(n.QDT,{size:"0.625rem"})}),u={control:e=>({...e,borderTopRightRadius:".125rem",borderBottomRightRadius:".125rem",borderTopLeftRadius:"0",borderBottomLeftRadius:"0",fontSize:"0.75rem",fontWeight:"400",padding:"0.375rem 0.3125rem",color:"#071F45",outline:"none",border:"none",boxShadow:"none",cursor:"pointer",height:"100%",backgroundColor:"#F79009",minHeight:"100%","&:hover":{backgroundColor:"#DC6803"}}),container:e=>({...e,height:"100%",position:"absolute",right:0,width:"3rem",top:0,bottom:0}),option:(e,t)=>{let{isFocused:a,isSelected:n}=t;return{...e,fontSize:".75rem",fontWeight:"400",color:n||a?"#ffffff":"#071F45",backgroundColor:n?"#0090A3":a?"#00B4CC":"#ffffff",transition:"all 0.2s ease",overflow:"hidden",cursor:"pointer",textAlign:"center"}},menu:e=>({...e,overflow:"hidden"}),singleValue:e=>({...e,fontSize:".75rem",fontWeight:"400",color:"#ffffff",margin:0,textAlign:"center"}),valueContainer:e=>({...e,padding:0}),indicatorsContainer:e=>({...e}),dropdownIndicator:e=>({...e,padding:0,color:"#ffffff"})};var d=a(72096);const m=function(e){let{value:t,onChange:a,option:n,onSelect:s}=e;const{currencyType:o}=(0,l.d4)((e=>e.currency)),m=[{value:o,label:o},{value:"%",label:"%"}];return(0,i.jsxs)("div",{className:"flex w-[11.75rem] border border-warning-500 rounded-[0.25rem] outline outline-transparent outline-0 focus-within:outline-2 focus-within:outline-warning-500 transition-all ease-in-out duration-100 relative",children:[(0,i.jsx)("input",{className:"w-[8.6875rem] placeholder-blue-200 py-[0.3125rem] px-[.3125rem] rounded-l-[0.25rem] outline-0 text-sm text-right transition-all ease-in-out duration-100",placeholder:"".concat((0,d.t)("misol"),": 100 000 000"),type:"number",value:t,onChange:e=>{a(e.target.value)},onWheel:e=>e.target.blur(),min:0}),(0,i.jsx)(r.Ay,{onChange:s,styles:u,isSearchable:!1,value:n,options:m,components:{IndicatorSeparator:()=>null,DropdownIndicator:c}})]})},h=e=>{let{value:t,onChange:a,option:n,onSelect:s}=e;return(0,i.jsxs)("div",{className:"flex justify-between w-full items-center mb-[1rem]",children:[(0,i.jsxs)("div",{className:"text-black-700 text-[0.875rem]",children:[(0,d.t)("Chegirma")," :"]}),(0,i.jsx)(m,{onChange:a,onSelect:s,value:t,option:n})]})};var b=a(66899);const p=e=>{let{onClick:t}=e;return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("button",{onClick:t,className:"exitbtn",children:(0,i.jsx)(n.FyX,{size:"0.75rem"})})})};const x=function(e){let{mix:t,value:a,onChange:n,label:s,onClose:l,keyInput:r,placeholder:o,type:c,disabled:u}=e;return(0,i.jsxs)("li",{className:"custom-payment-ul-li",children:[(0,i.jsxs)("span",{className:"custom-payment-text-style",children:[s," :"]}),(0,i.jsxs)("div",{className:"flex items-center w-[11.75rem] gap-[0.625rem]",children:[(0,i.jsx)(b.A,{placeholder:o||"".concat((0,d.t)("misol"),": 100 000 000"),type:c||"number",value:a,disabled:u,onChange:e=>{n(e.target.value,r)}}),t&&(0,i.jsx)(p,{onClick:()=>l(r)})]})]})};var g=a(73216),f=a(9762);const y=function(e){let{returned:t,active:a,togglePaymentModal:r,hasCalendar:o,hiddenDebt:c,type:u="cash",showPayEndDate:m,cash:b="",card:p="",transfer:y="",hiddenMixed:N,discount:v,hasDiscount:C,hasDiscountBtn:j,debt:k,allPayment:S,paid:w=0,client:D="",onChange:P,onClose:z,changePaymentType:I,discountSelectOption:T,handleClickDiscountBtn:A,handleChangeDiscountSelectOption:O,handleChangeDiscount:q,handleClickPay:M,clickdelay:B,disableInputsCashCard:Q,payEndDate:F,handlePayEndDateChange:R,disablePayButton:U}=e;const E=(0,g.zy)(),G=()=>{switch(u){case"card":return(0,i.jsx)(x,{value:p,keyInput:u,onChange:P,onClose:z,disabled:Q,label:(0,d.t)("Plastik")},"sale-card1");case"transfer":return(0,i.jsx)(x,{value:y,keyInput:u,onChange:P,onClose:z,disabled:Q,label:(0,d.t)("O`tkazma")},"sale-transfer");case"mixed":return[{label:(0,d.t)("Naqd"),key:"cash",value:b},{label:(0,d.t)("Plastik"),key:"card",value:p},{label:(0,d.t)("O`tkazma"),key:"transfer",value:y}].map((e=>(0,i.jsx)(x,{value:e.value,keyInput:e.key,onChange:P,onClose:z,label:(0,d.t)(e.label)},"sale-".concat(e.key))));default:return(0,i.jsx)(x,{disabled:Q,value:b,onChange:P,keyInput:u,onClose:z,label:(0,d.t)("Naqd")},"sale-cash")}},{currencyType:L}=(0,l.d4)((e=>e.currency));return(0,i.jsxs)("section",{className:"fixed transition-all left-0 top-0 right-0 bottom-0 overflow-hidden duration-200 ease-out bg-black-300 backdrop-blur-[3px] z-20 ".concat(a?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"),onClick:r,children:[(0,i.jsx)("h3",{className:"text-white-900 text-lg leading-[1.875rem absolute top-[50%] left-[35%] -translate-x-[50%]",children:(0,d.t)("")}),(0,i.jsxs)("div",{className:"customerPay-head-style transition-all duration-200 ease-linear h-full overflow-auto absolute top-0 bottom-0 right-0 ".concat(a?"translate-x-0":"translate-x-full"),onClick:e=>e.stopPropagation(),autoFocus:!0,children:[(0,i.jsxs)("div",{className:"top-payment w-full",children:[D&&(0,i.jsxs)("div",{className:"customer-head-icon",children:[(0,i.jsxs)("div",{className:"flex items-center custom-payment-text-style",children:[(0,i.jsx)(n.uSr,{className:"mr-[0.75rem]"}),(0,i.jsxs)("span",{children:[(0,d.t)("Mijoz")," : "]})]}),(0,i.jsx)("h3",{className:"text-[0.875rem]",children:D})]}),(0,i.jsxs)("div",{className:"mb-[1.25rem] font-medium text-[1.25rem] text-center leading-[23.44px]",children:[null===S||void 0===S?void 0:S.toLocaleString("ru-Ru")," ",L]}),(0,i.jsxs)("ul",{className:"w-full pb-[1.25rem]",children:[!t&&G(),(E.pathname.includes("/kassa/debts")||E.pathname.includes("/qarzdorlar")||E.pathname.includes("/maxsulotlar/qabul/qabulqilish")||E.pathname.includes("/maxsulotlar/qabul/qabullar"))&&G(),C&&(0,i.jsx)(h,{value:v,onChange:q,option:T,onSelect:O}),m&&(0,i.jsxs)("li",{className:"custom-payment-ul-li justify-between flex gap-x-5",children:[(0,i.jsxs)("span",{className:"custom-payment-text-style",children:[(0,d.t)("To'lov sanasi"),":"]}),(0,i.jsx)(f.A,{onChange:R,value:F,placeholder:"To'lov sanasi",disableIcon:!0})]}),c?null:(0,i.jsxs)("li",{className:"custom-payment-ul-li",children:[(0,i.jsxs)("span",{className:"custom-payment-text-style",children:[(0,d.t)("Qarzlar")," :"," "]}),(0,i.jsxs)("h3",{className:"text-error-500 text-[1rem]",children:[k.toLocaleString("ru-Ru")," ",L]})]}),(0,i.jsxs)("li",{className:"custom-payment-ul-li",children:[(0,i.jsxs)("span",{className:"custom-payment-text-style",children:[S<0?(0,d.t)("Qaytarilayotgan"):(0,d.t)("To`lanayotgan")," ",":"," "]}),(0,i.jsxs)("h3",{className:"text-[1rem] text-loginButton",children:[null===w||void 0===w?void 0:w.toLocaleString("ru-Ru")," ",L]})]})]})]}),(0,i.jsxs)("div",{className:"bottom-payment w-full flex flex-col gap-[1.25rem] border-t-[1px] border-black-200 pt-[1.25rem]",children:[(0,i.jsxs)("div",{className:"custom-paymet-btn",children:[(0,i.jsx)(s.Gv,{text:(0,d.t)("Naqd"),type:"cash",active:"cash"===u,onClick:I}),(0,i.jsx)(s.Gv,{text:(0,d.t)("Plastik"),type:"card",active:"card"===u,onClick:I}),(0,i.jsx)(s.Gv,{text:(0,d.t)("O'tkazma"),type:"transfer",active:"transfer"===u,onClick:I}),!t||N&&(0,i.jsx)(s.Gv,{text:(0,d.t)("Aralash"),type:"mixed",active:"mixed"===u,onClick:I}),E.pathname.includes("/kassa/debts")&&(0,i.jsx)(s.Gv,{text:(0,d.t)("Aralash"),type:"mixed",active:"mixed"===u,onClick:I})]}),!t&&j&&(0,i.jsx)(s.eV,{text:(0,d.t)("Chegirma"),onClick:A}),(0,i.jsx)(s.p2,{text:(0,d.t)("To'lash"),disablePayButton:B,loading:B,onClick:B?()=>console.log("wait"):M})]})]})]})}},7341:(e,t,a)=>{a.r(t),a.d(t,{default:()=>f});var n=a(65043),s=a(79456),l=a(73216),r=a(30200),o=a(31204),i=a(12602),c=a(54964),u=a(70126),d=a(37424),m=a(18446),h=a(73734),b=a(37919),p=a(70486),x=a(72096),g=a(70579);const f=()=>{const{id:e}=(0,l.g)(),t=(0,s.wA)(),{user:a}=(0,s.d4)((e=>e.login)),{currencyType:f,currency:y}=(0,s.d4)((e=>e.currency)),{incomingconnectors:N,connectorscount:v}=(0,s.d4)((e=>e.suppliers)),[C,j]=(0,n.useState)([]),[k,S]=(0,n.useState)(0),[w,D]=(0,n.useState)(10),[P,z]=(0,n.useState)(new Date((new Date).getFullYear(),(new Date).getMonth(),1).toISOString()),[I,T]=(0,n.useState)(new Date((new Date).setHours(23,59,59,0)).toISOString()),[A,O]=(0,n.useState)(!1),[q,M]=(0,n.useState)("cash"),[B,Q]=(0,n.useState)(""),[F,R]=(0,n.useState)(""),[U,E]=(0,n.useState)(""),[G,L]=(0,n.useState)(""),[W,H]=(0,n.useState)(""),[V,_]=(0,n.useState)(""),[X,Y]=(0,n.useState)(0),[J,K]=(0,n.useState)(0),[Z,$]=(0,n.useState)(0),[ee,te]=(0,n.useState)(0),[ae,ne]=(0,n.useState)(0),[se,le]=(0,n.useState)(0),[re,oe]=(0,n.useState)("approve"),[ie,ce]=(0,n.useState)(!1),[ue,de]=(0,n.useState)(y),[me,he]=(0,n.useState)(""),[be,pe]=(0,n.useState)("");let xe=null;const ge=e=>Math.round(1e3*e)/1e3,fe=e=>Math.round(e),ye=e=>{O(e?!A:e),M("cash"),Y(0),K(0)},Ne=(e,t)=>{const a=Math.abs(Z),n=Math.abs(ee);if("USD"===f)if("cash"===t){const t=Number(e)+Number(U)+Number(W),s=Number((0,r.IQ)(e,ue))+Number(G)+Number(V);t<=a?(Q(e),R((0,r.IQ)(e,ue)),Y(ge(a-t)),K(fe(n-s)),ne(t),le(s)):(0,h.OC)()}else if("card"===t){const t=Number(e)+Number(B)+Number(W),s=Number(F)+Number((0,r.IQ)(e,ue))+Number(V);t<=a?(E(e),L((0,r.IQ)(e,ue)),Y(ge(a-t)),K(fe(n-s)),ne(t),le(s)):(0,h.OC)()}else{const t=Number(e)+Number(B)+Number(U),s=Number(F)+Number(G)+Number((0,r.IQ)(e,ue));t<=a?(H(e),_((0,r.IQ)(e,ue)),Y(ge(a-t)),K(fe(n-s)),ne(t),le(s)):(0,h.OC)()}else if("cash"===t){const t=Number(e)+Number(G)+Number(V),s=Number((0,r.Ch)(e,ue))+Number(U)+Number(W);t<=n?(R(e),Q((0,r.Ch)(e,ue)),Y(ge(a-s)),K(fe(n-t)),ne(s),le(t)):(0,h.OC)()}else if("card"===t){const t=Number(e)+Number(F)+Number(V),s=Number(B)+Number((0,r.Ch)(e,ue))+Number(W);t<=n?(E((0,r.Ch)(e,ue)),L(e),Y(ge(a-s)),K(fe(n-t)),ne((0,r.Ch)(t,ue)),le(t)):(0,h.OC)()}else{const t=Number(e)+Number(F)+Number(G),s=Number(B)+Number(U)+Number((0,r.Ch)(e,ue));t<=n?(H((0,r.Ch)(e,ue)),_(e),Y(ge(a-s)),K(fe(n-t)),ne(s),le(t)):(0,h.OC)()}},ve=()=>{const n=e=>e<0&&e||-1*e,s={payment:{payment:Number(Z<0?n(B):B)+Number(Z<0?n(U):U)+Number(Z<0?n(W):W),paymentuzs:Number(Z<0?n(F):F)+Number(Z<0?n(G):G)+Number(Z<0?W<0&&n(V):V),type:q,cash:Number(Z<0?n(B):B),cashuzs:Number(ee<0?n(F):F),card:Number(Z<0?n(U):U),carduzs:Number(Z<0?n(G):G),transfer:Number(Z<0?n(W):W),transferuzs:Number(Z<0?n(V):V),comment:me},user:a._id,incomingconnectorid:be};t((0,b.IH)(s)).then((a=>{let{error:n}=a;n||(t((0,p.A8)({supplierid:e,startDate:P,endDate:I,currentPage:k,countPage:w})),ce(!1),oe(""),ye())}))};(0,n.useEffect)((()=>{let a={supplierid:e,startDate:P,endDate:I,currentPage:k,countPage:w};t((0,p.A8)(a))}),[t,P,I,k,w,e]),(0,n.useEffect)((()=>{j(N)}),[N]);const Ce=[{title:"\u2116"},{title:(0,x.t)("Sana")},{title:(0,x.t)("Vaqti")},{title:(0,x.t)("ID")},{title:(0,x.t)("Mahsulot turi")},{title:(0,x.t)("Soni")},{title:(0,x.t)("Umumiy")},{title:(0,x.t)("To'langan")},{title:(0,x.t)("Qarz")},{title:""}];return(0,g.jsxs)("div",{className:"relative grow overflow-hidden h-full",children:[(0,g.jsx)("div",{className:"mainPadding",children:(0,g.jsx)(o.A,{link:"/hamkorlar/yetkazuvchilar"})}),(0,g.jsxs)("div",{className:"flex items-center",children:[(0,g.jsx)(d.A,{filterBy:["total","startDate","endDate"],filterByTotal:e=>D(e.value),startDate:new Date(P),endDate:new Date(I),setStartDate:z,setEndDate:T}),(0,g.jsx)(c.A,{currentPage:k,setCurrentPage:S,countPage:w,totalDatas:v||1})]}),(0,g.jsx)("div",{className:"tableContainerPadding",children:C.length>0&&(0,g.jsx)(m.A,{page:"incomingsupplier",currentPage:k,countPage:w,currency:f,headers:Ce,data:C,Pay:e=>{const t=e.debt,a=e.debtuzs;pe(e._id),$(t),te(a),Q(t),R(a),ne(t),le(a),O(!0),de(fe(a/t)),O(!0)}})}),(0,g.jsx)(u.A,{returned:!0,type:q,active:A,togglePaymentModal:ye,changePaymentType:e=>{if(q!==e)switch(M(e),e){case"cash":Q(Z),R(ee),E(""),L(""),H(""),_(""),ne(Z),le(ee),Y(0),K(0);break;case"card":E(Z),L(ee),Q(""),R(""),H(""),_(""),ne(Z),le(ee),Y(0),K(0);break;case"transfer":H(Z),_(ee),Q(""),R(""),E(""),L(""),ne(Z),le(ee),Y(0),K(0);break;default:Q(""),R(""),E(""),L(""),H(""),_(""),ne(0),le(0),Y(Z),K(ee)}},onChange:(e,t)=>{Ne(e,t)},allPayment:"USD"===f?Z:ee,card:"USD"===f?U:G,cash:"USD"===f?B:F,debt:"USD"===f?X:J,hasDiscount:!1,transfer:"USD"===f?W:V,paid:"USD"===f?ae:se,handleClickPay:()=>{null===xe&&(xe=window.setTimeout((()=>{xe=null,oe("complete"),ce(!0)}),300))},changeComment:e=>{he(e)},saleComment:me,onDoubleClick:()=>{window.clearTimeout(xe),xe=null,ve()}}),(0,g.jsx)(i.A,{body:re,isOpen:ie,headerText:"To'lovni amalga oshirishni tasdiqlaysizmi ?",title:"To'lovni amalga oshirgach bu ma`lumotlarni o`zgaritirb bo`lmaydi !",approveFunction:ve,toggleModal:()=>{ce(!ie),setTimeout((()=>{oe("")}),500)}})]})}}}]);
//# sourceMappingURL=1233.0ea27334.chunk.js.map