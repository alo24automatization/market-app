"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[2440,1181],{70126:(e,t,a)=>{a.d(t,{A:()=>y});var n=a(90221),l=a(26441),s=(a(65043),a(79456)),r=a(2364),o=a(57290),i=a(70579);const c=e=>(0,i.jsx)(o.c.DropdownIndicator,{...e,children:(0,i.jsx)(n.QDT,{size:"0.625rem"})}),u={control:e=>({...e,borderTopRightRadius:".125rem",borderBottomRightRadius:".125rem",borderTopLeftRadius:"0",borderBottomLeftRadius:"0",fontSize:"0.75rem",fontWeight:"400",padding:"0.375rem 0.3125rem",color:"#071F45",outline:"none",border:"none",boxShadow:"none",cursor:"pointer",height:"100%",backgroundColor:"#F79009",minHeight:"100%","&:hover":{backgroundColor:"#DC6803"}}),container:e=>({...e,height:"100%",position:"absolute",right:0,width:"3rem",top:0,bottom:0}),option:(e,t)=>{let{isFocused:a,isSelected:n}=t;return{...e,fontSize:".75rem",fontWeight:"400",color:n||a?"#ffffff":"#071F45",backgroundColor:n?"#0090A3":a?"#00B4CC":"#ffffff",transition:"all 0.2s ease",overflow:"hidden",cursor:"pointer",textAlign:"center"}},menu:e=>({...e,overflow:"hidden"}),singleValue:e=>({...e,fontSize:".75rem",fontWeight:"400",color:"#ffffff",margin:0,textAlign:"center"}),valueContainer:e=>({...e,padding:0}),indicatorsContainer:e=>({...e}),dropdownIndicator:e=>({...e,padding:0,color:"#ffffff"})};var d=a(72096);const m=function(e){let{value:t,onChange:a,option:n,onSelect:l}=e;const{currencyType:o}=(0,s.d4)((e=>e.currency)),m=[{value:o,label:o},{value:"%",label:"%"}];return(0,i.jsxs)("div",{className:"flex w-[11.75rem] border border-warning-500 rounded-[0.25rem] outline outline-transparent outline-0 focus-within:outline-2 focus-within:outline-warning-500 transition-all ease-in-out duration-100 relative",children:[(0,i.jsx)("input",{className:"w-[8.6875rem] placeholder-blue-200 py-[0.3125rem] px-[.3125rem] rounded-l-[0.25rem] outline-0 text-sm text-right transition-all ease-in-out duration-100",placeholder:"".concat((0,d.t)("misol"),": 100 000 000"),type:"number",value:t,onChange:e=>{a(e.target.value)},onWheel:e=>e.target.blur(),min:0}),(0,i.jsx)(r.Ay,{onChange:l,styles:u,isSearchable:!1,value:n,options:m,components:{IndicatorSeparator:()=>null,DropdownIndicator:c}})]})},h=e=>{let{value:t,onChange:a,option:n,onSelect:l}=e;return(0,i.jsxs)("div",{className:"flex justify-between w-full items-center mb-[1rem]",children:[(0,i.jsxs)("div",{className:"text-black-700 text-[0.875rem]",children:[(0,d.t)("Chegirma")," :"]}),(0,i.jsx)(m,{onChange:a,onSelect:l,value:t,option:n})]})};var b=a(66899);const p=e=>{let{onClick:t}=e;return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("button",{onClick:t,className:"exitbtn",children:(0,i.jsx)(n.FyX,{size:"0.75rem"})})})};const x=function(e){let{mix:t,value:a,onChange:n,label:l,onClose:s,keyInput:r,placeholder:o,type:c,disabled:u}=e;return(0,i.jsxs)("li",{className:"custom-payment-ul-li",children:[(0,i.jsxs)("span",{className:"custom-payment-text-style",children:[l," :"]}),(0,i.jsxs)("div",{className:"flex items-center w-[11.75rem] gap-[0.625rem]",children:[(0,i.jsx)(b.A,{placeholder:o||"".concat((0,d.t)("misol"),": 100 000 000"),type:c||"number",value:a,disabled:u,onChange:e=>{n(e.target.value,r)}}),t&&(0,i.jsx)(p,{onClick:()=>s(r)})]})]})};var f=a(73216),N=a(9762);const y=function(e){let{returned:t,active:a,togglePaymentModal:r,hasCalendar:o,hiddenDebt:c,type:u="cash",showPayEndDate:m,cash:b="",card:p="",transfer:y="",hiddenMixed:g,discount:v,hasDiscount:C,hasDiscountBtn:S,debt:j,allPayment:k,paid:D=0,client:w="",onChange:z,onClose:I,changePaymentType:P,discountSelectOption:T,handleClickDiscountBtn:M,handleChangeDiscountSelectOption:A,handleChangeDiscount:O,handleClickPay:U,clickdelay:B,disableInputsCashCard:Q,payEndDate:q,handlePayEndDateChange:R,disablePayButton:F}=e;const L=(0,f.zy)(),E=()=>{switch(u){case"card":return(0,i.jsx)(x,{value:p,keyInput:u,onChange:z,onClose:I,disabled:Q,label:(0,d.t)("Plastik")},"sale-card1");case"transfer":return(0,i.jsx)(x,{value:y,keyInput:u,onChange:z,onClose:I,disabled:Q,label:(0,d.t)("O`tkazma")},"sale-transfer");case"mixed":return[{label:(0,d.t)("Naqd"),key:"cash",value:b},{label:(0,d.t)("Plastik"),key:"card",value:p},{label:(0,d.t)("O`tkazma"),key:"transfer",value:y}].map((e=>(0,i.jsx)(x,{value:e.value,keyInput:e.key,onChange:z,onClose:I,label:(0,d.t)(e.label)},"sale-".concat(e.key))));default:return(0,i.jsx)(x,{disabled:Q,value:b,onChange:z,keyInput:u,onClose:I,label:(0,d.t)("Naqd")},"sale-cash")}},{currencyType:G}=(0,s.d4)((e=>e.currency));return(0,i.jsxs)("section",{className:"fixed transition-all left-0 top-0 right-0 bottom-0 overflow-hidden duration-200 ease-out bg-black-300 backdrop-blur-[3px] z-20 ".concat(a?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"),onClick:r,children:[(0,i.jsx)("h3",{className:"text-white-900 text-lg leading-[1.875rem absolute top-[50%] left-[35%] -translate-x-[50%]",children:(0,d.t)("")}),(0,i.jsxs)("div",{className:"customerPay-head-style transition-all duration-200 ease-linear h-full overflow-auto absolute top-0 bottom-0 right-0 ".concat(a?"translate-x-0":"translate-x-full"),onClick:e=>e.stopPropagation(),autoFocus:!0,children:[(0,i.jsxs)("div",{className:"top-payment w-full",children:[w&&(0,i.jsxs)("div",{className:"customer-head-icon",children:[(0,i.jsxs)("div",{className:"flex items-center custom-payment-text-style",children:[(0,i.jsx)(n.uSr,{className:"mr-[0.75rem]"}),(0,i.jsxs)("span",{children:[(0,d.t)("Mijoz")," : "]})]}),(0,i.jsx)("h3",{className:"text-[0.875rem]",children:w})]}),(0,i.jsxs)("div",{className:"mb-[1.25rem] font-medium text-[1.25rem] text-center leading-[23.44px]",children:[null===k||void 0===k?void 0:k.toLocaleString("ru-Ru")," ",G]}),(0,i.jsxs)("ul",{className:"w-full pb-[1.25rem]",children:[!t&&E(),(L.pathname.includes("/kassa/debts")||L.pathname.includes("/qarzdorlar")||L.pathname.includes("/maxsulotlar/qabul/qabulqilish")||L.pathname.includes("/maxsulotlar/qabul/qabullar"))&&E(),C&&(0,i.jsx)(h,{value:v,onChange:O,option:T,onSelect:A}),m&&(0,i.jsxs)("li",{className:"custom-payment-ul-li justify-between flex gap-x-5",children:[(0,i.jsxs)("span",{className:"custom-payment-text-style",children:[(0,d.t)("To'lov sanasi"),":"]}),(0,i.jsx)(N.A,{onChange:R,value:q,placeholder:"To'lov sanasi",disableIcon:!0})]}),c?null:(0,i.jsxs)("li",{className:"custom-payment-ul-li",children:[(0,i.jsxs)("span",{className:"custom-payment-text-style",children:[(0,d.t)("Qarzlar")," :"," "]}),(0,i.jsxs)("h3",{className:"text-error-500 text-[1rem]",children:[j.toLocaleString("ru-Ru")," ",G]})]}),(0,i.jsxs)("li",{className:"custom-payment-ul-li",children:[(0,i.jsxs)("span",{className:"custom-payment-text-style",children:[k<0?(0,d.t)("Qaytarilayotgan"):(0,d.t)("To`lanayotgan")," ",":"," "]}),(0,i.jsxs)("h3",{className:"text-[1rem] text-loginButton",children:[null===D||void 0===D?void 0:D.toLocaleString("ru-Ru")," ",G]})]})]})]}),(0,i.jsxs)("div",{className:"bottom-payment w-full flex flex-col gap-[1.25rem] border-t-[1px] border-black-200 pt-[1.25rem]",children:[(0,i.jsxs)("div",{className:"custom-paymet-btn",children:[(0,i.jsx)(l.Gv,{text:(0,d.t)("Naqd"),type:"cash",active:"cash"===u,onClick:P}),(0,i.jsx)(l.Gv,{text:(0,d.t)("Plastik"),type:"card",active:"card"===u,onClick:P}),(0,i.jsx)(l.Gv,{text:(0,d.t)("O'tkazma"),type:"transfer",active:"transfer"===u,onClick:P}),!t&&(0,i.jsx)(l.Gv,{text:(0,d.t)("Aralash"),type:"mixed",active:"mixed"===u,onClick:P}),L.pathname.includes("/kassa/debts")&&(0,i.jsx)(l.Gv,{text:(0,d.t)("Aralash"),type:"mixed",active:"mixed"===u,onClick:P})]}),!t&&S&&(0,i.jsx)(l.eV,{text:(0,d.t)("Chegirma"),onClick:M}),(0,i.jsx)(l.p2,{text:(0,d.t)("To'lash"),disablePayButton:B,loading:B,onClick:B?()=>console.log("wait"):U})]})]})]})}},45018:(e,t,a)=>{a.r(t),a.d(t,{default:()=>p});var n=a(65043),l=a(79456),s=a(30200),r=a(12602),o=a(70126),i=a(37424),c=a(18446),u=a(73734),d=a(66752),m=a(53536),h=a(72096),b=a(70579);const p=()=>{const e=(0,l.wA)(),{datas:t}=(0,l.d4)((e=>e.reports)),{currencyType:a,currency:p}=(0,l.d4)((e=>e.currency)),{user:x}=(0,l.d4)((e=>e.login)),[f,N]=(0,n.useState)([]),[y,g]=(0,n.useState)([]),[v,C]=(0,n.useState)(!1),[S,j]=(0,n.useState)(!1),[k,D]=(0,n.useState)("cash"),[w,z]=(0,n.useState)(""),[I,P]=(0,n.useState)(""),[T,M]=(0,n.useState)(""),[A,O]=(0,n.useState)(""),[U,B]=(0,n.useState)(""),[Q,q]=(0,n.useState)(""),[R,F]=(0,n.useState)(""),[L,E]=(0,n.useState)(""),[G,H]=(0,n.useState)(""),[W,Z]=(0,n.useState)(!1),[J,V]=(0,n.useState)(null),[_,K]=(0,n.useState)(""),[X,Y]=(0,n.useState)({label:"%",value:"%"}),[$,ee]=(0,n.useState)(0),[te,ae]=(0,n.useState)(0),[ne,le]=(0,n.useState)(0),[se,re]=(0,n.useState)(0),[oe,ie]=(0,n.useState)(0),[ce,ue]=(0,n.useState)(0),[de,me]=(0,n.useState)(""),[he,be]=(0,n.useState)(null),[pe,xe]=(0,n.useState)(null),fe=e=>{j(e?!S:e),D("cash"),Z(!1),F(""),E(""),H(""),ee(0),ae(0),Y({label:"%",value:"%"})},Ne=e=>Math.round(1e3*e)/1e3,ye=e=>Math.round(e),ge=()=>{C(!1),setTimeout((()=>{me("")}),500)},[ve,Ce]=(0,n.useState)(new Date((new Date).setMonth((new Date).getMonth()-3))),[Se,je]=(0,n.useState)(new Date);(0,n.useEffect)((()=>{e((0,d.N7)({startDate:ve,endDate:Se}))}),[e,ve,Se]),(0,n.useEffect)((()=>{g(t),N(t)}),[t]);const ke=[{title:"\u2116"},{title:(0,h.t)("Sana"),filter:"createdAt"},{title:(0,h.t)("ID")},{title:(0,h.t)("Mijoz"),filter:"client"},{title:(0,h.t)("Telefon")},{title:(0,h.t)("Qarz izoh")},{title:(0,h.t)("To'lov sanasi")},{title:(0,h.t)("Jami")},{title:(0,h.t)("Qarz")},{title:""}];return(0,b.jsxs)("div",{className:"relative overflow-auto h-full pt-[10px]",children:[(0,b.jsx)("div",{className:"flex items-center justify-between",children:(0,b.jsx)(i.A,{filterBy:["startDate","endDate","id","clientName","clientPhoneNumber"],filterById:e=>{g([...(0,m.filter)([...f],(t=>t.id.includes(e.target.value)))])},filterByClientName:e=>{g([...(0,m.filter)([...f],(t=>t.client&&t.client.name.toLowerCase().includes(e.target.value.toLowerCase())))])},filterByClientPhoneNumber:e=>{g([...(0,m.filter)([...f],(t=>t.client&&t.client.phoneNumber.includes(e.target.value.toLowerCase())))])},startDate:ve,endDate:Se,setStartDate:e=>{Ce(new Date(e.setHours(0,0,0)))},setEndDate:e=>{je(new Date(e.setHours(23,59,59)))}})}),(0,b.jsx)("div",{className:"tableContainerPadding",children:y.length>0&&(0,b.jsx)(c.A,{salerDebts:!0,page:"debts",headers:ke,data:y,currency:a,Pay:e=>{const t=e.debt,a=e.debtuzs;le(t),re(a),z(t),P(a),ie(t),ue(a),V(e._id),j(!0)},Print:e=>{me("allChecks"),xe(e),C(!0)}})}),(0,b.jsx)("div",{children:(0,b.jsx)(o.A,{disableInputsCashCard:!0,returned:!0,type:k,active:S,togglePaymentModal:fe,changePaymentType:e=>{const t=ne-Number(R),a=se-Number(L);if(k!==e)switch(D(e),e){case"cash":z(t),P(a),M(""),O(""),B(""),q(""),ie(t),ue(a),ee(0),ae(0);break;case"card":M(t),O(a),z(""),P(""),B(""),q(""),ie(t),ue(a),ee(0),ae(0);break;case"transfer":B(t),q(a),z(""),P(""),M(""),O(""),ie(t),ue(a),ee(0),ae(0);break;default:z(""),P(""),M(""),O(""),B(""),q(""),ie(0),ue(0),ee(ne-Number(R)),ae(se-Number(L))}},onChange:(e,t)=>{((e,t)=>{const n=ne-Number(R),l=se-Number(L);if("USD"===a)if("cash"===t){const t=Number(e)+Number(T)+Number(U),a=Number(I)+Number(A)+Number(Q);t<=n?(z(e),P((0,s.IQ)(e,p)),ee(Ne(n-t)),ae((0,s.IQ)(n-t,p)),ie(t),ue(a)):(0,u.OC)()}else if("card"===t){const t=Number(e)+Number(w)+Number(U),a=Number(I)+Number(A)+Number(Q);t<=n?(M(e),O((0,s.IQ)(e,p)),ee(Ne(n-t)),ae((0,s.IQ)(n-t,p)),ie(t),ue(a)):(0,u.OC)()}else{const t=Number(e)+Number(w)+Number(T),a=Number(I)+Number(A)+Number(Q);t<=n?(B(e),q((0,s.IQ)(e,p)),ee(Ne(n-t)),ae((0,s.IQ)(n-t,p)),ie(t),ue(a)):(0,u.OC)()}else if("cash"===t){const t=Number(e)+Number(A)+Number(Q),a=Number(w)+Number(T)+Number(U);t<=l?(P(e),z((0,s.Ch)(e,p)),ee((0,s.Ch)(l-t,p)),ae(ye(l-t)),ie(a),ue(t)):(0,u.OC)()}else if("card"===t){const t=Number(e)+Number(I)+Number(Q);t<=l?(M((0,s.Ch)(e,p)),O(e),ee((0,s.Ch)(l-t,p)),ae(ye(l-t)),ie((0,s.Ch)(t,p)),ue(t)):(0,u.OC)()}else{const t=Number(e)+Number(I)+Number(A),a=Number(w)+Number(T)+Number(U);t<=l?(B((0,s.Ch)(e,p)),q(e),ee((0,s.Ch)(l-t,p)),ae(ye(l-t)),ie(a),ue(t)):(0,u.OC)()}})(e,t)},client:_,allPayment:"USD"===a?ne:se,card:"USD"===a?T:A,cash:"USD"===a?w:I,debt:"USD"===a?$:te,discount:"USD"===a?"USD"===X.value?R:G:"UZS"===X.value?L:G,handleChangeDiscount:e=>{const t=Math.round(5*ne/100*10)/10,a=Math.round(5*se/100*10)/10;if("USD"===X.value)e>t?(0,u.nN)("".concat(t," USD")):(F(e),E((0,s.IQ)(e,p)),H(Math.round(ne*e/100*10)/10),ee(ne-e),ae((0,s.IQ)(ne-e,p)));else if("UZS"===X.value)e>a?(0,u.nN)("".concat(a," UZS")):(E(e),F((0,s.Ch)(e,p)),H(Math.round(se*e/100*10)/10),ee((0,s.Ch)(se-e,p)),ae(se-e));else if(e>5)(0,u.nN)("5%");else{const t=Math.round(ne*e/100*10)/10,a=Math.round(se*e/100*10)/10;H(e),F(t),E(a),ee(Ne(ne-t)),ae(ye(se-a)),ie(ne-t),ue(se-a)}z(""),P(""),M(""),O(""),B(""),q(""),ie(0),ue(0)},hasDiscount:W,transfer:"USD"===a?U:Q,handleClickDiscountBtn:()=>{Z(!W),"cash"===k?(z(ne),P(se),ie(ne),ue(se)):"card"===k?(M(ne),O(se),ie(ne),ue(se)):"transfer"===k?(B(ne),q(se),ie(ne),ue(se)):(z(""),P(""),M(""),O(""),B(""),q(""),ie(0),ue(0),ee(ne),ae(se)),F(""),E(""),H("")},discountSelectOption:X,handleChangeDiscountSelectOption:e=>{X.value!==e.value&&(Y(e),F(""),E(""),H(""),z(""),P(""),M(""),O(""),B(""),q(""),ee(ne),ae(se),ie(0),ue(0))},paid:"USD"===a?oe:ce,handleClickPay:()=>{me("complete"),C(!0)}})}),(0,b.jsx)(r.A,{body:de,toggleModal:"sell"===de?()=>{me(""),C(!v),setTimeout((()=>{}),500)}:"complete"===de?ge:()=>{C(!v),me(""),be(null)},approveFunction:()=>{ge();const t={payment:{totalprice:Number(ne),totalpriceuzs:Number(se),type:k,cash:Number(w),cashuzs:Number(I),card:Number(T),carduzs:Number(A),transfer:Number(U),transferuzs:Number(Q),discount:Number(R),discountuzs:Number(L)},user:x._id,saleconnectorid:J};e((0,d.IH)(t)).then((t=>{let{payload:a}=t;const n=new Date((new Date).setMonth((new Date).getMonth()-3)),l=new Date;be(a),e((0,d.N7)({startDate:n,endDate:l})),setTimeout((()=>{var e;me("checkPayment"),C(!0),z(""),P(""),M(""),O(""),B(""),q(""),ee(0),ae(0),ie(0),ue(0),K(""),V(null),fe(e)}),500)}))},isOpen:v,payment:he,headers:[{title:"\u2116"},{title:"Kodi"},{title:"Nomi"},{title:"Soni"},{title:"Narxi"},{title:"Jami",styles:"w-[10rem]"},{title:""}],printedSelling:pe,headerText:"complete"===de&&"To'lovni amalga oshirishni tasdiqlaysizmi ?",title:"complete"===de&&"To'lovni amalga oshirgach bu ma`lumotlarni o`zgaritirb bo`lmaydi !"})]})}}}]);
//# sourceMappingURL=2440.2f2e8a66.chunk.js.map