"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[2660,1181],{98668:(e,t,l)=>{l.d(t,{A:()=>s});var a=l(72096),i=l(90221),r=l(70579);const s=function(e){let{id:t,title:l,code:s,products:n,activeCategory:c,onClick:o}=e;return(0,r.jsxs)("div",{className:"category-card ".concat(c?"active-category":""),onClick:()=>o(t),children:[(0,r.jsx)("h1",{className:"text-black-700 text-base leading-[1.5625rem]",children:l||(0,a.t)("Nomsiz kategoriya")}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsxs)("div",{className:"flex gap-[0.3125rem] items-center",children:[(0,r.jsxs)("p",{className:"footer-text",children:[(0,a.t)("Kodi")," :"]}),(0,r.jsx)("span",{className:"block rounded-[3.125rem] bg-warning-500 py-[0.125rem] px-[0.625rem] text-xs leading-[0.875rem] text-white-900",children:s||0})]}),(0,r.jsxs)("div",{className:"flex gap-[0.3125rem] items-center",children:[(0,r.jsxs)("p",{className:"footer-text",children:[(0,a.t)("Maxsulot turlari")," :"]}),(0,r.jsx)("span",{className:"block rounded-[3.125rem] bg-success-400 py-[0.125rem] px-[0.625rem] text-xs leading-[0.875rem] text-white-900",children:n||0})]})]}),(0,r.jsx)("div",{className:"category-card-checkmark",children:(0,r.jsx)(i.KDk,{size:"1rem",className:"check-icon"})})]})}},70126:(e,t,l)=>{l.d(t,{A:()=>f});var a=l(90221),i=l(26441),r=(l(65043),l(79456)),s=l(2364),n=l(57290),c=l(70579);const o=e=>(0,c.jsx)(n.c.DropdownIndicator,{...e,children:(0,c.jsx)(a.QDT,{size:"0.625rem"})}),u={control:e=>({...e,borderTopRightRadius:".125rem",borderBottomRightRadius:".125rem",borderTopLeftRadius:"0",borderBottomLeftRadius:"0",fontSize:"0.75rem",fontWeight:"400",padding:"0.375rem 0.3125rem",color:"#071F45",outline:"none",border:"none",boxShadow:"none",cursor:"pointer",height:"100%",backgroundColor:"#F79009",minHeight:"100%","&:hover":{backgroundColor:"#DC6803"}}),container:e=>({...e,height:"100%",position:"absolute",right:0,width:"3rem",top:0,bottom:0}),option:(e,t)=>{let{isFocused:l,isSelected:a}=t;return{...e,fontSize:".75rem",fontWeight:"400",color:a||l?"#ffffff":"#071F45",backgroundColor:a?"#0090A3":l?"#00B4CC":"#ffffff",transition:"all 0.2s ease",overflow:"hidden",cursor:"pointer",textAlign:"center"}},menu:e=>({...e,overflow:"hidden"}),singleValue:e=>({...e,fontSize:".75rem",fontWeight:"400",color:"#ffffff",margin:0,textAlign:"center"}),valueContainer:e=>({...e,padding:0}),indicatorsContainer:e=>({...e}),dropdownIndicator:e=>({...e,padding:0,color:"#ffffff"})};var d=l(72096);const m=function(e){let{value:t,onChange:l,option:a,onSelect:i}=e;const{currencyType:n}=(0,r.d4)((e=>e.currency)),m=[{value:n,label:n},{value:"%",label:"%"}];return(0,c.jsxs)("div",{className:"flex w-[11.75rem] border border-warning-500 rounded-[0.25rem] outline outline-transparent outline-0 focus-within:outline-2 focus-within:outline-warning-500 transition-all ease-in-out duration-100 relative",children:[(0,c.jsx)("input",{className:"w-[8.6875rem] placeholder-blue-200 py-[0.3125rem] px-[.3125rem] rounded-l-[0.25rem] outline-0 text-sm text-right transition-all ease-in-out duration-100",placeholder:"".concat((0,d.t)("misol"),": 100 000 000"),type:"number",value:t,onChange:e=>{l(e.target.value)},onWheel:e=>e.target.blur(),min:0}),(0,c.jsx)(s.Ay,{onChange:i,styles:u,isSearchable:!1,value:a,options:m,components:{IndicatorSeparator:()=>null,DropdownIndicator:o}})]})},p=e=>{let{value:t,onChange:l,option:a,onSelect:i}=e;return(0,c.jsxs)("div",{className:"flex justify-between w-full items-center mb-[1rem]",children:[(0,c.jsxs)("div",{className:"text-black-700 text-[0.875rem]",children:[(0,d.t)("Chegirma")," :"]}),(0,c.jsx)(m,{onChange:l,onSelect:i,value:t,option:a})]})};var h=l(66899);const x=e=>{let{onClick:t}=e;return(0,c.jsx)(c.Fragment,{children:(0,c.jsx)("button",{onClick:t,className:"exitbtn",children:(0,c.jsx)(a.FyX,{size:"0.75rem"})})})};const b=function(e){let{mix:t,value:l,onChange:a,label:i,onClose:r,keyInput:s,placeholder:n,type:o,disabled:u}=e;return(0,c.jsxs)("li",{className:"custom-payment-ul-li",children:[(0,c.jsxs)("span",{className:"custom-payment-text-style",children:[i," :"]}),(0,c.jsxs)("div",{className:"flex items-center w-[11.75rem] gap-[0.625rem]",children:[(0,c.jsx)(h.A,{placeholder:n||"".concat((0,d.t)("misol"),": 100 000 000"),type:o||"number",value:l,disabled:u,onChange:e=>{a(e.target.value,s)}}),t&&(0,c.jsx)(x,{onClick:()=>r(s)})]})]})};var g=l(73216),v=l(9762);const f=function(e){let{returned:t,active:l,togglePaymentModal:s,hasCalendar:n,hiddenDebt:o,type:u="cash",showPayEndDate:m,cash:h="",card:x="",transfer:f="",hiddenMixed:N,discount:j,hasDiscount:y,hasDiscountBtn:w,debt:z,allPayment:S,paid:C=0,client:k="",onChange:A,onClose:D,changePaymentType:_,discountSelectOption:U,handleClickDiscountBtn:F,handleChangeDiscountSelectOption:P,handleChangeDiscount:I,handleClickPay:M,clickdelay:O,disableInputsCashCard:T,payEndDate:E,handlePayEndDateChange:Q,disablePayButton:q}=e;const R=(0,g.zy)(),L=()=>{switch(u){case"card":return(0,c.jsx)(b,{value:x,keyInput:u,onChange:A,onClose:D,disabled:T,label:(0,d.t)("Plastik")},"sale-card1");case"transfer":return(0,c.jsx)(b,{value:f,keyInput:u,onChange:A,onClose:D,disabled:T,label:(0,d.t)("O`tkazma")},"sale-transfer");case"mixed":return[{label:(0,d.t)("Naqd"),key:"cash",value:h},{label:(0,d.t)("Plastik"),key:"card",value:x},{label:(0,d.t)("O`tkazma"),key:"transfer",value:f}].map((e=>(0,c.jsx)(b,{value:e.value,keyInput:e.key,onChange:A,onClose:D,label:(0,d.t)(e.label)},"sale-".concat(e.key))));default:return(0,c.jsx)(b,{disabled:T,value:h,onChange:A,keyInput:u,onClose:D,label:(0,d.t)("Naqd")},"sale-cash")}},{currencyType:W}=(0,r.d4)((e=>e.currency));return(0,c.jsxs)("section",{className:"fixed transition-all left-0 top-0 right-0 bottom-0 overflow-hidden duration-200 ease-out bg-black-300 backdrop-blur-[3px] z-20 ".concat(l?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"),onClick:s,children:[(0,c.jsx)("h3",{className:"text-white-900 text-lg leading-[1.875rem absolute top-[50%] left-[35%] -translate-x-[50%]",children:(0,d.t)("")}),(0,c.jsxs)("div",{className:"customerPay-head-style transition-all duration-200 ease-linear h-full overflow-auto absolute top-0 bottom-0 right-0 ".concat(l?"translate-x-0":"translate-x-full"),onClick:e=>e.stopPropagation(),autoFocus:!0,children:[(0,c.jsxs)("div",{className:"top-payment w-full",children:[k&&(0,c.jsxs)("div",{className:"customer-head-icon",children:[(0,c.jsxs)("div",{className:"flex items-center custom-payment-text-style",children:[(0,c.jsx)(a.uSr,{className:"mr-[0.75rem]"}),(0,c.jsxs)("span",{children:[(0,d.t)("Mijoz")," : "]})]}),(0,c.jsx)("h3",{className:"text-[0.875rem]",children:k})]}),(0,c.jsxs)("div",{className:"mb-[1.25rem] font-medium text-[1.25rem] text-center leading-[23.44px]",children:[null===S||void 0===S?void 0:S.toLocaleString("ru-Ru")," ",W]}),(0,c.jsxs)("ul",{className:"w-full pb-[1.25rem]",children:[!t&&L(),(R.pathname.includes("/kassa/debts")||R.pathname.includes("/qarzdorlar")||R.pathname.includes("/maxsulotlar/qabul/qabulqilish")||R.pathname.includes("/maxsulotlar/qabul/qabullar"))&&L(),y&&(0,c.jsx)(p,{value:j,onChange:I,option:U,onSelect:P}),m&&(0,c.jsxs)("li",{className:"custom-payment-ul-li justify-between flex gap-x-5",children:[(0,c.jsxs)("span",{className:"custom-payment-text-style",children:[(0,d.t)("To'lov sanasi"),":"]}),(0,c.jsx)(v.A,{onChange:Q,value:E,placeholder:"To'lov sanasi",disableIcon:!0})]}),o?null:(0,c.jsxs)("li",{className:"custom-payment-ul-li",children:[(0,c.jsxs)("span",{className:"custom-payment-text-style",children:[(0,d.t)("Qarzlar")," :"," "]}),(0,c.jsxs)("h3",{className:"text-error-500 text-[1rem]",children:[z.toLocaleString("ru-Ru")," ",W]})]}),(0,c.jsxs)("li",{className:"custom-payment-ul-li",children:[(0,c.jsxs)("span",{className:"custom-payment-text-style",children:[S<0?(0,d.t)("Qaytarilayotgan"):(0,d.t)("To`lanayotgan")," ",":"," "]}),(0,c.jsxs)("h3",{className:"text-[1rem] text-loginButton",children:[null===C||void 0===C?void 0:C.toLocaleString("ru-Ru")," ",W]})]})]})]}),(0,c.jsxs)("div",{className:"bottom-payment w-full flex flex-col gap-[1.25rem] border-t-[1px] border-black-200 pt-[1.25rem]",children:[(0,c.jsxs)("div",{className:"custom-paymet-btn",children:[(0,c.jsx)(i.Gv,{text:(0,d.t)("Naqd"),type:"cash",active:"cash"===u,onClick:_}),(0,c.jsx)(i.Gv,{text:(0,d.t)("Plastik"),type:"card",active:"card"===u,onClick:_}),(0,c.jsx)(i.Gv,{text:(0,d.t)("O'tkazma"),type:"transfer",active:"transfer"===u,onClick:_}),!t||N&&(0,c.jsx)(i.Gv,{text:(0,d.t)("Aralash"),type:"mixed",active:"mixed"===u,onClick:_}),R.pathname.includes("/kassa/debts")&&(0,c.jsx)(i.Gv,{text:(0,d.t)("Aralash"),type:"mixed",active:"mixed"===u,onClick:_})]}),!t&&w&&(0,c.jsx)(i.eV,{text:(0,d.t)("Chegirma"),onClick:F}),(0,c.jsx)(i.p2,{text:(0,d.t)("To'lash"),disablePayButton:O,loading:O,onClick:O?()=>console.log("wait"):M})]})]})]})}},22662:(e,t,l)=>{l.d(t,{A:()=>r});const a=(0,l(55749).Ay)("http://185.250.207.95/"),i=JSON.parse(localStorage.getItem("userData"));a.auth={token:null===i||void 0===i?void 0:i.token,market:null===i||void 0===i?void 0:i.market};const r=a},21374:(e,t,l)=>{l.r(t),l.d(t,{default:()=>G});var a=l(65043),i=l(47990),r=l(47630),s=l(18446),n=l(79456),c=l(90221),o=l(98668),u=l(78054),d=l(4235),m=l(22963),p=l.n(m),h=l(66899),x=l(53536),b=l(72096),g=l(70579);const v=e=>{let{data:t,Delete:l,changeHandler:i,currency:r,increment:s,decrement:o,lowUnitpriceProducts:u,wholeSale:d,productId:m,productModal:p}=e;const[v,f]=(0,a.useState)(window.innerWidth<=768);(0,a.useEffect)((()=>{const e=()=>{f(window.innerWidth<=768)};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[]);const{filials:N}=(0,n.d4)((e=>e.registerSelling)),{market:j}=(0,n.d4)((e=>e.login)),[y,w]=(0,a.useState)([]);(0,a.useEffect)((()=>{w((0,x.map)(t,(()=>!1)))}),[t]);let z=t.find((e=>e.product._id==m));const S=z?[z]:[];return(0,g.jsx)(g.Fragment,{children:S.map(((e,t)=>(0,g.jsxs)("li",{className:"w-[100vw] mt-[50px] bg-white list-none mb-[10px] p-[20px] rounded-md",children:[(0,g.jsx)("li",{className:"mt-2 text-2xl flex justify-between text-start",children:(0,g.jsx)("p",{className:"text-black-700 leading-7",children:e.product.name})}),(0,g.jsx)("li",{className:"flex justify-end mt-[20px] pe-7 text-2xl text-[green]",children:null===e||void 0===e?void 0:e.filialProductsTotal}),(0,g.jsx)("p",{className:"mt-3 text-sm",children:(0,b.t)("Fillial")}),(0,g.jsx)("li",{className:"w-[100vw] mt-1 bg-white list-none  rounded-md",children:N.length>1&&(0,g.jsx)("div",{className:"flex justify-center w-[80vw]",children:(0,g.jsx)("select",{onChange:t=>i(e.product._id,{filial:t.target.value,productcode:e.product.code,categorycode:e.categorycode},"select"),value:e.filial,className:"w-full outline-none border-[1px] rounded h-[40px] p-2 bg-[white]",children:N.length>0&&N.map(((e,t)=>(0,g.jsx)("option",{value:e.value,children:e.label},t)))})})}),(0,g.jsx)("p",{className:"mt-3 text-sm",children:(0,b.t)("Soni")}),(0,g.jsx)("li",{className:" mt-1 mb-3 text-sm flex justify-start ",children:(0,g.jsxs)("span",{className:"flex gap-[0.6rem]  items-center justify-start",children:[(0,g.jsx)("div",{className:"w-[40vw] ",children:(0,g.jsx)(h.A,{value:e.pieces,onChange:t=>i(e.product._id,t.target.value,"pieces"),type:"number",min:"h-[50px]"})}),(0,g.jsx)("button",{className:"rounded-[4px] duration-100 bg-success-500 hover:bg-success-600 p-[0.2rem]  h-[40px] w-[70px] text-3xl text-center text-white-900 active:scale-95",onClick:()=>s(e.product._id),children:"+"}),(0,g.jsx)("button",{className:"rounded-[4px] duration-100 bg-error-500 hover:bg-error-600 p-[0.2rem]  text-white-900 h-[40px] w-[70px] text-3xl text-center active:scale-95",onClick:()=>o(e.product._id),children:"-"})]})}),(0,g.jsx)("p",{className:"mt-3 text-sm",children:(0,b.t)("Ombordan")}),(0,g.jsx)("li",{className:"w-[40vw] mt-1",children:(0,g.jsx)(h.A,{value:e.fromFilial,onChange:t=>i(e.product._id,t.target.value,"fromFilial"),type:"number",disabled:e.filial===j._id&&!0})}),(0,g.jsxs)("p",{className:"mt-3 text-sm",children:[(0,b.t)("Narxi"),": ",r]}),(0,g.jsx)("li",{className:" mt-1 text-sm flex justify-start  items-center ",children:(0,g.jsx)(h.A,{value:"UZS"!==r?d&&e.tradeprice||e.unitprice:d&&e.tradepriceuzs||e.unitpriceuzs,onChange:t=>i(e.product._id,t.target.value,"unitprice"),type:"number"})}),(0,g.jsxs)("li",{className:" p-[10px] mt-3 text-xl flex justify-between  items-center ",children:[(0,g.jsxs)("span",{className:"me-2 w-8",children:[(0,b.t)("Jami"),": "]}),"UZS"!==r?e.totalprice.toLocaleString("ru-Ru"):e.totalpriceuzs.toLocaleString("ru-Ru")," ",r]}),(0,g.jsxs)("li",{className:" p-[10px] text-xl flex justify-between items-center ",children:[(0,g.jsx)("button",{onClick:()=>(e=>{const t=[...y];t[e]=!t[e],w([...t])})(t),children:y[t]?(0,g.jsx)(c.GNz,{}):(0,g.jsx)(c.Xyd,{})}),(0,g.jsx)("span",{className:"",children:y[t]?"UZS"===r?e.incomingpriceuzs.toLocaleString("ru-Ru")+" UZS":e.incomingprice.toLocaleString("ru-Ru")+" USD":""})]}),(0,g.jsxs)("li",{className:"flex justify-evenly mt-3",children:[(0,g.jsx)("button",{onClick:()=>p(!1),className:"rounded-[4px] duration-100 bg-success-500 hover:bg-success-600 p-[0.2rem]  h-[40px] w-[40vw]  text-center text-white-900 active:scale-95",children:(0,b.t)("Qo'shish")}),(0,g.jsx)("button",{className:"rounded-[4px] duration-100 bg-error-500 hover:bg-error-600 p-[0.2rem]  h-[40px] w-[40vw]  text-center text-white-900 active:scale-95",onClick:()=>{l(t),p(!1)},children:(0,b.t)("O'chirish")})]})]})))})};const f={randomUUID:"undefined"!==typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};var N,j=new Uint8Array(16);function y(){if(!N&&!(N="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return N(j)}for(var w=[],z=0;z<256;++z)w.push((z+256).toString(16).slice(1));function S(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(w[e[t+0]]+w[e[t+1]]+w[e[t+2]]+w[e[t+3]]+"-"+w[e[t+4]]+w[e[t+5]]+"-"+w[e[t+6]]+w[e[t+7]]+"-"+w[e[t+8]]+w[e[t+9]]+"-"+w[e[t+10]]+w[e[t+11]]+w[e[t+12]]+w[e[t+13]]+w[e[t+14]]+w[e[t+15]]).toLowerCase()}const C=function(e,t,l){if(f.randomUUID&&!t&&!e)return f.randomUUID();var a=(e=e||{}).random||(e.rng||y)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t){l=l||0;for(var i=0;i<16;++i)t[l+i]=a[i];return t}return S(a)};var k=l(97160),A=l(97415),D=l(11108),_=l(80827),U=l(12602),F=l(30200),P=l(73734),I=l(70126),M=l(73216),O=l(76490),T=l(49092),E=l(22662),Q=l(45842),q=l(46243),R=l(3297),L=l(85369),W=l(27149),B=l(91154),Z=l(51655),V=l(93141);const G=()=>{var e;const[t,l]=(0,a.useState)(!1),{t:m}=(0,T.B)(["common"]),h=(0,n.wA)(),b=(0,M.Zp)(),f=(0,M.zy)(),{user:N,market:j}=(0,n.d4)((e=>e.login)),[y,w]=(0,a.useState)(!1),[z,S]=(0,a.useState)({visible:!1,mode:"1"}),[G,H]=(0,a.useState)(!1),{currencyType:J,currency:K}=(0,n.d4)((e=>e.currency)),{allcategories:Y,loading:X}=(0,n.d4)((e=>e.category)),{filials:$}=(0,n.d4)((e=>e.registerSelling)),{allProducts:ee,clients:te,loadingMakePayment:le,lastPayments:ae}=(0,n.d4)((e=>e.registerSelling)),{packmans:ie}=(0,n.d4)((e=>e.clients)),[re,se]=(0,a.useState)([]),[ne,ce]=(0,a.useState)(""),[oe,ue]=(0,a.useState)(!1),[de,me]=(0,a.useState)([]),[pe,he]=(0,a.useState)(Y),[xe,be]=(0,a.useState)(null),[ge,ve]=(0,a.useState)(""),[fe,Ne]=(0,a.useState)([]),[je,ye]=(0,a.useState)(""),[we,ze]=(0,a.useState)(""),[Se,Ce]=(0,a.useState)([]),[ke,Ae]=(0,a.useState)(""),[De,_e]=(0,a.useState)(""),[Ue,Fe]=(0,a.useState)(!1),[Pe,Ie]=(0,a.useState)(null),[Me,Oe]=(0,a.useState)(!1),[Te,Ee]=(0,a.useState)("cash"),[Qe,qe]=(0,a.useState)(""),[Re,Le]=(0,a.useState)(""),[We,Be]=(0,a.useState)(""),[Ze,Ve]=(0,a.useState)(""),[Ge,He]=(0,a.useState)(""),[Je,Ke]=(0,a.useState)(""),[Ye,Xe]=(0,a.useState)(""),[$e,et]=(0,a.useState)(""),[tt,lt]=(0,a.useState)(""),[at,it]=(0,a.useState)(!1),[rt,st]=(0,a.useState)({label:"%",value:"%"}),[nt,ct]=(0,a.useState)(null),[ot,ut]=(0,a.useState)(0),[dt,mt]=(0,a.useState)(0),[pt,ht]=(0,a.useState)(0),[xt,bt]=(0,a.useState)(0),[gt,vt]=(0,a.useState)(0),[ft,Nt]=(0,a.useState)(0),[jt,yt]=(0,a.useState)(0),[wt,zt]=(0,a.useState)(""),[St,Ct]=(0,a.useState)(null),[kt,At]=(0,a.useState)(null),[Dt,_t]=(0,a.useState)(null),[Ut,Ft]=(0,a.useState)([]),[Pt,It]=(0,a.useState)([]),[Mt,Ot]=(0,a.useState)([]),[Tt,Et]=(0,a.useState)(0),[Qt,qt]=(0,a.useState)(0),[Rt,Lt]=(0,a.useState)(0),[Wt,Bt]=(0,a.useState)(0),[Zt,Vt]=(0,a.useState)(K),[Gt,Ht]=(0,a.useState)(""),[Jt,Kt]=(0,a.useState)([]),[Yt,Xt]=(0,a.useState)(!1),[$t,el]=(0,a.useState)(""),[tl,ll]=(0,a.useState)(""),[al,il]=(0,a.useState)(!1),[rl,sl]=(0,a.useState)({label:null===j||void 0===j?void 0:j.name,value:null===j||void 0===j?void 0:j._id}),[nl,cl]=(0,a.useState)(window.innerWidth<=768);(0,a.useEffect)((()=>{const e=()=>{cl(window.innerWidth<=768)};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[]);let ol=null;const ul=(0,a.useRef)(null),dl=(0,V.useReactToPrint)({content:()=>ul.current}),ml=[{title:"\u2116"},{title:m("Filial")},{title:m("Qoldiq")},{title:m("Nomi")},{title:m("Soni")},{title:m("Ombordan")},{title:m("Narxi")},{title:m("Jami"),styles:"w-[8rem]"},{title:""},{title:""}],pl=[{title:"\u2116"},{title:m("Qoldiq")},{title:m("Nomi")},{title:m("Soni")},{title:m("Narxi")},{title:m("Jami"),styles:"w-[8rem]"},{title:""},{title:""}],hl=[{title:"\u2116"},{title:m("Kodi")},{title:m("Nomi")},{title:m("Soni")},{title:m("Jami")},{title:m("Soni")},{title:m("Jami")}],xl=e=>{Oe(e?!Me:e),Ee("cash"),it(!1),Xe(""),et(""),lt(""),ut(0),il(!1),mt(0),st({label:"%",value:"%"})},bl=e=>Math.round(1e3*e)/1e3,gl=e=>Math.round(e),vl=(e,t)=>{Vt(gl(e/t))},fl=()=>{if(de.length){if(de.some((e=>0===e.total&&0===e.fromFilial)))return(0,P.GU)();const e=de.filter((e=>e.unitprice<=e.incomingprice)).map((e=>e.product._id));Kt(e);const t=de.reduce(((e,t)=>bl(e+t.totalprice)),0),l=de.reduce(((e,t)=>gl(e+t.totalpriceuzs)),0);ht(t),vt(l),qe(t),Le(l),Nt(t),yt(l),Oe(!0),vl(l,t)}else K?(0,P.$5)():(0,P.QC)()},Nl=e=>{qe(""),Le(""),Be(""),el(""),Ve(""),He(""),Ke(""),ut(0),mt(0),Nt(0),yt(0),me([]),Ae(""),ye(""),Ne([...(0,x.map)([...ie],(e=>({value:e._id,label:e.name})))]),Ce([{label:m("Barchasi"),value:""},...(0,x.map)([...te],(e=>({value:e._id,label:e.name,saleconnectorid:(null===e||void 0===e?void 0:e.saleconnectorid)||null})))]),_e(""),ue(!1),be(null),Ie(null),ve(""),_t(null),Ot([]),It([]),Ft([]),Lt(0),Bt(0),qt(0),Et(0),xl(e),sl({label:null===j||void 0===j?void 0:j.name,value:null===j||void 0===j?void 0:j._id})},jl=()=>{Fe(!1),setTimeout((()=>{zt("")}),500)},[yl,wl]=(0,a.useState)(!1),zl=()=>{var e,t,l;jl();const a={saleproducts:(0,x.map)(de,(e=>{if(Yt){const t={...e,pieces:Number(e.pieces)+Number(e.fromFilial),unitprice:e.tradeprice||e.unitprice,unitpriceuzs:e.tradepriceuzs||e.unitpriceuzs};return(null===t||void 0===t?void 0:t.tradeprice)&&(null===t||void 0===t||delete t.tradeprice),(null===t||void 0===t?void 0:t.tradepriceuzs)&&(null===t||void 0===t||delete t.tradepriceuzs),t}{const t={...e,pieces:Number(e.pieces)+Number(e.fromFilial)};return(null===t||void 0===t?void 0:t.tradeprice)&&(null===t||void 0===t||delete t.tradeprice),(null===t||void 0===t?void 0:t.tradepriceuzs)&&(null===t||void 0===t||delete t.tradepriceuzs),t}})),client:{_id:ke?ke.value:null,name:ke?ke.label:De,packman:null===ke||void 0===ke?void 0:ke.packman,phoneNumber:$t},packman:je?{_id:je.value,name:je.label}:null,discount:{discount:Number(Ye),discountuzs:Number($e),procient:Number(tt),isProcient:!!tt},payment:{totalprice:Number(pt),totalpriceuzs:Number(gt),type:Te,cash:Number(Qe),cashuzs:Number(Re),card:Number(We),carduzs:Number(Ze),transfer:Number(Ge),transferuzs:Number(Je),discount:Number(Ye),discountuzs:Number($e)},debt:{debt:Number(ot),debtuzs:Number(dt),comment:"",pay_end_date:tl},user:we||N._id,saleconnectorid:Dt,comment:Gt};return(null===(e=a.debt)||void 0===e?void 0:e.debtuzs)>0&&(null===a||void 0===a||null===(t=a.client)||void 0===t||!t.name)?(0,P.Tv)():(null===(l=a.debt)||void 0===l?void 0:l.debtuzs)>0&&""===tl?(0,P.o6)():a.saleproducts.some((e=>0===e.pieces||""===e.pieces))?(0,P._l)():void h(Dt?(0,k.eh)(a):(0,k.Rr)(a)).then((e=>{let{payload:t,error:l}=e;wl(!0),l||(Ct(t),Xt(!1),ll(""),_t(null),setTimeout((()=>{nl||dl(),Nl()}),500),kt&&(h((0,A.vZ)({_id:kt._id})),At(null)),setTimeout((()=>{wl(!1)}),1e4),ze(""))}))},Sl=()=>{wl(!0),jl();const e={totalOfBackAndDebt:xt,saleproducts:(0,x.filter)(Ut,(e=>Number(e.pieces)>0)),discounts:Mt,payment:{totalprice:Number(pt),totalpriceuzs:Number(gt),type:Te,cash:Number(pt<0?-1*Qe:Qe),cashuzs:Number(gt<0?-1*Re:Re),card:Number(pt<0?-1*We:We),carduzs:Number(pt<0?-1*Ze:Ze),transfer:Number(pt<0?-1*Ge:Ge),transferuzs:Number(pt<0?-1*Je:Ge)},debt:{debt:Number(pt<0?-1*ot:ot),debtuzs:Number(pt<0?-1*dt:dt),comment:"",pay_end_date:tl},user:N._id,saleconnectorid:Dt,comment:Gt};h((0,k.Oy)(e)).then((e=>{let{payload:t,error:l}=e;l||(Ct(t),setTimeout((()=>{nl||(zt("checkSellReturn"),Fe(!0)),Nl()}),500),setTimeout((()=>{wl(!1)}),1e4))}))},Cl=()=>{if(de.length>0){const e=de.reduce(((e,t)=>bl(e+t.totalprice)),0),t=de.reduce(((e,t)=>gl(e+t.totalpriceuzs)),0),l={temporary:{saleconnectorid:null,clientValue:ke,packmanValue:je,userValue:De,tableProducts:de,totalPrice:e,totalPriceUzs:t},user:N._id};h((0,k.Uw)(l)).then((e=>{let{error:t}=e;t||(Nl(!1),b("/saqlanganlar"))})),kt&&(h((0,A.vZ)({_id:kt._id})),At(null))}},kl=(e,t,l)=>{switch(l){case"unitprice":Ol(e,t);break;case"pieces":Tl(e,t);break;case"fromFilial":El(e,t);break;case"select":Bl(e,t)}},Al=e=>{1===de.length&&ze(""),de.splice(e,1),me([...de])},Dl=(JSON.stringify(kl),()=>{oe&&(_e(""),ye(""),Ae("")),ue(!oe)}),_l=e=>{xe===e?be(null):(be(e),ve(""),he(Y))},Ul=e=>{const t=e.target.value;ve(t);const l=t.replace(/\s+/g," ").trim(),a=(0,x.filter)(Y,(e=>e.name&&e.name.toLowerCase().includes(l)||e.code.includes(l)));he(""!==t?a:Y)},Fl=e=>{const t=e.barcode?(0,x.filter)(de,(t=>t.product.barcode===e.barcode)).length>0:(0,x.filter)(de,(t=>t.product._id===e.value)).length>0;!e.barcode&&ce(e);const l=e.barcode?ee.find((t=>t.productdata.barcode===e.barcode)):ee.find((t=>t._id===e.value)),a=C();let i={total:l.total,product:{_id:l._id,code:l.productdata.code,name:l.productdata.name,barcode:l.productdata.barcode},newID:a,minimumcount:l.minimumcount,totalprice:l.price.sellingprice,totalpriceuzs:l.price.sellingpriceuzs,tradeprice:l.price.tradeprice||0,tradepriceuzs:l.price.tradepriceuzs||0,pieces:1,incomingprice:l.price.incomingprice,incomingpriceuzs:l.price.incomingpriceuzs,unitprice:l.price.sellingprice,unitpriceuzs:l.price.sellingpriceuzs,categorycode:l.category.code,filialProductsTotal:l.total,fromFilial:0,filial:j._id,width:null===l||void 0===l?void 0:l.width,size:null===l||void 0===l?void 0:l.size,length:null===l||void 0===l?void 0:l.length,piece:null===l||void 0===l?void 0:l.piece,common:null===l||void 0===l?void 0:l.common,columns:null===l||void 0===l?void 0:l.columns};if(t){const e=C();i={...i,newID:e}}me([...de,i]),ce("")},Pl=e=>{ye(e);const t=(0,x.filter)(ie,(t=>t._id===e.value))[0];t&&t.hasOwnProperty("clients")?Ce((0,x.map)(t.clients,(e=>({label:e.name,value:e._id,packman:t,saleconnectorid:(null===e||void 0===e?void 0:e.saleconnectorid)||null})))):Ce([{label:m("Tanlang"),value:""},...(0,x.map)([...te],(e=>({label:e.name,value:e._id,packman:null===e||void 0===e?void 0:e.packman,saleconnectorid:(null===e||void 0===e?void 0:e.saleconnectorid)||null})))]),Ae(""),_e("")},Il=e=>{Ae(e);const t=(0,x.filter)(te,(t=>t._id===e.value))[0];var l,a;t&&t.hasOwnProperty("packman")&&ye({label:null===t||void 0===t||null===(l=t.packman)||void 0===l?void 0:l.name,value:null===t||void 0===t||null===(a=t.packman)||void 0===a?void 0:a._id});el(null===t||void 0===t?void 0:t.phoneNumber),e.value?_e(e.label):_e("")},Ml=e=>{_e(e.target.value)},Ol=(e,t)=>{const l=Yt?(0,x.map)(de,(l=>l.product._id===e?{...l,tradeprice:"USD"===J?t:(0,F.Ch)(t,Zt),tradepriceuzs:"UZS"===J?t:(0,F.IQ)(t,Zt),totalprice:"USD"===J?t*l.pieces:(0,F.Ch)(t*l.pieces,Zt),totalpriceuzs:"UZS"===J?t*l.pieces:(0,F.IQ)(t*l.pieces,Zt)}:l)):(0,x.map)(de,(l=>l.product._id===e?{...l,unitprice:"USD"===J?t:(0,F.Ch)(t,Zt),unitpriceuzs:"UZS"===J?t:(0,F.IQ)(t,Zt),totalprice:"USD"===J?t*(Number(l.pieces)+Number(l.fromFilial)):(0,F.Ch)(t*(Number(l.pieces)+Number(l.fromFilial)),Zt),totalpriceuzs:"UZS"===J?t*(Number(l.pieces)+Number(l.fromFilial)):(0,F.IQ)(t*(Number(l.pieces)+Number(l.fromFilial)),Zt)}:l));me(l)},Tl=(e,t)=>{if(/^[0-9]+(\.[0-9]*)?$/.test(t)||""===t){const l=(0,x.map)(de,(l=>l.product._id===e?{...l,pieces:t,totalprice:bl((Number(t)+Number(l.fromFilial))*(Yt&&l.tradeprice||l.unitprice)),totalpriceuzs:gl((Number(t)+Number(l.fromFilial))*(Yt&&l.tradepriceuzs||l.unitpriceuzs))}:l));me(l)}},El=(e,t)=>{const l=(0,x.map)(de,(l=>l.product._id===e?{...l,fromFilial:Number(t),totalprice:bl((Number(t)+Number(l.pieces))*(Yt&&l.tradeprice||l.unitprice)),totalpriceuzs:gl((Number(t)+Number(l.pieces))*(Yt&&l.tradepriceuzs||l.unitpriceuzs))}:l));me(l)},Ql=e=>{const t=(0,x.map)(de,(t=>t.product._id===e?{...t,pieces:Number(t.pieces)+1,totalprice:bl((Number(t.pieces)+Number(t.fromFilial)+1)*(Yt&&t.tradeprice||t.unitprice)),totalpriceuzs:gl((Number(t.pieces)+Number(t.fromFilial)+1)*(Yt&&t.tradepriceuzs||t.unitpriceuzs))}:t));me(t)},ql=e=>{const t=(0,x.map)(de,(t=>t.product._id===e?{...t,pieces:Number(t.pieces)>1?Number(t.pieces)-1:1,totalprice:bl((Number(t.pieces)>1?Number(t.pieces)-1+Number(t.fromFilial):1)*(Yt&&t.tradeprice||t.unitprice)),totalpriceuzs:gl((Number(t.pieces)>1?Number(t.pieces)-1+Number(t.fromFilial):1)*(Yt&&t.tradepriceuzs||t.unitpriceuzs))}:t));me(t)},Rl=(e,t,l)=>{if(e>Number(Ut[l].product.pieces))return(0,P.lY)(m("Diqqat! Qaytariladigan mahsulot soni sotilgan mahsulot sonidan ortiq bo'lolmaydi"),"warning");const a=(0,x.map)(Ut,(l=>l._id===t?{...l,pieces:e,totalprice:bl(e*l.unitprice),totalpriceuzs:gl(e*l.unitpriceuzs)}:l));Ft(a)},Ll=()=>{if(Ut.length){const e=Ut.reduce(((e,t)=>bl(e+t.totalprice)),0),t=Ut.reduce(((e,t)=>gl(e+t.totalpriceuzs)),0),l=Pt.map((e=>{let t={...e};return(0,x.map)(Ut,(l=>{var a;return e._id===(null===(a=l.product)||void 0===a?void 0:a.discount)&&(t={...e,discount:e.procient?bl(t.discount-l.totalprice*e.procient/100):0,discountuzs:e.procient?gl(t.discountuzs-l.totalpriceuzs*e.procient/100):0,totalprice:bl(t.totalprice-l.totalprice),totalpriceuzs:gl(t.totalpriceuzs-l.totalpriceuzs)}),""})),{...t}})),a=l.reduce(((e,t)=>e+t.discount),0),i=l.reduce(((e,t)=>e+t.discountuzs),0),r=bl(Tt-Rt-a-e),s=gl(Qt-Wt-i-t);Ot(l),r<=0?(ht(r),vt(s),qe(Math.abs(r)),Le(Math.abs(s)),Nt(Math.abs(r)),yt(Math.abs(s)),bt(t-Math.abs(s)<=0?0:t-Math.abs(s))):(qe(0),Le((0,F.IQ)(0,Zt)),ut(bl(r)),mt(gl(s)),ht(e),vt(t),Nt(e),yt(t),bt(t)),Oe(!0),vl(t,e)}else(0,P._z)()},Wl=e=>{let t=e.target.checked;de.length>0?(Xt(!Yt),me(t?e=>e.map((e=>({...e,totalprice:e.tradeprice?bl(Number(e.pieces+e.fromFilial)*e.tradeprice):e.totalprice,totalpriceuzs:e.tradepriceuzs?gl(Number(e.pieces+e.fromFilial)*e.tradepriceuzs):e.totalpriceuzs}))):e=>e.map((e=>({...e,totalprice:e.unitprice?bl(Number(e.pieces+e.fromFilial)*e.unitprice):e.totalprice,totalpriceuzs:e.unitpriceuzs?gl(Number(e.pieces+e.fromFilial)*e.unitpriceuzs):e.totalpriceuzs}))))):(0,P.$5)()},Bl=(e,t)=>{Zl(t).then((l=>{me([...de].map((a=>(a.product._id===e&&(a.filialProductsTotal=l.total,a.filial=t.filial,t.filial===j._id&&(a.fromFilial=0,a.totalprice=bl(Number(a.pieces)*(Yt&&a.tradeprice||a.unitprice)),a.totalpriceuzs=gl(Number(a.pieces)*(Yt&&a.tradepriceuzs||a.unitpriceuzs)))),a))))})).catch((e=>(0,P.lY)(e,"error")))},Zl=async e=>{const{data:t}=await q.A.post("/filials/products/get",e);return t};(0,a.useEffect)((()=>{let e=[],t=[];j&&E.A.emit("getProductsOfCount",{market:j._id}),j&&E.A.on("categories",(e=>{let{id:t,categories:l}=e;t===j._id&&h((0,Q.U2)(l))})),j&&E.A.on("getProductsOfCount",(l=>{let{id:a,products:i}=l;a===j._id&&(t=[...t,...(0,x.map)(i,(e=>{var t,l;return{value:e._id,label:"(".concat(e.total,") ").concat(e.category.code).concat(e.productdata.code," - ").concat(e.productdata.name," -------- (").concat("USD"===J?(null===e||void 0===e||null===(t=e.price)||void 0===t?void 0:t.sellingprice).toLocaleString("ru-RU"):(null===e||void 0===e||null===(l=e.price)||void 0===l?void 0:l.sellingpriceuzs).toLocaleString("ru-RU")," ").concat(J,")")}}))],se(t),e.push(...i),h((0,k.UC)(e)))})),j&&E.A.on("error",(e=>{let{id:t,message:l}=e;t===j._id&&(0,P.lY)(l,"error")}))}),[j,h,ae]),(0,a.useEffect)((()=>{if(xe){const e=(0,x.filter)(ee,(e=>e.category._id===xe));se((0,x.map)(e,(e=>({value:e._id,label:"(".concat(e.total,") ").concat(e.category.code).concat(e.productdata.code," - ").concat(e.productdata.name)}))))}else se((0,x.map)(ee,(e=>({value:e._id,label:"(".concat(e.total,") ").concat(e.category.code).concat(e.productdata.code," - ").concat(e.productdata.name)}))))}),[xe]),(0,a.useEffect)((()=>{h((0,D.YU)()),h((0,k.Lf)()),h((0,k.f1)({marketData:j}))}),[h,j]),(0,a.useEffect)((()=>{he(Y)}),[Y]),(0,a.useEffect)((()=>{Ne([{label:m("Tanlang"),value:""},...(0,x.map)([...ie],(e=>({value:e._id,label:e.name})))])}),[ie,m]),(0,a.useEffect)((()=>{Ce([{label:m("Barchasi"),value:""},...(0,x.map)([...te],(e=>({value:e._id,label:e.name,saleconnectorid:(null===e||void 0===e?void 0:e.saleconnectorid)||null})))])}),[te,m]),(0,a.useEffect)((()=>{const e=f.state,t=()=>{e.saleconnector.client&&Ae({label:e.saleconnector.client.name,value:e.saleconnector.client._id}),e.saleconnector.packman&&ye({label:e.saleconnector.packman.name,value:e.saleconnector.packman._id}),_t(e.saleconnector._id)};var l;e&&e.temporary&&(ze(e.temporary.user._id),At(e.temporary),me(e.temporary.tableProducts),Ae(e.temporary.clientValue),ye(e.temporary.packmanValue),_e(null===(l=e.temporary.user)||void 0===l?void 0:l.userValue));if(e&&e.saleconnector&&!e.returnProducts&&t(),e&&e.saleconnector&&e.returnProducts){t();let l=[];(0,x.map)(e.saleconnector.products,(e=>{const t={_id:e.product._id,discount:e.discount&&e.discount,pieces:e.pieces,totalprice:e.totalprice,totalpriceuzs:e.totalpriceuzs};return(0,x.map)(e.saleproducts,(e=>(t.pieces+=e.pieces,t.totalprice+=e.totalprice,t.totalpriceuzs+=e.totalpriceuzs,""))),e.pieces>0&&l.push({pieces:"",totalpriceuzs:0,totalprice:0,unitprice:e.unitprice,unitpriceuzs:e.unitpriceuzs,product:{...t},productdata:{...e.product.productdata},_id:e._id}),""})),Ft((0,x.filter)(l,(e=>e.product.pieces>0))),It([...e.saleconnector.discounts]);const a=(e,t,l)=>"uzs"===l?gl(e.reduce(((e,l)=>e+l[t]),0)):bl(e.reduce(((e,l)=>e+l[t]),0));Et(a(e.saleconnector.products,"totalprice","usd")),qt(a(e.saleconnector.products,"totalpriceuzs","uzs")),Lt(a(e.saleconnector.payments,"payment","usd")),Bt(a(e.saleconnector.payments,"paymentuzs","uzs"))}window.history.replaceState({},document.title)}),[f.state]);const[Vl,Gl]=(0,a.useState)(null),[Hl,Jl]=(0,a.useState)(""),Kl=(e,t,l)=>{const a=Vl.columns.map(((a,i)=>i===t?{...a,[l]:e}:a));"col1"!==l&&"col2"!==l||(a[t].result=parseFloat(a[t].col1*a[t].col2));const i={...Vl,columns:a};Gl(i),me((e=>e.map((e=>e.newID===i.newID?i:e))))},Yl=(e,t)=>{if(/^[0-9]+(\.[0-9]*)?$/.test(e)||""===e){const l={...Vl,[t]:e};if("size"===t){const t=e;l.size=t,""!==e&&(l.piece=parseFloat((l.width/t).toFixed(2)))}else if("piece"===t){const t=e;l.piece=t,""!==e&&(l.size=parseFloat((l.width/t).toFixed(2)))}else if("length"===t){const t=e;if(l.lengthAmout=t,l.length=t,""!==e){let e=t/l.piece;l.pieces=parseFloat(e.toFixed(2))}}else if("sizePrice"===t){const t=Number(l.lengthAmout)||Number(l.fromFilial)||0;l.priceFromLengthAmout=e;const a=gl(t*e);l.pieces,l.incomingpriceuzs,l.pieces,l.incomingprice;l.totalpriceuzs=a}Gl(l),me((e=>e.map((e=>e.newID===l.newID?{...l}:e)))),-1!==l.pieces&&Jl(parseFloat(l.pieces))}else if("forWhat"===t){const l={...Vl,[t]:e};Gl(l),me((e=>e.map((e=>e.newID===l.newID?{...l}:e))))}},Xl=e=>{S({visible:!1,mode:e})};return(0,g.jsxs)("div",{className:"flex grow relative overflow-auto",children:[le&&(0,g.jsx)("div",{className:"fixed backdrop-blur-[2px] z-[100] left-0 top-0 right-0 bottom-0 bg-white-700 flex flex-col items-center justify-center w-full h-full",children:(0,g.jsx)(d.A,{})}),(0,g.jsx)(p(),{style:{content:{width:"700px"}},isOpen:z.visible,onRequestClose:()=>Xl("1"),children:(0,g.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),"1"===z.mode){const e=de.map((e=>{if(e.newID===Vl.newID){const t=Vl.columns.reduce(((e,t)=>e+t.result),0),l=bl((t+Number(e.fromFilial))*(Yt&&e.tradeprice||e.unitprice)),a=gl((t+Number(e.fromFilial))*(Yt&&e.tradepriceuzs||e.unitpriceuzs));return{...e,pieces:parseFloat(t),totalprice:l,totalpriceuzs:a}}return e}));me(e),Xl("1")}else Xl("2")},children:[(0,g.jsx)("span",{className:"absolute top-3 font-medium text-lg left-[45%] transform -translate-x-1/2     w-full text-center",children:null===Vl||void 0===Vl?void 0:Vl.product.name}),(0,g.jsx)("input",{type:"checkbox",label:"Bo'lib sotish turi - ".concat(z.mode),onChange:e=>S((t=>({...t,mode:e.target.checked?"1":"2"})))}),(0,g.jsx)("button",{type:"button",onClick:()=>(S({visible:!1,mode:"1"}),de.forEach((e=>{(null===e||void 0===e?void 0:e.newID)===(null===Vl||void 0===Vl?void 0:Vl.newID)&&(delete e.columns,delete e.size,delete e.piece,delete e.length,delete e.forWhat,delete e.sizePrice,delete e.priceFromLengthAmout,delete e.lengthAmout,delete e.sizePrice,e.pieces=1)})),Gl(null),Jl(""),void me([...de])),className:"absolute border border-error-500 w-7 h-7 flex justify-center items-center  rounded-full top-2 right-2 text-lg ",children:"x"}),"1"===z.mode?(0,g.jsx)("div",{className:"max-h-80 overflow-y-auto px-2",children:null===Vl||void 0===Vl||null===(e=Vl.columns)||void 0===e?void 0:e.map(((e,t)=>(0,g.jsxs)("div",{className:"flex items-center justify-between gap-x-3 mt-2",children:[(0,g.jsxs)("div",{className:"grid grid-cols-3 gap-3 ",children:[(0,g.jsx)(r.A,{type:"text",step:"0.11",label:0===t&&"O'lcham",value:e.col1,placeholder:"O'lcham",onChange:e=>{let{target:l}=e;return Kl(l.value,t,"col1")}}),(0,g.jsx)(r.A,{type:"text",label:0===t&&"Soni",value:e.col2,placeholder:"Soni",step:"0.11",onChange:e=>{let{target:l}=e;return Kl(l.value,t,"col2")}}),(0,g.jsx)(r.A,{step:"0.11",type:"text",value:e.result,placeholder:"Umumiy",label:0===t&&"Umumiy",onChange:e=>{let{target:l}=e;return Kl(l.value,t,"result")}})]}),(0,g.jsx)("button",{onClick:()=>(e=>{const t=Vl.columns.filter(((t,l)=>l!==e)),l={...Vl,columns:t};Gl(l),me((e=>e.map((e=>e.newID===l.newID?l:e))))})(t),type:"button",className:"".concat(0==t?"mt-6":"","  text-error-500 border w-9 h-9 rounded-full flex justify-center items-center"),children:(0,g.jsx)(L.qbC,{})})]})))}):(0,g.jsxs)("div",{className:"space-y-2",children:[(0,g.jsxs)("div",{className:"grid grid-cols-2 gap-x-2",children:[(0,g.jsx)(r.A,{type:"text",placeholder:"Eni",label:"Eni",value:null===Vl||void 0===Vl?void 0:Vl.width}),(0,g.jsx)(r.A,{placeholder:"O'lchami",type:"text",label:"O'lchami",onChange:e=>{let{target:t}=e;return Yl(t.value,"size")},value:null===Vl||void 0===Vl?void 0:Vl.size})]}),(0,g.jsxs)("div",{className:"grid grid-cols-2 gap-x-2",children:[(0,g.jsx)(r.A,{placeholder:m("Uzunligi"),type:"text",label:m("Uzunligi"),onChange:e=>{let{target:t}=e;return Yl(t.value,"length")},value:null===Vl||void 0===Vl?void 0:Vl.length}),(0,g.jsx)(r.A,{placeholder:m("Bo`lak"),type:"text",label:m("Bo`lak"),onChange:e=>{let{target:t}=e;return Yl(t.value,"piece")},value:null===Vl||void 0===Vl?void 0:Vl.piece})]}),(0,g.jsxs)("div",{className:"grid grid-cols-2 gap-x-2",children:[(0,g.jsx)(r.A,{placeholder:m("Maxsulot miqdori"),label:m("Maxsulot miqdori"),type:"text",value:Hl}),(0,g.jsx)(r.A,{placeholder:m("Maxsulot"),label:m("Maxsulot"),type:"text",onChange:e=>{let{target:t}=e;return Yl(t.value,"forWhat")},value:null===Vl||void 0===Vl?void 0:Vl.forWhat})]}),(0,g.jsx)("div",{className:"grid grid-cols-2 gap-x-2",children:(0,g.jsx)(r.A,{placeholder:m("Narxi"),label:m("Narxi"),type:"text",onChange:e=>{let{target:t}=e;return Yl(t.value,"sizePrice")},value:null===Vl||void 0===Vl?void 0:Vl.sizePrice})})]}),"1"===z.mode&&(0,g.jsx)("button",{onClick:()=>{const e={...Vl,columns:[...Vl.columns,{col1:0,col2:0,result:0}]};Gl(e),me((t=>t.map((t=>t.newID===e.newID?e:t))))},type:"button",className:"text-success-500 mt-2 border w-9 h-9 rounded-full flex justify-center items-center",children:(0,g.jsx)(L.OiG,{className:"text-white"})}),(0,g.jsxs)("div",{className:"flex justify-between items-center absolute bottom-2 w-[86%]",children:["1"===z.mode?(0,g.jsxs)("h5",{className:"text-lg font-medium",children:[" ","Umumiy:",null===Vl||void 0===Vl?void 0:Vl.columns.reduce(((e,t)=>e+t.result),0)]}):(0,g.jsx)("span",{}),(0,g.jsx)("button",{type:"submit",className:"px-4 py-2 text-center text-white-900 text-base bg-success-500 rounded-sm",children:"Saqlash"})]})]})}),(0,g.jsx)(I.A,{hasDiscountBtn:!0,clickdelay:yl,returned:!!Ut.length,type:Te,showPayEndDate:al,hasCalendar:!0,active:Me,payEndDate:tl,handlePayEndDateChange:e=>{ll(e)},togglePaymentModal:xl,changePaymentType:e=>{const t=pt-Number(Ye),l=gt-Number($e),a=Ut.reduce(((e,t)=>bl(e+t.totalprice)),0),i=Ut.reduce(((e,t)=>gl(e+t.totalpriceuzs)),0),r=bl(Tt-Rt-a),s=gl(Qt-Wt-i);if(Te!==e)switch(Ee(e),e){case"cash":Ut.length>0?r<=0?(ht(r),vt(s),qe(Math.abs(r)),Le(Math.abs(s)),Nt(Math.abs(r)),yt(Math.abs(s))):(qe(0),Le((0,F.IQ)(0,Zt)),ut(bl(r)),mt(gl(s)),ht(a),vt(i),Nt(a),yt(i)):(qe(t),Le(l),Be(""),Ve(""),He(""),Ke(""),Nt(t),yt(l),ut(0),mt(0));break;case"card":Ut.length>0?r<=0?(ht(r),vt(s),Be(Math.abs(r)),Ve(Math.abs(s)),Nt(Math.abs(r)),yt(Math.abs(s))):(Be(0),Ve((0,F.IQ)(0,Zt)),ut(bl(r)),mt(gl(s)),ht(a),vt(i),Nt(a),yt(i)):(Be(t),Ve(l),qe(""),Le(""),He(""),Ke(""),Nt(t),yt(l),ut(0),mt(0)),qe(""),Le(""),He(""),Ke("");break;case"transfer":Ut.length>0?r<=0?(ht(r),vt(s),He(Math.abs(r)),Ke(Math.abs(s)),Nt(Math.abs(r)),yt(Math.abs(s))):(He(0),Ke((0,F.IQ)(0,Zt)),ut(bl(r)),mt(gl(s)),ht(a),vt(i),Nt(a),yt(i)):(He(t),Ke(l),qe(""),Le(""),Be(""),Ve(""),Nt(t),yt(l),ut(0),mt(0)),qe(""),Le(""),Be(""),Ve("");break;default:qe(""),Le(""),Be(""),Ve(""),He(""),Ke(""),Nt(0),yt(0),ut(pt-Number(Ye)),mt(gt-Number($e))}},onChange:(e,t)=>{((e,t)=>{const l=Math.abs(pt)-Number(Ye),a=Math.abs(gt)-Number($e);if("USD"===J)if("cash"===t){const t=Number(e)+Number(We)+Number(Ge),i=Number((0,F.IQ)(e,Zt))+Number(Ze)+Number(Je);t<=l?(qe(e),Le((0,F.IQ)(e,Zt)),il(bl(l-t)>0||gl(l-i)>0),ut(bl(l-t)),mt(gl(a-i)),Nt(t),yt(i)):(0,P.OC)()}else if("card"===t){const t=Number(e)+Number(Qe)+Number(Ge),i=Number(Re)+Number((0,F.IQ)(e,Zt))+Number(Je);t<=l?(Be(e),Ve((0,F.IQ)(e,Zt)),il(bl(l-t)>0||gl(a-i)>0),ut(bl(l-t)),mt(gl(a-i)),Nt(t),yt(i)):(0,P.OC)()}else{const t=Number(e)+Number(Qe)+Number(We),i=Number(Re)+Number(Ze)+Number((0,F.IQ)(e,Zt));t<=l?(He(e),Ke((0,F.IQ)(e,Zt)),il(bl(l-t)>0||gl(a-i)>0),ut(bl(l-t)),mt(gl(a-i)),Nt(t),yt(i)):(0,P.OC)()}else if("cash"===t){const t=Number(e)+Number(Ze)+Number(Je),i=Number((0,F.Ch)(e,Zt))+Number(We)+Number(Ge);t<=a?(Le(e),qe((0,F.Ch)(e,Zt)),il(bl(l-i)>0||gl(a-t)>0),ut(bl(l-i)),mt(gl(a-t)),Nt(i),yt(t)):(0,P.OC)()}else if("card"===t){const t=Number(e)+Number(Re)+Number(Je),i=Number(Qe)+Number((0,F.Ch)(e,Zt))+Number(Ge);t<=a?(Be((0,F.Ch)(e,Zt)),Ve(e),il(bl(l-i)>0||gl(a-t)>0),ut(bl(l-i)),mt(gl(a-t)),Nt((0,F.Ch)(t,Zt)),yt(t)):(0,P.OC)()}else{const t=Number(e)+Number(Re)+Number(Ze),i=Number(Qe)+Number(We)+Number((0,F.Ch)(e,Zt));t<=a?(He((0,F.Ch)(e,Zt)),Ke(e),ut(bl(l-i)),mt(gl(a-t)),il(bl(l-i)>0||gl(a-t)>0),Nt(i),yt(t)):(0,P.OC)()}})(e,t)},client:De||ke.label||je.label,allPayment:"USD"===J?pt:gt,card:"USD"===J?We:Ze,cash:"USD"===J?Qe:Re,debt:"USD"===J?ot:dt,discount:"USD"===J?"USD"===rt.value?Ye:tt:"UZS"===rt.value?$e:tt,handleChangeDiscount:e=>{const t=Math.round(30*pt/100*1e3)/1e3,l=Math.round(30*gt/100*1)/1;if("USD"===rt.value)e>t?(0,P.nN)("".concat(t," USD")):(Xe(e),et((0,F.IQ)(e,Zt)),lt(0),ut(pt-e),mt((0,F.IQ)(pt-e,Zt)));else if("UZS"===rt.value)e>l?(0,P.nN)("".concat(l," UZS")):(et(e),Xe((0,F.Ch)(e,Zt)),lt(0),ut((0,F.Ch)(gt-e,Zt)),mt(gt-e));else if(e>30)(0,P.nN)("30%");else{const t=Math.round(pt*e/100*1e3)/1e3,l=Math.round(gt*e/100*1)/1;lt(e),Xe(t),et(l),ut(bl(pt-t)),mt(gl(gt-l)),Nt(pt-t),yt(gt-l)}qe(""),Le(""),Be(""),Ve(""),He(""),Ke(""),Nt(0),yt(0)},hasDiscount:at,transfer:"USD"===J?Ge:Je,handleClickDiscountBtn:()=>{it(!at),"cash"===Te?(qe(pt),Le(gt),Nt(pt),yt(gt)):"card"===Te?(Be(pt),Ve(gt),Nt(pt),yt(gt)):"transfer"===Te?(He(pt),Ke(gt),Nt(pt),yt(gt)):(qe(""),Le(""),Be(""),Ve(""),He(""),Ke(""),Nt(0),yt(0),ut(pt),mt(gt)),Xe(""),et(""),lt("")},discountSelectOption:rt,handleChangeDiscountSelectOption:e=>{rt.value!==e.value&&(st(e),Xe(""),et(""),lt(""),qe(""),Le(""),Be(""),Ve(""),He(""),Ke(""),ut(pt),mt(gt),Nt(0),yt(0))},paid:"USD"===J?ft:jt,handleClickPay:()=>{Ut.length?Sl():zl()},changeComment:e=>{Ht(e)},saleComment:Gt,onDoubleClick:()=>{window.clearTimeout(ol),ol=null,Ut.length>0?Sl():zl()}}),(0,g.jsx)(U.A,{body:wt,toggleModal:"complete"===wt?jl:()=>{Fe(!Ue),zt(""),Ct(null)},approveFunction:"complete"===wt?Ut.length?Sl:zl:()=>{},isOpen:Ue,product:St,headers:ml,headerText:"complete"===wt&&m("To'lovni amalga oshirishni tasdiqlaysizmi ?"),title:"complete"===wt&&m("To'lovni amalga oshirgach bu ma`lumotlarni o`zgaritirb bo`lmaydi !"),changeProduct:(e,t)=>{switch(t){case"unitprice":(e=>{Ie({...Pe,unitprice:"USD"===J?e:(0,F.Ch)(e,Zt),unitpriceuzs:"UZS"===J?e:(0,F.IQ)(e,Zt),totalprice:"USD"===J?e*Pe.pieces:(0,F.Ch)(e*Pe.pieces,Zt),totalpriceuzs:"UZS"===J?e*Pe.pieces:(0,F.IQ)(e*Pe.pieces,Zt)})})(e);break;case"pieces":(e=>{Ie({...Pe,pieces:e,totalprice:e*Pe.unitprice,totalpriceuzs:e*Pe.unitpriceuzs})})(e);break;default:return null}}}),nl?null:(0,g.jsxs)("div",{className:"flex flex-col grow gap-[1.25rem] overflow-auto",children:[(0,g.jsxs)("div",{className:"mainPadding flex flex-col gap-[1.25rem]",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)(i.A,{id:"register-selling",onChange:Dl,value:oe,label:m("Mijoz")}),(0,g.jsxs)("div",{className:"flex gap-[1.25rem] mt-[1rem]",children:[(0,g.jsx)(r.A,{placeholder:m("Agentlar"),maxWidth:"w-[14.676875rem]",disabled:!oe,border:!0,select:!0,value:je,options:fe,onChange:Pl}),(0,g.jsx)(r.A,{placeholder:m("Xaridor"),maxWidth:"w-[14.676875rem]",disabled:!oe,border:!0,select:!0,value:ke,options:Se,onChange:Il}),(0,g.jsx)(r.A,{placeholder:m("Amaldagi xaridor"),disabled:!oe,value:De,onChange:Ml}),(0,g.jsx)(r.A,{placeholder:m("Telefon"),disabled:!oe,value:$t,onChange:e=>{let{target:t}=e;return el(t.value)}})]})]}),!Ut.length&&(0,g.jsxs)("div",{className:"flex flex-col gap-[1.25rem]",children:[(0,g.jsx)(r.A,{select:!0,placeholder:m("misol: kompyuter"),value:ne,label:m("Maxsulotlar"),onChange:Fl,options:re}),(0,g.jsx)("div",{className:"flex justify-end items-start",children:(0,g.jsxs)("div",{className:"checkbox-card sale-toggle-container",children:[(0,g.jsxs)("p",{className:"toggleText",children:[m("Optom narxida hisoblash")," :"]}),(0,g.jsx)("input",{type:"checkbox",checked:Yt,onChange:Wl})]})})]})]}),(0,g.jsx)("div",{className:"tableContainerPadding mt-[-20px]",children:Ut.length?(0,g.jsx)(s.A,{page:"backproduct",data:Ut,headers:hl,currency:J,changeHandler:Rl}):de.length?(0,g.jsx)(s.A,{page:"registersale",data:de,headers:$.length>1?ml:pl,handleClickProduct:e=>{S({visible:!0,mode:"1"}),Gl({...e,columns:(null===e||void 0===e?void 0:e.columns)||[],size:(null===e||void 0===e?void 0:e.size)||"",piece:(null===e||void 0===e?void 0:e.piece)||"",length:(null===e||void 0===e?void 0:e.length)||"",forWhat:e.forWhat||"",sizePrice:e.sizePrice||"",lengthAmout:e.lengthAmout||"",priceFromLengthAmout:e.priceFromLengthAmout||""})},currency:J,Delete:Al,changeHandler:kl,footer:"registersale",increment:Ql,decrement:ql,lowUnitpriceProducts:Jt,wholeSale:Yt,selectedFilial:rl}):(0,g.jsx)(u.A,{text:m("Sotuvda mahsulotlar qo'shilmagan!")})})]}),nl&&t?(0,g.jsx)("div",{className:"fixed w-[100%] h-[100vh] bg-[white] top-0 right-0 z-[60] ",children:(0,g.jsx)(v,{data:de,headers:$.length>1?ml:pl,currency:J,productId:nt,Delete:Al,productModal:l,changeHandler:kl,footer:"registersale",increment:Ql,decrement:ql,lowUnitpriceProducts:Jt,wholeSale:Yt,selectedFilial:rl})}):null,nl?(0,g.jsxs)("div",{className:"flex mt-[-20px] flex-col grow gap-[1.25rem] overflow-auto",children:[(0,g.jsxs)("div",{className:"flex gap-2 p-4 lg:justify-start mt-4 justify-evenly",children:[nl?(0,g.jsxs)("button",{onClick:()=>w(!0),className:" hover:bg-blue-200  bg-blue-400 focus-visible:outline-none w-[150px] lg:h-[33px] h=[40px] createElement ",children:[(0,g.jsx)(L.VGZ,{}),m("Mijoz")]}):null,nl?(0,g.jsxs)("button",{onClick:()=>H(!0),className:" hover:bg-green-200  bg-green-400 focus-visible:outline-none w-[150px] lg:h-[33px] h=[40px] createElement ",children:[(0,g.jsx)(W.M1j,{})," ",m("Kategoriya")]}):null]}),(0,g.jsx)("div",{className:" flex justify-center",children:!Ut.length&&(0,g.jsx)("div",{className:"flex flex-col w-[90vw] gap-[1.25rem]",children:(0,g.jsx)(r.A,{select:!0,placeholder:m("misol: kompyuter"),value:ne,onChange:e=>{Fl(e),l(!0),ct(e.value)},options:re})})}),(0,g.jsx)("div",{className:"ml-[20px] mb-[-20px] flex justify-between mr-[20px]",children:(0,g.jsx)("div",{className:"flex justify-end items-start",children:(0,g.jsxs)("div",{className:"checkbox-card  sale-toggle-container",children:[(0,g.jsxs)("p",{className:"toggleText ",children:[m("Optom narxida hisoblash")," :"]}),(0,g.jsx)("input",{className:"z-0",type:"checkbox",checked:Yt,onChange:Wl})]})})}),y?(0,g.jsxs)("div",{className:"fixed w-[100%] h-[100vh] bg-[white] top-0 right-0 z-50 ",children:[(0,g.jsx)(B.hvQ,{onClick:()=>w(!1),className:" absolute right-[20px]  top-[20px]  text-4xl cursor-pointer"}),(0,g.jsxs)("div",{className:"mainPadding ps-[20px] mt-[50px] flex flex-col gap-[1.25rem]",children:[(0,g.jsx)("div",{children:(0,g.jsxs)("div",{className:"flex flex-wrap gap-[1.25rem] mt-[1rem]",children:[(0,g.jsx)(i.A,{id:"register-selling",onChange:Dl,value:oe,label:m("Mijoz")}),(0,g.jsx)(r.A,{placeholder:m("Agentlar"),maxWidth:"lg:w-[14.676875rem] w-[90vw]",disabled:!oe,border:!0,select:!0,value:je,options:fe,onChange:Pl}),(0,g.jsx)(r.A,{placeholder:m("Xaridor"),maxWidth:"lg:w-[14.676875rem] w-[90vw]",disabled:!oe,border:!0,select:!0,value:ke,options:Se,onChange:Il}),(0,g.jsx)(r.A,{placeholder:m("Amaldagi xaridor"),disabled:!oe,value:De,onChange:Ml})]})}),(0,g.jsx)("div",{className:"flex mt-[30px] justify-center ",children:(0,g.jsxs)("button",{onClick:()=>w(!1),className:" hover:bg-blue-200  bg-blue-400 focus-visible:outline-none w-[150px] lg:h-[33px] h=[40px] createElement ",children:[(0,g.jsx)(L.YsJ,{})," ",m("izlash")]})})]})]}):null,(0,g.jsx)("div",{className:"mb-[100px] mt-[20px]",children:Ut.length?nl?(0,g.jsx)(R.A,{page:"backproduct",data:Ut,headers:hl,currency:J,changeHandler:Rl}):(0,g.jsx)(s.A,{page:"backproduct",data:Ut,headers:hl,currency:J,changeHandler:Rl}):de.length?nl?(0,g.jsx)(R.A,{page:"registersale",productModal:l,productId:ct,data:de,headers:$.length>1?ml:pl,currency:J,Delete:Al,changeHandler:kl,footer:"registersale",increment:Ql,decrement:ql,lowUnitpriceProducts:Jt,wholeSale:Yt,selectedFilial:rl}):(0,g.jsx)(s.A,{page:"registersale",data:de,headers:$.length>1?ml:pl,currency:J,Delete:Al,changeHandler:kl,footer:"registersale",increment:Ql,decrement:ql,lowUnitpriceProducts:Jt,wholeSale:Yt,selectedFilial:rl}):(0,g.jsx)(u.A,{text:m("Sotuvda mahsulotlar qo'shilmagan!")})}),nl?(0,g.jsxs)("div",{className:"flex justify-center p-[5vw] gap-1 fixed bottom-0 left-0",children:[(0,g.jsx)("button",{type:"button",className:"lg:w-[200px] lg:ms-4 w-[70vw] register-selling-right-accept-btn",onClick:Ut.length?Ll:fl,children:m("To'lov")}),!Ut.length&&(0,g.jsx)("button",{type:"button",onClick:Cl,className:"lg:w-[50px] flex justify-center w-[20vw] register-selling-right-deny-btn",children:(0,g.jsx)(c.WiF,{size:"1.5rem"})})]}):null]}):null,G?(0,g.jsxs)("div",{className:"fixed w-[100%] h-[100vh] bg-[white] top-0 right-0 z-50 register-selling-right min-w-[20.25rem] bg-white-400 backdrop-blur-[3.125rem] rounded-[0.25rem] flex flex-col gap-[1.25rem]",children:[(0,g.jsx)(B.hvQ,{onClick:()=>H(!1),className:" absolute right-[20px]  top-[20px]  text-4xl cursor-pointer"}),(0,g.jsxs)("div",{className:"flex mt-[50px] flex-col grow gap-[1.25rem]",children:[(0,g.jsx)(_.A,{placeholder:m("kategoriyani qidirish..."),value:ge,onChange:Ul,onKeyUp:()=>{}}),(0,g.jsx)("div",{className:"grow relative overflow-auto",children:(0,g.jsx)("div",{className:"cards-container absolute left-0 right-[0.125rem] top-0 bottom-0",children:X?(0,g.jsx)("div",{className:"tableContainerPadding",children:(0,g.jsx)(d.A,{})}):pe.length>0?(0,x.map)(pe,(e=>(0,g.jsx)(o.A,{id:e._id,activeCategory:e._id===xe,title:e.name,code:e.code,products:e.products.length,onClick:_l},e._id))):(0,g.jsx)(u.A,{text:m("Kategoriya mavjud emas")})})})]}),(0,g.jsx)("div",{className:"flex gap-[0.625rem]",children:(0,g.jsx)("button",{type:"button",className:"register-selling-right-accept-btn",onClick:()=>H(!1),children:m("Saqlash")})})]}):null,nl?null:(0,g.jsxs)("div",{className:"register-selling-right min-w-[20.25rem] bg-white-400 backdrop-blur-[3.125rem] rounded-[0.25rem] flex flex-col gap-[1.25rem]",children:[(0,g.jsxs)("div",{className:"flex flex-col grow gap-[1.25rem]",children:[(0,g.jsx)(_.A,{placeholder:m("kategoriyani qidirish..."),value:ge,onChange:Ul,onKeyUp:()=>{}}),(0,g.jsx)("div",{className:"grow relative overflow-auto",children:(0,g.jsx)("div",{className:"cards-container absolute left-0 right-[0.125rem] top-0 bottom-0",children:X?(0,g.jsx)("div",{className:"tableContainerPadding",children:(0,g.jsx)(d.A,{})}):pe.length>0?(0,x.map)(pe,(e=>(0,g.jsx)(o.A,{id:e._id,activeCategory:e._id===xe,title:e.name,code:e.code,products:e.products.length,onClick:_l},e._id))):(0,g.jsx)(u.A,{text:m("Kategoriya mavjud emas")})})})]}),(0,g.jsxs)("div",{className:"flex gap-[0.625rem]",children:[(0,g.jsx)("button",{type:"button",className:"register-selling-right-accept-btn",onClick:Ut.length?Ll:fl,children:m("To'lov")}),!Ut.length&&(0,g.jsx)("button",{type:"button",onClick:Cl,className:"register-selling-right-deny-btn",children:(0,g.jsx)(c.WiF,{size:"1.5rem"})})]})]}),(0,g.jsx)(O.A,{onError:()=>{(0,P.lY)(m("Mahsulot kodi o'qilmadi!"),"warning")},onScan:e=>{Fl({barcode:e})}}),(0,g.jsx)("div",{className:"hidden",children:(0,g.jsx)(Z.E,{ref:ul,product:St})})]})}}}]);
//# sourceMappingURL=2660.601ca4a5.chunk.js.map